!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common"),require("keycloak-angular"),require("@angular/common/http"),require("@ngneat/cashew"),require("rxjs/operators"),require("@angular/router"),require("@angular/forms"),require("@ngx-translate/core"),require("@ngx-translate/http-loader"),require("primeng/button"),require("primeng/calendar"),require("primeng/card"),require("primeng/checkbox"),require("primeng/confirmdialog"),require("primeng/dialog"),require("primeng/dropdown"),require("primeng/dynamicdialog"),require("primeng/inputswitch"),require("primeng/inputtext"),require("primeng/inputtextarea"),require("primeng/menu"),require("primeng/message"),require("primeng/messages"),require("primeng/overlaypanel"),require("primeng/paginator"),require("primeng/panel"),require("primeng/panelmenu"),require("primeng/scrollpanel"),require("primeng/selectbutton"),require("primeng/table"),require("primeng/toast"),require("primeng/togglebutton"),require("primeng/tooltip"),require("primeng/autocomplete"),require("primeng/rating"),require("primeng/ripple"),require("primeng/skeleton"),require("primeng/breadcrumb"),require("@angular/animations"),require("primeng/dynamicdialog/"),require("primeng/api"),require("@angular/cdk/layout"),require("ngx-translate-multi-http-loader")):"function"==typeof define&&define.amd?define("portal-lib",["exports","@angular/core","rxjs","@angular/common","keycloak-angular","@angular/common/http","@ngneat/cashew","rxjs/operators","@angular/router","@angular/forms","@ngx-translate/core","@ngx-translate/http-loader","primeng/button","primeng/calendar","primeng/card","primeng/checkbox","primeng/confirmdialog","primeng/dialog","primeng/dropdown","primeng/dynamicdialog","primeng/inputswitch","primeng/inputtext","primeng/inputtextarea","primeng/menu","primeng/message","primeng/messages","primeng/overlaypanel","primeng/paginator","primeng/panel","primeng/panelmenu","primeng/scrollpanel","primeng/selectbutton","primeng/table","primeng/toast","primeng/togglebutton","primeng/tooltip","primeng/autocomplete","primeng/rating","primeng/ripple","primeng/skeleton","primeng/breadcrumb","@angular/animations","primeng/dynamicdialog/","primeng/api","@angular/cdk/layout","ngx-translate-multi-http-loader"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["portal-lib"]={},e.ng.core,e.rxjs,e.ng.common,e.keycloakAngular,e.ng.common.http,e.cashew,e.rxjs.operators,e.ng.router,e.ng.forms,e.core,e.httpLoader,e.button,e.calendar,e.card,e.checkbox,e.confirmdialog,e.dialog,e.dropdown,e.dynamicdialog,e.inputswitch,e.inputtext,e.inputtextarea,e.menu,e.message,e.messages,e.overlaypanel,e.paginator,e.panel,e.panelmenu,e.scrollpanel,e.selectbutton,e.table,e.toast,e.togglebutton,e.tooltip,e.autocomplete,e.rating,e.ripple,e.skeleton,e.breadcrumb,e.ng.animations,e._,e.i2,e.ng.cdk.layout,e.ngxTranslateMultiHttpLoader)}(this,(function(e,t,n,i,o,r,a,s,l,p,c,u,d,m,h,f,g,v,y,b,k,I,S,T,C,P,w,A,x,M,E,O,L,D,N,H,U,R,j,F,_,B,q,$,z,K){"use strict";var V=new t.InjectionToken("APP_CONFIG"),G=new t.InjectionToken("AUTH_SERVICE"),J=function(){function e(){this.mockUser={person:{displayName:"Max Musterman",firstName:"Max",lastName:"Mustermann",email:"max.mustermann@capgemini.com"},accountSettings:{localeAndTimeSettings:{locale:"de",timezone:"GMT"},notificationSettings:{},preferences:[],privacySettings:{}},id:"ID_MOCK_USER",identityProvider:"MOCK_TKIT_PORTAL_LIB",identityProviderId:"MOCK_ID",roles:["user","admin"],memberships:[{application:"APP1",roleMemberships:[{role:"user",permissions:[{action:"EDIT",resource:"ITEM",name:"Edit item",key:"ITEM#EDIT"}]}]}]}}return e.prototype.currentUser=function(){return this.mockUser},e.prototype.getAvatar=function(){return n.of(this.mockUser.avatar)},e.prototype.init=function(){return new Promise((function(e,t){return e(!0)}))},e.prototype.hasPermission=function(e){return!0},e.prototype.logout=function(){throw new Error("Method not implemented.")},e.prototype.getAuthProviderName=function(){return"MOCK_TKIT_PORTAL_LIB"},e.prototype.hasRole=function(e){return!0},e.prototype.getRoles=function(){return["tkit-portal-admin"]},e}();function W(e){return console.log("Start Mock auth initializer"),function(){return e.init().then((function(e){return console.log("mock auth app_initializer resolved "+e),e}))}}J.decorators=[{type:t.Injectable}],J.ctorParameters=function(){return[]};var Y=function(){};Y.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule],exports:[],declarations:[],providers:[{provide:G,useClass:J},{provide:t.APP_INITIALIZER,useFactory:W,multi:!0,deps:[G]}]}]}];var Z=function(){function e(e){this.httpClient=e,this.baseUrl="./portal-api/v1/portals"}return e.prototype.getPortalData=function(e){return this.httpClient.get(this.baseUrl+"/"+e,a.withCache())},e}();Z.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new Z(t.ɵɵinject(r.HttpClient))},token:Z,providedIn:"root"}),Z.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],Z.ctorParameters=function(){return[{type:r.HttpClient}]};var X=function(){function e(e,t,i){this.http=e,this.portalService=t,this.appConfig=i,this.lang$=new n.ReplaySubject(1)}return e.prototype.init=function(){var e=this;return new Promise((function(t,n){var i;e.appConfig.skipRemoteConfigLoad&&(console.log('TKA001: Remote config load is disabled. To enable it, remove the "skipRemoteConfigLoad" key in your environemnt.json'),e.customEnv=e.appConfig,t(!1)),console.log("ENV resolved "+window.APP_CONFIG),window.APP_CONFIG?i=new Promise((function(e,t){e(window.APP_CONFIG)})):(console.log("noooo moar http"),i=e.http.get(e.appConfig.remoteConfigURL||"assets/env.json").toPromise()),i.then((function(t){if(t){var n=e.sanitizeConfig(t);e.customEnv=Object.assign(Object.assign({},e.appConfig),n)}})).then((function(){var n=e.customEnv.TKIT_PORTAL_ID||"PORTAL";e.portalService.getPortalData(n).toPromise().then((function(n){n&&(e.portalData=n),t(!0)})).catch((function(n){console.log("Failed to load portal data! "+JSON.stringify(n)),e.portalData={portalId:"PORTAL"},t(!0)}))})).catch((function(e){console.log("Failed to load env configuration"),n(e)}))}))},e.prototype.sanitizeConfig=function(e){return Object.keys(e).filter((function(t){return!e[t].startsWith("${")})).reduce((function(t,n){return t[n]=e[n],t}),{})},e.prototype.getProperty=function(e){return this.customEnv[e]},e.prototype.getPortalData=function(){return this.portalData},e.prototype.setLang=function(e){console.log("[CONFIG SERVICE] SETTING LANG: ",e),this.lang$.next(e)},e}();X.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new X(t.ɵɵinject(r.HttpClient),t.ɵɵinject(Z),t.ɵɵinject(V))},token:X,providedIn:"root"}),X.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],X.ctorParameters=function(){return[{type:r.HttpClient},{type:Z},{type:void 0,decorators:[{type:t.Inject,args:[V]}]}]};var Q=function(){function e(e){this.http=e,this.url="./portal-api/v1/userProfile/me",this.personUrl="./portal-api/v1/userProfile/me/userPerson",this.avatarUrl="./portal-api/v1/userProfile/me/avatar",this.settingsUrl="./portal-api/v1/userProfile/me/settings",this.changePasswordUrl="./portal-api/v1/userProfile/me/change-password",this.refreshProfile$=new n.ReplaySubject(1),this.currentAvatar$=new n.ReplaySubject(1),this.currentUser$=this.refreshProfile$.pipe(s.switchMapTo(this.http.get(this.url)),s.shareReplay(1))}return e.prototype.getCurrentUser=function(){return this.currentUser$},e.prototype.getUpdatedAvatar=function(){return this.currentAvatar$},e.prototype.updatePersonalInfo=function(e){return this.http.put(this.personUrl,e)},e.prototype.setUserAvatar=function(e){var t=this,n=new FormData;return n.append("file",e),this.http.put(this.avatarUrl,n).pipe(s.tap((function(e){return t.currentAvatar$.next(e)})))},e.prototype.removeAvatar=function(){var e=this;return this.http.delete(this.avatarUrl).pipe(s.tap((function(){return e.currentAvatar$.next(null)})))},e.prototype.updateUserSettings=function(e){return this.http.patch(this.settingsUrl,e)},e.prototype.refreshProfile=function(){this.refreshProfile$.next()},e.prototype.getUserSettings=function(){return this.http.get(this.settingsUrl)},e.prototype.getCurrentUserFromBE=function(){return this.http.get(this.url)},e.prototype.changeUserPassword=function(e){return this.http.put(this.changePasswordUrl,e)},e}();Q.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new Q(t.ɵɵinject(r.HttpClient))},token:Q,providedIn:"root"}),Q.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],Q.ctorParameters=function(){return[{type:r.HttpClient}]};var ee="portal-lib/assets/images/default_avatar.png",te="TKIT_PORTAL_DISABLE_THEME_MANAGEMENT",ne="TKIT_SEARCH_BASE_URL",ie="KEYCLOAK_REALM",oe="KEYCLOAK_ENABLE_SILENT_SSO",re="KEYCLOAK_URL",ae="KEYCLOAK_CLIENT_ID",se="kc_refreshToken",le="kc_idToken",pe="kc_token",ce="tkit_user_profile",ue=function(){function e(e,t,n,i){this.keycloakService=e,this.configService=t,this.userProfileService=n,this.router=i,this.user={userId:"anonymous",userPerson:{firstName:"Guest"},functions:[],roles:[]}}return e.prototype.hasPermission=function(e){return!!this.user.functions&&this.user.functions.includes(e)},e.prototype.currentUser=function(){return this.userProfile},e.prototype.logout=function(){this.clearKCStateFromLocalstorage(),this.keycloakService.logout()},e.prototype.getAuthProviderName=function(){return"Keycloak based Security"},e.prototype.init=function(){var e=this;console.log("Keycloak Auth initialization");var t=localStorage.getItem(pe),i=localStorage.getItem(le),o=localStorage.getItem(se);if(t){var r=JSON.parse(atob(o.split(".")[1]));console.log("Got tokens in LC "+r.exp+" "+r.sub),1e3*r.exp<(new Date).getTime()&&(console.log("Refresh token expired"),t=void 0,o=void 0,i=void 0,this.clearKCStateFromLocalstorage())}this.setupEventListener();var a={url:this.configService.getProperty(re),clientId:this.configService.getProperty(ae)||this.configService.getProperty("appId"),realm:this.configService.getProperty(ie)};a.clientId&&a.realm&&a.url||(a="./assets/keycloak.json");var s={loadUserProfileAtStartUp:!1,config:a,initOptions:{onLoad:"check-sso",checkLoginIframe:!1,silentCheckSsoRedirectUri:"true"===this.configService.getProperty(oe)?this.getSilentSSOUrl():void 0,idToken:i,refreshToken:o,token:t},enableBearerInterceptor:!0,bearerExcludedUrls:["/assets"]};return this.keycloakService.init(s).catch((function(t){return console.log("kc err "+t+", try force login"),e.keycloakService.login()})).then((function(t){return console.log("Keycloak init done, loginOk?: "+t),t?e.keycloakService.getToken():e.keycloakService.login().then((function(){return"login"}))})).then((function(t){var n=JSON.parse(atob(t.split(".")[1]));console.log("fetching profile "+JSON.stringify(n));var i=localStorage.getItem(ce)&&JSON.parse(localStorage.getItem(ce));if(i){if(i.person.email===n.email)return e.refreshProfile(),console.log("load user profile from cache(and reloading asynchronously)"),i;console.log("User profile in LS does not match Keycloak token"),localStorage.removeItem(ce)}return console.log("load user profile from API"),e.userProfileService.getCurrentUserFromBE().toPromise()})).then((function(t){return console.log("Got user profile, update state"),e.userProfile=t,e.avatarSubject=new n.ReplaySubject(1),e.handleAvatarUpdate(e.userProfile.avatar),e.userProfileService.getUpdatedAvatar().subscribe((function(t){return e.handleAvatarUpdate(t)})),e.updateUserFromUserProfile(e.userProfile),localStorage.setItem(ce,JSON.stringify(t)),console.log("Keycloak auth init complete"),!0})).catch((function(e){throw console.log("KC ERROR "+e+" as json "+JSON.stringify(e)),e}))},e.prototype.init2=function(){var e=this;console.log("kc init 4");var t=localStorage.getItem(pe),i=localStorage.getItem(le),o=localStorage.getItem(se);t&&(1e3*JSON.parse(atob(o.split(".")[1])).exp<(new Date).getTime()&&(console.log("Refresh token expired"),t=void 0,o=void 0,i=void 0,this.clearKCStateFromLocalstorage()));this.setupEventListener();var r={url:this.configService.getProperty(re),clientId:this.configService.getProperty(ae)||this.configService.getProperty("appId"),realm:this.configService.getProperty(ie)};r.clientId&&r.realm&&r.url||(r="./assets/keycloak.json");var a={loadUserProfileAtStartUp:!1,config:r,initOptions:{onLoad:"check-sso",checkLoginIframe:!1,silentCheckSsoRedirectUri:"true"===this.configService.getProperty(oe)?this.getSilentSSOUrl():void 0,idToken:i,refreshToken:o,token:t},enableBearerInterceptor:!0,bearerExcludedUrls:["/assets"]};return console.log("INit KC with "+JSON.stringify(a,null,2)),this.keycloakService.init(a).catch((function(t){return console.log("kc err "+t+", try force login"),e.keycloakService.login()})).then((function(t){return console.log("After KC init "+t),e.keycloakService.getToken()})).then((function(t){if(t){var n=JSON.parse(atob(t.split(".")[1]));console.log("fetching profile");var i;if(i=localStorage.getItem(ce)){if(console.log("load user profile from cache"),i.email===n.email)return e.refreshProfile(),JSON.parse(i);console.log("USer in LS does tno match. clear"),localStorage.removeItem(ce)}return console.log("load user profile from API"),e.userProfileService.getCurrentUserFromBE().toPromise()}console.log("no TOKEN AAAAA")})).catch((function(e){throw console.log("KC ERROR "+e),e})).then((function(t){return console.log("Got user profile, update"),e.userProfile=t,e.avatarSubject=new n.ReplaySubject(1),e.handleAvatarUpdate(e.userProfile.avatar),e.userProfileService.getUpdatedAvatar().subscribe((function(t){return e.handleAvatarUpdate(t)})),e.updateUserFromUserProfile(e.userProfile),localStorage.setItem(ce,JSON.stringify(t)),console.log("KC init complete returnint"),!0}))},e.prototype.setupEventListener=function(){var e=this;this.keycloakService.keycloakEvents$.subscribe((function(t){e.keycloakService.getKeycloakInstance().token?localStorage.setItem(pe,e.keycloakService.getKeycloakInstance().token):localStorage.removeItem(pe),e.keycloakService.getKeycloakInstance().idToken?localStorage.setItem(le,e.keycloakService.getKeycloakInstance().idToken):localStorage.removeItem(le),e.keycloakService.getKeycloakInstance().refreshToken?localStorage.setItem(se,e.keycloakService.getKeycloakInstance().refreshToken):localStorage.removeItem(se),t.type===o.KeycloakEventType.OnAuthLogout&&(console.log("SSO logout nav to root"),e.clearKCStateFromLocalstorage(),e.router.navigateByUrl("/"))}))},e.prototype.clearKCStateFromLocalstorage=function(){localStorage.removeItem(le),localStorage.removeItem(pe),localStorage.removeItem(se)},e.prototype.getSilentSSOUrl=function(){var e=document.getElementsByTagName("base")[0].href;return"/"===e&&(e=""),e+"/assets/silent-check-sso.html"},e.prototype.hasRole=function(e){if("string"==typeof e){var t=e;return this.user.roles.map((function(e){return e.toUpperCase()})).includes(t.toUpperCase())}return this.user.roles.map((function(e){return e.toUpperCase()})).filter((function(t){return e.map((function(e){return e.toUpperCase()})).includes(t.toUpperCase())})).length>0},e.prototype.getRoles=function(){return this.user.roles},e.prototype.refreshProfile=function(){var e=this;this.userProfileService.getCurrentUserFromBE().subscribe((function(t){e.userProfile=t,localStorage.setItem(ce,JSON.stringify(t)),e.updateUserFromUserProfile(e.userProfile)}))},e.prototype.loadFullProfile=function(){return this.userProfileService.getCurrentUser()},e.prototype.handleAvatarUpdate=function(e){(null==e?void 0:e.avatarImageUrl)&&(null==e?void 0:e.avatarSmallImageUrl)?this.avatarSubject.next({avatarImageUrl:"portal-api"+e.avatarImageUrl,avatarSmallImageUrl:"portal-api"+e.avatarSmallImageUrl}):this.avatarSubject.next(null)},e.prototype.getAvatar=function(){return this.avatarSubject.asObservable()},e.prototype.updateUserFromUserProfile=function(e){var t=this;this.user={roles:e.roles,userId:e.id,principalId:e.id,commonName:e.person.displayName,userPerson:Object.assign({},e.person),functions:[]},this.userProfile.memberships&&this.userProfile.memberships.forEach((function(e){e.roleMemberships.forEach((function(e){e.permissions.forEach((function(e){t.user.functions.push(e.key)}))}))}))},e}();ue.decorators=[{type:t.Injectable}],ue.ctorParameters=function(){return[{type:o.KeycloakService},{type:X},{type:Q},{type:l.Router}]};var de,me=function(){};me.decorators=[{type:t.NgModule,args:[{declarations:[],imports:[i.CommonModule,o.KeycloakAngularModule],exports:[o.KeycloakAngularModule],providers:[{provide:G,useClass:ue}]}]}],(de=e.PhoneType||(e.PhoneType={})).MOBILE="MOBILE",de.LANDLINE="LANDLINE";var he=function(){function e(){this.itemsSource=new n.Subject,this.itemsHandler=this.itemsSource.asObservable()}return e.prototype.setItems=function(e){this.itemsSource.next(e)},e}();he.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new he},token:he,providedIn:"root"}),he.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],he.ctorParameters=function(){return[]};var fe=function(){function e(){}return e.prototype.getUserSettingsActivatedTab=function(){return this.userSettingsActivatedTab},e.prototype.setUserSettingsActivatedTab=function(e){this.userSettingsActivatedTab=e},e}();fe.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new fe},token:fe,providedIn:"root"}),fe.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}];var ge=function(){function e(e,t,n,i){this.renderer=e,this.el=t,this.viewContainer=n,this.authService=i}return e.prototype.ngOnInit=function(){console.log("Action permission "+this.permission),this.authService.hasPermission(this.permission)||(console.log("Disable btn because no perm "+this.permission),this.renderer.setAttribute(this.el.nativeElement,"disabled","disabled"),this.viewContainer.clear())},e}();ge.decorators=[{type:t.Directive,args:[{selector:"[tkAction]"}]}],ge.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:t.ViewContainerRef},{type:void 0,decorators:[{type:t.Inject,args:[G]}]}]},ge.propDecorators={permission:[{type:t.Input}],loaderState:[{type:t.Input}]};var ve=function(){function e(e){this.breadcrumbService=e,this.openHelpPage=new t.EventEmitter,this.openHelpPageEditor=new t.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.breadcrumbService.itemsHandler.subscribe((function(t){e.items=t})),this.home={icon:"pi pi-home",routerLink:"/"}},e.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.onOpenHelpPageEditor=function(e){this.openHelpPageEditor.emit(e)},e.prototype.onOpenHelpPage=function(e){this.openHelpPage.emit(e)},e}();ve.decorators=[{type:t.Component,args:[{selector:"tk-breadcrumb",template:'<div *ngIf="disableBreadcrumbs" class="header-breadcrumb">\n  <ul>\n    <li>\n      <a class="home-icon" routerLink="">\n        <i class="pi pi-home"></i>\n      </a>\n    </li>\n    <li></li>\n    <ng-template ngFor let-item let-last="last" [ngForOf]="items">\n      <li>\n        <a [routerLink]="item.routerLink" *ngIf="item.routerLink">{{ item.label }}</a>\n        <ng-container *ngIf="!item.routerLink">{{ item.label }}</ng-container>\n      </li>\n      <li *ngIf="!last">/</li>\n    </ng-template>\n    <li>\n      <tk-http-progress-loader class="p-ml-2"></tk-http-progress-loader>\n    </li>\n  </ul>\n</div>\n<div *ngIf="!disableBreadcrumbs" class="layout-breadcrumb-container p-d-flex p-jc-between p-ai-center p-shadow-1">\n  <p-breadcrumb [home]="home" [model]="items" styleClass="layout-breadcrumb p-pl-4 p-py-2"></p-breadcrumb>\n  <div *ngIf="fullPortalLayout" class="layout-breadcrumb-buttons p-d-flex p-ai-center p-pr-3">\n    <button\n      pButton\n      pRipple\n      type="button"\n      title="Hilfe für diesen Artikel anzeigen"\n      (click)="onOpenHelpPage($event)"\n      icon="pi pi-question-circle"\n      class="p-button-rounded p-button-text p-button-plain p-mr-1"\n    ></button>\n    <button\n      pButton\n      pRipple\n      type="button"\n      title="Hilfe für diesen Artikel vervalten"\n      (click)="onOpenHelpPageEditor($event)"\n      icon="pi pi-pencil"\n      class="p-button-rounded p-button-text p-button-plain p-mr-1"\n    ></button>\n  </div>\n</div>\n',styles:[".home-icon{margin-right:.3em}.home-icon i{font-size:28px}.header-breadcrumb{display:flex;flex-direction:row;font-size:large}.header-breadcrumb a i{vertical-align:middle;color:#fff}.header-breadcrumb ul{padding:0;list-style:none;display:inline-block}.header-breadcrumb ul li{display:inline-block;color:#fff;vertical-align:middle}.header-breadcrumb ul li:nth-child(2n){font-size:20px}"]}]}],ve.ctorParameters=function(){return[{type:he}]},ve.propDecorators={disableBreadcrumbs:[{type:t.Input}],fullPortalLayout:[{type:t.Input}],openHelpPage:[{type:t.Output}],openHelpPageEditor:[{type:t.Output}]};var ye=function(){function e(e){this.el=e,this.isCollapsed=!0,this.collapsed=new t.EventEmitter,this.expanded=new t.EventEmitter,console.log("collapsible directive constructor "+e.nativeElement.classList),e.nativeElement.classList.add("collapsible")}return e.prototype.toggle=function(){this.isCollapsed?this.show():this.hide()},e.prototype.show=function(){this.isCollapsed=!1},e.prototype.hide=function(){this.isCollapsed=!0},e}();ye.decorators=[{type:t.Directive,args:[{selector:"[tkCollapsible]"}]}],ye.ctorParameters=function(){return[{type:t.ElementRef}]},ye.propDecorators={isCollapsed:[{type:t.Input}],collapsed:[{type:t.Output}],expanded:[{type:t.Output}]};var be=function(){};be.decorators=[{type:t.Component,args:[{selector:"tk-footer",template:'\n    <div \n      class="footer"\n      id="footer"\n      role="contentinfo"\n    >\n      <span class="footer-left-segment">\n        <a\n          *ngIf="homePortal.homePage; else withoutHref"\n          [href]="homePortal.homePage"\n        >\n          {{ homePortal.footerLabel }}\n        </a>\n        <ng-template #withoutHref>\n          <a>\n            {{ homePortal.footerLabel }}\n          </a>\n        </ng-template>\n        -\n        <span>&copy; All Rights Reserved</span>\n      </span>\n      <div class="footer-right-segment">\n        <span class="links" *ngFor="let link of homePortal.subjectLinks">\n          <a [href]="link.url">{{ link.label }}</a>\n        </span>\n      </div>\n    </div>\n  ',styles:["\n      .footer span {\n        vertical-align: middle;\n      }\n      .footer-right-segment a {\n        margin-left: 5px;\n        margin-right: 5px;\n      }\n      .footer-right-segment {\n        margin-right: 10px;\n        float: right;\n      }\n      .footer-left-segment {\n        margin-left: 15px;\n        float: left;\n      }\n      .footer-left-segment a {\n        color: #000000;\n      }\n    "]}]}],be.propDecorators={homePortal:[{type:t.Input}]};var ke=function(){function e(){this.display=!1,this.closed=new t.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.save=function(){this.closed.emit(!0)},e.prototype.close=function(e){this.closed.emit(!1)},e}();ke.decorators=[{type:t.Component,args:[{selector:"tk-help-editor",template:'\n    <p-dialog\n      header="Edit help item for this page"\n      [contentStyle]="{ overflow: \'visible\' }"\n      [style]="{ width: \'500px\', \'max-height\': \'400px\' }"\n      [(visible)]="display"\n      (onHide)="close($event)"\n    >\n      <div class="modal-content">\n        <form class="p-grid p-fluid">\n          <div class="p-col-12">\n            <span class="p-float-label">\n              <input\n                id="page"\n                type="text"\n                pInputText\n                name="page"\n                disabled="true"\n                [(ngModel)]="helpItem.helpItemId"\n              />\n              <label for="page">Page Item</label>\n            </span>\n          </div>\n          <div class="p-col-12">\n            <span class="p-float-label">\n              <input\n                id="baseUrl"\n                type="text"\n                pInputText\n                name="baseUrl"\n                [(ngModel)]="helpItem.baseUrl"\n              />\n              <label for="baseUrl">Base Url</label>\n            </span>\n          </div>\n          <div class="p-col-12">\n            <span class="p-float-label">\n              <input\n                id="relUrl"\n                type="text"\n                pInputText\n                name="relUrl"\n                [(ngModel)]="helpItem.resourceUrl"\n              />\n              <label for="relUrl">Relative Url</label>\n            </span>\n          </div>\n        </form>\n      </div>\n      <p-footer>\n        <button\n          pButton\n          class="primary"\n          value="Save"\n          label="Save"\n          icon="pi pi-check"\n          (click)="save()"\n        ></button>\n        <button\n          pButton\n          icon="pi pi-times"\n          class="flat"\n          value="Cancel"\n          label="Cancel"\n          (click)="display = false"\n        ></button>\n      </p-footer>\n    </p-dialog>\n  '}]}],ke.ctorParameters=function(){return[]},ke.propDecorators={display:[{type:t.Input}],helpItem:[{type:t.Input}],closed:[{type:t.Output}]};var Ie=function(){this.isLoading=new n.BehaviorSubject(!1)};Ie.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new Ie},token:Ie,providedIn:"root"}),Ie.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],Ie.ctorParameters=function(){return[]};var Se=function(){function e(e){var t=this;this.loaderService=e,this.loaderService.isLoading.subscribe((function(e){t.loading=e}))}return e.prototype.ngOnInit=function(){},e}();Se.decorators=[{type:t.Component,args:[{selector:"tk-http-progress-loader",template:'\n    <div class="wrapper" [ngClass]="{ noshow: !loading }">\n      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="50" cy="50" r="45" />\n      </svg>\n    </div>\n  ',styles:["\n      :host {\n        display: block;\n        height: 36px;\n      }\n      .wrapper {\n        position: absolute;\n        opacity: 1;\n      }\n      .wrapper.noshow {\n        -webkit-transition: opacity 1s linear;\n        -moz-transition: opacity 1s linear;\n        -o-transition: opacity 1s linear;\n        transition: opacity 1s linear;\n        opacity: 0;\n      }\n      svg {\n        animation: 2s linear infinite svg-animation;\n        width: 36px;\n      }\n\n      .noshow svg {\n        animation: none;\n      }\n\n      @keyframes svg-animation {\n        0% {\n          transform: rotateZ(0deg);\n        }\n        100% {\n          transform: rotateZ(360deg);\n        }\n      }\n\n      circle {\n        animation: 1.4s ease-in-out infinite both circle-animation;\n        display: block;\n        fill: transparent;\n        stroke: #ffffff;\n        stroke-linecap: round;\n        stroke-dasharray: 283;\n        stroke-dashoffset: 280;\n        stroke-width: 10px;\n        transform-origin: 50% 50%;\n      }\n\n      @keyframes circle-animation {\n        0%,\n        25% {\n          stroke-dashoffset: 280;\n          transform: rotate(0);\n        }\n\n        50%,\n        75% {\n          stroke-dashoffset: 75;\n          transform: rotate(45deg);\n        }\n\n        100% {\n          stroke-dashoffset: 280;\n          transform: rotate(360deg);\n        }\n      }\n    "]}]}],Se.ctorParameters=function(){return[{type:Ie}]};var Te=function(){function e(e,n,i){this.authService=e,this.router=n,this.configService=i,this.defaultAvatarUrl=ee,this.inlineMenuClick=new t.EventEmitter}return Object.defineProperty(e.prototype,"displayName",{get:function(){var e,t=null===(e=this.userProfile)||void 0===e?void 0:e.person;return(null==t?void 0:t.displayName)?t.displayName:(null==t?void 0:t.firstName)&&t.lastName?t.firstName+" "+t.lastName:this.authService.currentUser().userId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this.configService.getPortalData().baseUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{get:function(){return this.inlineMenuActive?null:"-1"},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.userProfile=this.authService.currentUser(),this.authService.getAvatar().subscribe((function(t){return e.userAvatar=t}))},e.prototype.onClick=function(e){this.inlineMenuClick.emit(null),e.preventDefault()},e.prototype.logout=function(e){e.preventDefault(),this.authService.logout()},e}();Te.decorators=[{type:t.Component,args:[{selector:"tk-inline-profile",template:'<div [ngClass]="{\'layout-inline-menu\': true, \'layout-inline-menu-active\': inlineMenuActive}">\n  <a class="layout-inline-menu-action p-d-flex p-dir-row p-ai-center p-p-3" (click)="onClick($event)">\n    <img [src]="userAvatar?.avatarSmallImageUrl || defaultAvatarUrl" alt="avatar" class="profile-image" />\n    <span class="p-d-flex p-flex-column p-ml-2">\n      <span class="p-text-bold">{{ displayName }}</span>\n      <small>Portal User</small>\n    </span>\n    <i class="layout-inline-menu-icon pi pi-angle-down p-ml-auto"></i>\n  </a>\n\n  <ul class="layout-inline-menu-action-panel" [@menu]="inlineMenuActive ? \'visibleAnimated\' : \'hiddenAnimated\'">\n    <li *tkIfPerm="\'PROFILE#VIEW\'" class="layout-inline-menu-action-item">\n      <a\n        class="p-d-flex p-flex-row p-ai-center"\n        [attr.tabindex]="tabIndex"\n        [href]="baseUrl + \'/account/profile\'"\n        title="Manage your personal information and avatar"\n      >\n        <i class="pi pi-user pi-fw"></i>\n        <span>My Personal Info</span>\n      </a>\n    </li>\n    <li class="layout-inline-menu-action-item">\n      <a\n        class="p-d-flex p-flex-row p-ai-center"\n        [attr.tabindex]="tabIndex"\n        [href]="baseUrl + \'/account/settings\'"\n        title="Manage your preferences and settings"\n      >\n        <i class="pi pi-cog pi-fw"></i>\n        <span>My Settings</span>\n      </a>\n    </li>\n    <li class="layout-inline-menu-action-item">\n      <a\n        class="p-d-flex p-flex-row p-ai-center"\n        [attr.tabindex]="tabIndex"\n        [href]="baseUrl + \'/account/change-password\'"\n        title="Change your current password"\n      >\n        <i class="pi pi-key pi-fw"></i>\n        <span>Change Password</span>\n      </a>\n    </li>\n    <li class="layout-inline-menu-action-item">\n      <a\n        class="p-d-flex p-flex-row p-ai-center"\n        [attr.tabindex]="tabIndex"\n        [href]="baseUrl + \'/account/roles-and-perms\'"\n        title="Overview of your application roles and permissions"\n      >\n        <i class="pi pi-unlock pi-fw"></i>\n        <span>My Roles & Permissions</span>\n      </a>\n    </li>\n    <li class="layout-inline-menu-action-item">\n      <a class="p-d-flex p-flex-row p-ai-center" [attr.tabindex]="tabIndex" href="#" (click)="logout($event)">\n        <i class="pi pi-power-off pi-fw"></i>\n        <span>Logout</span>\n      </a>\n    </li>\n  </ul>\n</div>\n',animations:[B.trigger("menu",[B.state("hiddenAnimated",B.style({height:"0px",paddingBottom:"0px",overflow:"hidden"})),B.state("visibleAnimated",B.style({height:"*",overflow:"visible"})),B.state("visible",B.style({opacity:1,"z-index":100})),B.state("hidden",B.style({opacity:0,"z-index":"*"})),B.transition("visibleAnimated => hiddenAnimated",B.animate("400ms cubic-bezier(0.86, 0, 0.07, 1)")),B.transition("hiddenAnimated => visibleAnimated",B.animate("400ms cubic-bezier(0.86, 0, 0.07, 1)")),B.transition("visible => hidden",B.animate(".1s linear")),B.transition("hidden => visible",[B.style({transform:"scaleY(0.8)"}),B.animate(".12s cubic-bezier(0, 0, 0.2, 1)")])])],styles:["@-webkit-keyframes opacityFadeIn{0%{opacity:0}to{opacity:1}}@keyframes opacityFadeIn{0%{opacity:0}to{opacity:1}}.profile-content{-webkit-animation:opacityFadeIn .2s linear 0s 1;animation:opacityFadeIn .2s linear 0s 1}.profile-image{border-radius:50%;width:32px;height:32px}"]}]}],Te.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[G]}]},{type:l.Router},{type:X}]},Te.propDecorators={inlineMenuActive:[{type:t.Input}],inlineMenuClick:[{type:t.Output}]};var Ce=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();Ce.decorators=[{type:t.Component,args:[{selector:"tk-loading",template:'<div class="loading-panel">\r\n  <span class="loader loader--style8" title="7">\r\n    <svg\r\n      version="1.1"\r\n      id="Layer_1"\r\n      xmlns="http://www.w3.org/2000/svg"\r\n      xmlns:xlink="http://www.w3.org/1999/xlink"\r\n      x="0px"\r\n      y="0px"\r\n      width="24px"\r\n      height="30px"\r\n      viewBox="0 0 24 30"\r\n      style="enable-background:new 0 0 50 50;"\r\n      xml:space="preserve"\r\n    >\r\n      <rect\r\n        x="0"\r\n        y="5.25098"\r\n        width="4"\r\n        height="19.498"\r\n        fill="#333"\r\n        opacity="0.2"\r\n      >\r\n        <animate\r\n          attributeName="opacity"\r\n          attributeType="XML"\r\n          values="0.2; 1; .2"\r\n          begin="0s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n        <animate\r\n          attributeName="height"\r\n          attributeType="XML"\r\n          values="10; 20; 10"\r\n          begin="0s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n        <animate\r\n          attributeName="y"\r\n          attributeType="XML"\r\n          values="10; 5; 10"\r\n          begin="0s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n      </rect>\r\n      <rect\r\n        x="8"\r\n        y="7.75098"\r\n        width="4"\r\n        height="14.498"\r\n        fill="#333"\r\n        opacity="0.2"\r\n      >\r\n        <animate\r\n          attributeName="opacity"\r\n          attributeType="XML"\r\n          values="0.2; 1; .2"\r\n          begin="0.15s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n        <animate\r\n          attributeName="height"\r\n          attributeType="XML"\r\n          values="10; 20; 10"\r\n          begin="0.15s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n        <animate\r\n          attributeName="y"\r\n          attributeType="XML"\r\n          values="10; 5; 10"\r\n          begin="0.15s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n      </rect>\r\n      <rect\r\n        x="16"\r\n        y="9.74902"\r\n        width="4"\r\n        height="10.502"\r\n        fill="#333"\r\n        opacity="0.2"\r\n      >\r\n        <animate\r\n          attributeName="opacity"\r\n          attributeType="XML"\r\n          values="0.2; 1; .2"\r\n          begin="0.3s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n        <animate\r\n          attributeName="height"\r\n          attributeType="XML"\r\n          values="10; 20; 10"\r\n          begin="0.3s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n        <animate\r\n          attributeName="y"\r\n          attributeType="XML"\r\n          values="10; 5; 10"\r\n          begin="0.3s"\r\n          dur="0.6s"\r\n          repeatCount="indefinite"\r\n        ></animate>\r\n      </rect>\r\n    </svg>\r\n  </span>\r\n  <p>Loading...</p>\r\n</div>\r\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[".loading-panel{padding:1em}"]}]}],Ce.ctorParameters=function(){return[]};var Pe=function(){function e(e,t){this.config=e,this.ref=t,this.pageId=e.data.pageItem}return e.prototype.ngOnInit=function(){},e.prototype.close=function(){this.ref.close()},e}();Pe.decorators=[{type:t.Component,args:[{template:'\n    <div>\n      <div class="dialog-content">\n        <span\n          >No help was found for this item. Please ask your system administrator\n          to add it. The context ID for this page is below:</span\n        >\n        <span class="code p-my-2">{{ pageId }}</span>\n      </div>\n      <div class="dialog-footer">\n        <div class="p-col p-fluid">\n          <button\n            type="button"\n            pButton\n            label="Close"\n            (click)="close()"\n          ></button>\n        </div>\n      </div>\n    </div>\n  ',styles:["\n      .code {\n        display: block;\n        clear: both;\n        padding: 0.5em;\n        font-family: monospace;\n        background-color: #ececec;\n        border-radius: 4px;\n      }\n    "]}]}],Pe.ctorParameters=function(){return[{type:q.DynamicDialogConfig},{type:q.DynamicDialogRef}]};var we=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();we.decorators=[{type:t.Component,args:[{selector:"tk-panel-header",template:'\n    <div class="panel-header">\n      <div class="panel-toolbar-left">\n        <ng-container\n          *ngTemplateOutlet="leftToolbar ? leftToolbar : defaultLeftToolbar"\n        ></ng-container>\n      </div>\n      <h1 class="panel-heading">{{ header }}</h1>\n      <div class="panel-toolbar-right">\n        <ng-container\n          *ngTemplateOutlet="rightToolbar ? rightToolbar : defaultRightToolbar"\n        ></ng-container>\n      </div>\n    </div>\n\n    <ng-template #defaultLeftToolbar> </ng-template>\n    <ng-template #defaultRightToolbar> </ng-template>\n  ',styles:["\n      .panel-header {\n        display: flex;\n      }\n      .panel-heading {\n        margin: 0px;\n        line-height: 30px;\n        font-weight: 100;\n      }\n      .panel-toolbar-right {\n        margin-left: auto;\n      }\n      .panel-toolbar-left,\n      .panel-toolbar-right {\n        display: flex;\n      }\n    "]}]}],we.ctorParameters=function(){return[]},we.propDecorators={header:[{type:t.Input}],leftToolbar:[{type:t.Input}],rightToolbar:[{type:t.Input}]};var Ae=function(){function e(e,n,i,o){this.authService=e,this.config=n,this.stateService=i,this.router=o,this.defaultAvatarUrl=ee,this.menuButtonClick=new t.EventEmitter,this.topbarItemClick=new t.EventEmitter,this.openHelpPage=new t.EventEmitter,this.openHelpPageEditor=new t.EventEmitter,this.openFeedback=new t.EventEmitter,this.openAddToLaunchpad=new t.EventEmitter,this.openSupportTicket=new t.EventEmitter,this.searchClick=new t.EventEmitter,this.homeNavUrl="/",this.homeNavTitle="Home"}return e.prototype.ngOnInit=function(){this.userProfile=this.authService.currentUser(),this.userAvatar=this.authService.getAvatar(),this.userDisplayName=this.authService.currentUser().person.displayName,this.searchUrl=this.config.getProperty(ne)||"/ops/enterprise-search"},e.prototype.clickMenu=function(){console.log("Menu click"),this.menuExpanded=!this.menuExpanded},e.prototype.navigateTo=function(e,t){t.preventDefault(),e=this.config.getPortalData().baseUrl+e,location.assign(e)},e.prototype.logout=function(e){e.preventDefault(),this.authService.logout()},e.prototype.onMenuButtonClick=function(e){this.menuButtonClick.emit(e)},e.prototype.onTopbarItemClick=function(e,t){this.topbarItemClick.emit({event:e,arg:t})},e.prototype.onOpenHelpPageEditor=function(e){this.openHelpPageEditor.emit(e)},e.prototype.onOpenHelpPage=function(e){this.openHelpPage.emit(e)},e.prototype.onOpenFeedback=function(e){this.openFeedback.emit(e)},e.prototype.onAddToFavourites=function(e){this.openAddToLaunchpad.emit(e)},e.prototype.onOpenSupportTicket=function(e){this.openSupportTicket.emit(e)},e.prototype.onTopbarMobileButtonClick=function(e){this.mobileTopbarActive=!this.mobileTopbarActive,e.preventDefault()},e.prototype.onSearchClick=function(e,t){this.searchClick.emit({event:e,val:t})},e}();Ae.decorators=[{type:t.Component,args:[{selector:"tk-header",template:'<div class="layout-topbar p-shadow-4" id="header" role="banner">\n  <div class="layout-topbar-left">\n    <a class="layout-topbar-logo" [href]="homeNavUrl" [title]="homeNavTitle">\n      <div class="logo"></div>\n    </a>\n\n    <a *ngIf="fullPortalLayout" class="layout-menu-button p-shadow-6" (click)="onMenuButtonClick($event)" pRipple [title]="menuButtonTitle">\n      <i class="pi pi-chevron-right"></i>\n    </a>\n\n    <a class="layout-topbar-mobile-button" (click)="onTopbarMobileButtonClick($event)" pRipple>\n      <i class="pi pi-ellipsis-v fs-large"></i>\n    </a>\n  </div>\n\n  <div class="layout-topbar-right" [ngClass]="{\'layout-topbar-mobile-active\': mobileTopbarActive}">\n    <div class="layout-topbar-actions-left">\n      <tk-breadcrumb\n        *ngIf="disableBreadcrumbs"\n        [disableBreadcrumbs]="disableBreadcrumbs"\n        [fullPortalLayout]="fullPortalLayout"\n        (openHelpPage)="onOpenHelpPage($event)"\n        (openHelpPageEditor)="onOpenHelpPageEditor($event)"\n      ></tk-breadcrumb>\n    </div>\n    <div class="layout-topbar-actions-right" *ngIf="fullPortalLayout">\n      <ul class="layout-topbar-items">\n        <li class="layout-topbar-item">\n          <a class="layout-topbar-action rounded-circle" href="#" title="Feedback" (click)="onOpenFeedback($event)">\n            <i class="pi pi-star-o fs-large"></i>\n          </a>\n        </li>\n        <li class="layout-topbar-item">\n          <a\n            class="layout-topbar-action rounded-circle"\n            href="#"\n            title="Add to Favourites"\n            (click)="onAddToFavourites($event)"\n          >\n            <i class="pi pi-heart fs-large"></i>\n          </a>\n        </li>\n        <li class="layout-topbar-item">\n          <a\n            class="layout-topbar-action rounded-circle"\n            href="#"\n            title="Support Ticket"\n            (click)="onOpenSupportTicket($event)"\n          >\n            <i class="pi pi-ticket fs-large"></i>\n          </a>\n        </li>\n        <li class="layout-topbar-item layout-search-item">\n          <a class="layout-topbar-action rounded-circle" (click)="onTopbarItemClick($event, \'search\')" pRipple>\n            <i class="pi pi-search fs-large"></i>\n          </a>\n\n          <div class="layout-search-panel p-inputgroup" [@topbarActionPanelAnimation]="\'visible\'" *ngIf="search">\n            <span class="p-inputgroup-addon"><i class="pi pi-search"></i></span>\n            <tk-search-bar (searchClick)="onSearchClick($event.event, $event.val)"></tk-search-bar>\n            <span class="p-inputgroup-addon">\n              <button\n                pButton\n                pRipple\n                type="button"\n                icon="pi pi-times"\n                class="p-button-rounded p-button-text p-button-plain"\n                (click)="onSearchClick($event, false)"\n              ></button>\n            </span>\n          </div>\n        </li>\n        <li *ngIf="disableBreadcrumbs" class="layout-topbar-item">\n          <a\n            class="layout-topbar-action rounded-circle"\n            href="#"\n            title="Hilfe für diesen Artikel anzeigen"\n            (click)="onOpenHelpPage($event)"\n          >\n            <i class="pi pi-question-circle fs-large"></i>\n          </a>\n        </li>\n        <li *ngIf="disableBreadcrumbs" class="layout-topbar-item">\n          <a\n            class="layout-topbar-action rounded-circle"\n            href="#"\n            title="Hilfe für diesen Artikel vervalten"\n            (click)="onOpenHelpPageEditor($event)"\n          >\n            <i class="pi pi-pencil fs-large"></i>\n          </a>\n        </li>\n        <li class="layout-topbar-item notifications">\n          <a class="layout-topbar-action rounded-circle" (click)="onTopbarItemClick($event, \'notifications\')" pRipple>\n            <i class="pi pi-bell fs-large"></i>\n          </a>\n\n          <ul\n            class="layout-topbar-action-panel p-shadow-6"\n            [@topbarActionPanelAnimation]="\'visible\'"\n            *ngIf="activeTopbarItem === \'notifications\'"\n          >\n            <li class="p-mb-3">\n              <span class="p-px-3 fs-small">Not implemented.</span>\n            </li>\n            <li class="layout-topbar-action-item">\n              <div class="p-d-flex p-flex-row p-ai-center">\n                <p class="avatar-monogram">MM</p>\n                <div class="p-d-flex p-flex-column p-ml-3" style="flex-grow: 1;">\n                  <div class="p-d-flex p-ai-center p-jc-between p-mb-1">\n                    <span class="fs-small p-text-bold">John Doe</span>\n                    <small>42 mins ago</small>\n                  </div>\n                  <span class="fs-small">Notification example.</span>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </li>\n        <li class="layout-topbar-item">\n          <a\n            class="layout-topbar-action p-d-flex p-dir-row p-jc-center p-ai-center p-px-2 rounded-circle"\n            pRipple\n            (click)="onTopbarItemClick($event, \'profile\')"\n          >\n            <img\n              [src]="(userAvatar | async)?.avatarSmallImageUrl || defaultAvatarUrl"\n              alt="avatar"\n              class="profile-image"\n            />\n          </a>\n\n          <ul\n            class="layout-topbar-action-panel p-shadow-6"\n            [@topbarActionPanelAnimation]="\'visible\'"\n            *ngIf="activeTopbarItem === \'profile\'"\n          >\n            <li class="layout-topbar-action-item" *tkIfPerm="\'PROFILE#VIEW\'">\n              <a\n                class="p-d-flex p-flex-row p-ai-center"\n                pRipple\n                href="#"\n                (click)="navigateTo(\'/account/profile\', $event)"\n                title="Manage your personal information and avatar"\n              >\n                <i class="p-mr-2 pi pi-user"></i>\n                <span>My Personal Info</span>\n              </a>\n            </li>\n\n            <li class="layout-topbar-action-item">\n              <a\n                class="p-d-flex p-flex-row p-ai-center"\n                pRipple\n                href="#"\n                (click)="navigateTo(\'/account/settings\', $event)"\n                title="Manage your preferences and settings"\n              >\n                <i class="p-mr-2 pi pi-cog"></i>\n                <span>My Settings</span>\n              </a>\n            </li>\n\n            <li class="layout-topbar-action-item">\n              <a\n                class="p-d-flex p-flex-row p-ai-center"\n                pRipple\n                href="#"\n                (click)="navigateTo(\'/account/change-password\', $event)"\n                title="Change your current password"\n              >\n                <i class="p-mr-2 pi pi-key"></i>\n                <span>Change Password</span>\n              </a>\n            </li>\n\n            <li class="layout-topbar-action-item">\n              <a\n                class="p-d-flex p-flex-row p-ai-center"\n                pRipple\n                href="#"\n                (click)="navigateTo(\'/account/roles-and-perms\', $event)"\n                title="Overview of your application roles and permissions"\n              >\n                <i class="p-mr-2 pi pi-unlock"></i>\n                <span>My Roles & Permissions</span>\n              </a>\n            </li>\n            <li class="layout-topbar-action-item">\n              <a class="p-d-flex p-flex-row p-ai-center" pRipple href="#" (click)="logout($event)">\n                <i class="p-mr-2 pi pi-power-off"></i>\n                <span>Logout</span>\n              </a>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n',animations:[B.trigger("topbarActionPanelAnimation",[B.transition(":enter",[B.style({opacity:0,transform:"scaleY(0.8)"}),B.animate(".12s cubic-bezier(0, 0, 0.2, 1)",B.style({opacity:1,transform:"*"}))]),B.transition(":leave",[B.animate(".1s linear",B.style({opacity:0}))])])],styles:[".avatar-monogram{margin:0;line-height:32px;background-color:#1e90ff;text-align:center;padding-top:1px;color:#fff}.avatar-monogram,.profile-image{width:32px;height:32px;border-radius:50%}.http-progress-loader{margin-left:8px;padding-top:5px}@media screen and (max-width:1024px){.http-progress-loader{margin-left:0;margin-right:8px}}"]}]}],Ae.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[G]}]},{type:X},{type:fe},{type:l.Router}]},Ae.propDecorators={searchInputViewChild:[{type:t.ViewChild,args:["searchInput"]}],menuButtonTitle:[{type:t.Input}],menuButtonClick:[{type:t.Output}],topbarItemClick:[{type:t.Output}],openHelpPage:[{type:t.Output}],openHelpPageEditor:[{type:t.Output}],openFeedback:[{type:t.Output}],openAddToLaunchpad:[{type:t.Output}],openSupportTicket:[{type:t.Output}],searchClick:[{type:t.Output}],profileMode:[{type:t.Input}],isHorizontal:[{type:t.Input}],activeTopbarItem:[{type:t.Input}],disableBreadcrumbs:[{type:t.Input}],fullPortalLayout:[{type:t.Input}],search:[{type:t.Input}],homeNavUrl:[{type:t.Input}],homeNavTitle:[{type:t.Input}]};var xe=function(){function e(){this.menuSource=new n.Subject,this.resetSource=new n.Subject,this.menuSource$=this.menuSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}return e.prototype.onMenuStateChange=function(e){this.menuSource.next(e)},e.prototype.reset=function(){this.resetSource.next()},e}();xe.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new xe},token:xe,providedIn:"root"}),xe.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}];var Me=function(){function e(){this.menuActiveChange=new t.EventEmitter,this.mobileMenuActiveChange=new t.EventEmitter}return Object.defineProperty(e.prototype,"portalMenu",{set:function(e){this.menuWithRoot={label:"Menu",icon:"list",items:e}},enumerable:!1,configurable:!0}),e}();Me.decorators=[{type:t.Component,args:[{selector:"tk-menu",template:'<ul class="layout-menu" id="nav" role="navigation">\n  <li\n    tk-submenu\n    [item]="menuWithRoot"\n    [index]="0"\n    root="true"\n    visible="true"\n    [(menuActive)]="menuActive"\n    [(mobileMenuActive)]="mobileMenuActive"\n    [isStatic]="isStatic"\n    [isSlim]="isSlim"\n    [isHorizontal]="isHorizontal"\n    [isMobile]="isMobile"\n    [isDesktop]="isDesktop"\n    [menuHoverActive]="menuHoverActive"\n  ></li>\n</ul>\n'}]}],Me.ctorParameters=function(){return[]},Me.propDecorators={menuActive:[{type:t.Input}],isStatic:[{type:t.Input}],isHorizontal:[{type:t.Input}],isMobile:[{type:t.Input}],isDesktop:[{type:t.Input}],isSlim:[{type:t.Input}],menuHoverActive:[{type:t.Input}],mobileMenuActive:[{type:t.Input}],portalMenu:[{type:t.Input}],menuActiveChange:[{type:t.Output}],mobileMenuActiveChange:[{type:t.Output}]};var Ee=function(){function e(e,n){this.menuService=e,this.router=n,this.menuActiveChange=new t.EventEmitter,this.mobileMenuActiveChange=new t.EventEmitter,this.active=!1}return e.prototype.ngOnInit=function(){var e=this;this.menuSourceSubscription=this.menuService.menuSource$.subscribe((function(t){e.active&&e.key!==t&&0!==t.indexOf(e.key)&&(e.active=!1)})),this.menuResetSubscription=this.menuService.resetSource$.subscribe((function(){e.active=!1})),this.router.events.pipe(s.filter((function(e){return e instanceof l.NavigationEnd}))).subscribe((function(t){e.isSlim?e.active=!1:e.item.routerLink?e.updateActiveStateFromRoute():e.active=!1})),(this.isHorizontal||this.isSlim)&&this.item.routerLink&&this.updateActiveStateFromRoute(),this.key=this.parentKey?this.parentKey+"-"+this.index:String(this.index)},e.prototype.ngOnDestroy=function(){this.menuSourceSubscription&&this.menuSourceSubscription.unsubscribe(),this.menuResetSubscription&&this.menuResetSubscription.unsubscribe()},e.prototype.updateActiveStateFromRoute=function(){this.active=this.router.isActive(this.item.routerLink[0],!this.item.items)},e.prototype.itemClick=function(e){if(this.item.disabled)return e.preventDefault(),!0;this.menuService.onMenuStateChange(this.key),this.item.command&&this.item.command({originalEvent:e,item:this.item}),this.item.items?this.active=!this.active:(this.active=!0,(this.isHorizontal||this.isSlim)&&(this.menuService.reset(),this.menuHoverActive=!1),this.isStatic||this.menuActiveChange.emit(!1),this.mobileMenuActiveChange.emit(!1)),(this.item.items||!this.item.url&&!this.item.routerLink)&&e.preventDefault()},e.prototype.onMouseEnter=function(){this.root&&this.menuHoverActive&&(this.isHorizontal||this.isSlim)&&this.isDesktop&&(this.menuService.onMenuStateChange(this.key),this.active=!0)},e}();Ee.decorators=[{type:t.Component,args:[{selector:"[tk-submenu]",template:'\n    <ng-container>\n        <div *ngIf="root">\n          <span class="layout-menuitem-text">{{item.label}}</span>\n        </div>\n        <a [attr.href]="item.url" (click)="itemClick($event)" *ngIf="!item.routerLink || item.items" (keydown.enter)="itemClick($event)"\n           [attr.target]="item.target" [attr.tabindex]="0" (mouseenter)="onMouseEnter()" pRipple>\n          <i [ngClass]="\'pi-\' + item.icon" class="layout-menuitem-icon pi pi-fw"></i>\n          <span class="layout-menuitem-text">{{item.label}}</span>\n          <span class="p-badge p-component p-badge-no-gutter" *ngIf="item.badge && !root">{{item.badge}}</span>\n          <i class="pi pi-fw pi-angle-down layout-submenu-toggler" *ngIf="item.items"></i>\n        </a>\n        <a (click)="itemClick($event)" *ngIf="item.routerLink && !item.items"\n           [routerLink]="item.routerLink" routerLinkActive="active-menuitem-routerlink" [routerLinkActiveOptions]="{exact: true}"\n           [attr.target]="item.target" [attr.tabindex]="0" (mouseenter)="onMouseEnter()" pRipple>\n          <i [ngClass]="\'pi-\' + item.icon" class="layout-menuitem-icon pi pi-fw"></i>\n          <span class="layout-menuitem-text">{{item.label}}</span>\n          <span class="p-badge p-component p-badge-no-gutter" *ngIf="item.badge && !root">{{item.badge}}</span>\n          <i class="pi pi-fw pi-angle-down layout-submenu-toggler" *ngIf="item.items"></i>\n        </a>\n        <ul *ngIf="(item.items && root) || (item.items && active)" [@children]="root ? \'visible\' : active ? \'visibleAnimated\' : \'hiddenAnimated\'">\n          <ng-template ngFor let-child let-i="index" [ngForOf]="item.items">\n            <li tk-submenu [item]="child" [index]="i" [parentKey]="key"></li>\n          </ng-template>\n        </ul>\n    </ng-container>\n  ',host:{"[class.layout-root-menuitem]":"root || active","[class.active-menuitem]":"(active)"},animations:[B.trigger("children",[B.state("void",B.style({height:"0px",padding:"0px"})),B.state("hiddenAnimated",B.style({height:"0px",padding:"0px"})),B.state("visibleAnimated",B.style({height:"*"})),B.state("visible",B.style({height:"*"})),B.state("hidden",B.style({height:"0px",padding:"0px"})),B.transition("visibleAnimated => hiddenAnimated",B.animate("400ms cubic-bezier(0.86, 0, 0.07, 1)")),B.transition("hiddenAnimated => visibleAnimated",B.animate("400ms cubic-bezier(0.86, 0, 0.07, 1)")),B.transition("void => visibleAnimated, visibleAnimated => void",B.animate("400ms cubic-bezier(0.86, 0, 0.07, 1)"))])]}]}],Ee.ctorParameters=function(){return[{type:xe},{type:l.Router}]},Ee.propDecorators={item:[{type:t.Input}],root:[{type:t.Input}],visible:[{type:t.Input}],index:[{type:t.Input}],parentKey:[{type:t.Input}],menuActive:[{type:t.Input}],isStatic:[{type:t.Input}],isHorizontal:[{type:t.Input}],isMobile:[{type:t.Input}],isDesktop:[{type:t.Input}],isSlim:[{type:t.Input}],menuHoverActive:[{type:t.Input}],mobileMenuActive:[{type:t.Input}],menuActiveChange:[{type:t.Output}],mobileMenuActiveChange:[{type:t.Output}]};var Oe=function(){function e(e){this.injectorObj=e,this.collapsed=!1,this.authService=this.injectorObj.get(G)}return e.prototype.ngOnInit=function(){},e.prototype.doSomething=function(){alert("Hey it worked!")},e.prototype.hasAccess=function(){return!this.permission||this.authService.hasPermission(this.permission)},e.prototype.collapse=function(){this.collapsible2.nativeElement.classList.add("hidden"),this.collapsed=!0},e.prototype.expand=function(){this.collapsible2.nativeElement.classList.remove("hidden"),this.collapsed=!1},e}();Oe.decorators=[{type:t.Component,args:[{selector:"tk-portal-page",template:'<div role="main">\n  <div class="p-col-12 content-wrapper">\n    \x3c!--criteria--\x3e\n    <div\n      class="card card-w-title no-margin pt-0"\n      [ngClass]="{ collapsed: collapsed }"\n    >\n      <ng-container *ngIf="hasAccess(); else noAccess">\n        <tk-panel-header\n          [leftToolbar]="leftToolbar"\n          [rightToolbar]="pageToolbarRight"\n        ></tk-panel-header>\n        <div class="page-content">\n          <ng-content></ng-content>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n</div>\n\n<ng-template #pageToolbarRight>\n  <ng-container *ngTemplateOutlet="rightToolbar"></ng-container>\n  <tk-toolbar-item\n    *ngIf="collapsible2"\n    title="Ausblenden"\n    class="collapse-toggle"\n    icon="angle-up"\n    (click)="collapsed ? expand() : collapse()"\n  ></tk-toolbar-item>\n</ng-template>\n\n<ng-template #noAccess>\n  <h3>Unauthorized</h3>\n  <p>\n    Sorry, you do not have the permission required to view this page.\n    <span\n      pTooltip="Missing permission key: \'{{ permission }}\'\'"\n      tooltipEvent="hover"\n      hideDelay="500"\n      >More info</span\n    >\n  </p>\n</ng-template>\n',styles:["::ng-deep .collapsed .collapse-toggle i{transform:rotate(180deg)}:host ::ng-deep child.collapsible{transition:all .4s ease;background-color:initial;transform:scale(1);max-height:1000px;height:auto}:host ::ng-deep child.collapsible.hidden{max-height:0;opacity:0;background-color:#cecece;transform:scale3d(.5,.5,.5);margin:0}@media only screen and (max-width:430px){.card.card-w-title.no-margin.pt-0{padding-left:.25em;padding-right:.25em}}"]}]}],Oe.ctorParameters=function(){return[{type:t.Injector}]},Oe.propDecorators={header:[{type:t.Input}],permission:[{type:t.Input}],helpArticleId:[{type:t.Input}],leftToolbar:[{type:t.Input}],rightToolbar:[{type:t.Input}],collapsible2:[{type:t.ContentChild,args:[ye,{read:t.ElementRef}]}]};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Le=function(e,t){return(Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function De(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Le(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function Ne(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function He(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ne(arguments[t]));return e}Object.create;var Ue=function(){function e(e){this.httpClient=e,this.baseUrl="./portal-api/v1/searchTemplates",this.httpOptions={headers:new r.HttpHeaders({"Content-Type":"application/json",Accept:"application/json"})}}return e.prototype.getSearchTemplatesLegacy=function(e,t,n,i){return void 0===i&&(i=!0),this.httpClient.post(this.baseUrl+"/search/criteria",{application:t,page:n,user:e,includeGlobal:i},this.httpOptions)},e.prototype.getTemplateById=function(e){return this.httpClient.get(this.baseUrl+"/"+e,this.httpOptions)},e.prototype.createNewTemplate=function(e){return this.httpClient.post(""+this.baseUrl,e,this.httpOptions)},e.prototype.updateTemplate=function(e,t){return this.httpClient.put(this.baseUrl+"/"+e,t,this.httpOptions)},e.prototype.deleteTemplate=function(e){return this.httpClient.delete(this.baseUrl+"/"+e)},e}();Ue.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new Ue(t.ɵɵinject(r.HttpClient))},token:Ue,providedIn:"root"}),Ue.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],Ue.ctorParameters=function(){return[{type:r.HttpClient}]};var Re="./ahm-api/internal/applications",je=function(){function e(e){this.httpClient=e,this.httpOptions={headers:new r.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.getHelpDataItem=function(e,t,n){return void 0===n&&(n="PAGE"),this.httpClient.get(Re+"/"+e+"/helpItems",{params:{helpItemId:t}}).pipe(s.map((function(e){return e[0]})))},e.prototype.getHelpDataItemLegacy=function(e,t,n){return void 0===n&&(n="PAGE"),console.log("About to go to "+Re+"/helpdata/"+e+"/"+encodeURIComponent(t)),this.httpClient.post(Re+"/helpdata/"+e+"/"+encodeURIComponent(t),'"'+n+'"',{headers:{"Content-Type":"application/v1+json",Accept:"application/v1+json"}})},e.prototype.saveHelpPage=function(e,t){return t.id?this.httpClient.patch(Re+"/"+e+"/helpItems/"+t.id,t,{observe:"response"}):this.httpClient.post(Re+"/"+e+"/helpItems",t,{observe:"response"})},e.prototype.saveHelpPageLegacy=function(e){return this.httpClient.post(Re+"/helpdata",e,{headers:{"Content-Type":"application/v1+json",Accept:"application/v1+json"},observe:"response"})},e}();function Fe(e){return"helpArticleId"in e}je.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new je(t.ɵɵinject(r.HttpClient))},token:je,providedIn:"root"}),je.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],je.ctorParameters=function(){return[{type:r.HttpClient}]};var _e=function(){function e(e){this.configservice=e,this.themeServerUrl=this.configservice.getProperty("TKIT_PORTAL_THEME_SERVER_URL")||"http://portal-theme-management:8080"}return e.prototype.getThemeHref=function(e){return this.themeServerUrl+"/themes/"+e+"/"+e+".min.css"},e}();_e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new _e(t.ɵɵinject(X))},token:_e,providedIn:"root"}),_e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],_e.ctorParameters=function(){return[{type:X}]};var Be=function(){function e(e,t){this.http=e,this.messageService=t,this.menuUrl="./portal-api/legacy/menustructure",this.httpOptions={headers:new r.HttpHeaders({"Content-Type":"application/json"})}}return e.prototype.getMenuItems=function(e){return this.http.get(this.menuUrl+"/"+e,a.withCache()).pipe(s.catchError(this.handleError("getMenuItems",[])))},e.prototype.handleError=function(e,t){var i=this;return void 0===e&&(e="operation"),function(o){return console.error(o),i.log(e+" failed: "+o.message+", will return "+JSON.stringify(t)),n.of(t)}},e.prototype.log=function(e){console.log(e)},e}();Be.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new Be(t.ɵɵinject(r.HttpClient),t.ɵɵinject($.MessageService))},token:Be,providedIn:"root"}),Be.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],Be.ctorParameters=function(){return[{type:r.HttpClient},{type:$.MessageService}]};var qe=function(){function e(e){this.http=e,this.url="./portal-api/v1/feedback/send"}return e.prototype.sendFeedback=function(e){return this.http.post(this.url,e)},e}();qe.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new qe(t.ɵɵinject(r.HttpClient))},token:qe,providedIn:"root"}),qe.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],qe.ctorParameters=function(){return[{type:r.HttpClient}]};var $e,ze=function(){function e(e){this.http=e,this.baseUrl="./portal-api/v1/supportTicket/send"}return e.prototype.createSupportTicket=function(e,t){var n={processId:e.title,processStep:e.description,source:t,sourceDeepLink:window.location.href};return this.http.post(this.baseUrl,n)},e}();ze.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new ze(t.ɵɵinject(r.HttpClient))},token:ze,providedIn:"root"}),ze.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],ze.ctorParameters=function(){return[{type:r.HttpClient}]},function(e){e[e.STATIC=0]="STATIC",e[e.OVERLAY=1]="OVERLAY",e[e.SLIM=2]="SLIM",e[e.HORIZONTAL=3]="HORIZONTAL"}($e||($e={}));var Ke=function(){function e(e,t,n,i,o,r,a,s,l,p,c,u,d,m,h,f,g){this.renderer2=e,this.zone=t,this.router=n,this.route=i,this.helpDataService=o,this.messageService=r,this.dialogService=a,this.breakpointObserver=s,this.translate=l,this.themeService=p,this.menuService=c,this.menuApiService=u,this.configService=d,this.feedbackApiService=m,this.supportTicketApiService=h,this.primeNgConfig=f,this.auth=g,this.showProfileInSidebar=!0,this.enableBreadcrumbs=!1,this.fullPortalLayout=!0,this.helpPageEditorDisplayed=!1,this.addToFavouritesDisplayed=!1,this.supportTicketDisplayed=!1,this.feedbackData={comment:"",rating:0,anonymous:!1},this.feedbackVisible=!1,this.feedbackSubmitDisabled=!1,this.portalName="PORTAL",this.layoutMode=$e.STATIC,this.darkMenu=!1,this.profileMode="top",this.searchClick=!1,this.search=!1,this.preloader=!0,this.portalHomeMenuItem={url:"/",label:"Home"}}return Object.defineProperty(e.prototype,"menuButtonTitle",{get:function(){return this.isDesktop()&&this.menuActive||this.isMobile()&&this.mobileMenuActive?this.hideMenuButtonTitle:this.showMenuButtonTitle},enumerable:!1,configurable:!0}),e.prototype.applyPadding=function(){this.isBodyCompact?this.addClass(document.body,"compact"):this.removeClass(document.body,"compact")},e.prototype.setSidebarColorTheme=function(){"DARK"===this.sideBarColorTheme?this.darkMenu=!0:"LIGHT"===this.sideBarColorTheme&&(this.darkMenu=!1)},e.prototype.ngOnInit=function(){var e,t=this;this.primeNgConfig.ripple=!0,this.initError=this.configService.error,this.initError?this.preloader=!1:(this.mainPortal=this.configService.getPortalData(),this.auth.currentUser().accountSettings.layoutAndThemeSettings&&(this.isBodyCompact=null!==(e=this.auth.currentUser().accountSettings.layoutAndThemeSettings.compactView)&&void 0!==e&&e,this.applyPadding(),this.auth.currentUser().accountSettings.layoutAndThemeSettings.sidebarViewMode?this.layoutMode=$e[this.auth.currentUser().accountSettings.layoutAndThemeSettings.sidebarViewMode]:this.layoutMode=$e.STATIC),this.menuActive=this.isStatic()&&!this.isMobile()&&this.fullPortalLayout,this.validateRequiredInputs(),this.setSidebarColorTheme(),this.setCustomTheme(),this.fullPortalLayout&&this.loadMenuItems(),this.router.events.subscribe((function(e){if(l.NavigationStart,l.ActivationEnd,e instanceof l.NavigationEnd&&t.fullPortalLayout&&t.currentComponent){var n=void 0;Fe(t.currentComponent)?n=t.currentComponent.helpArticleId:(n=e.url||t.currentComponent.constructor.name,console.log("Page does not have helpItemId, using router path "+n)),t.helpArticleId=n,t.helpDataItem={helpItemId:n,appId:t.appName,baseUrl:"https://1000kit.atlassian.net/wiki/spaces/1000KIT/overview",resourceUrl:""},t.loadHelpArticle()}e instanceof l.NavigationError&&t.messageService.add({severity:"error",summary:"Navigation error",detail:"Route "+e.url+" not recognized"}),t.setSidebarColorTheme()})),this.translate.get(["GENERAL.SHOW_MENU","GENERAL.HIDE_MENU"]).subscribe((function(e){t.hideMenuButtonTitle=e["GENERAL.HIDE_MENU"],t.showMenuButtonTitle=e["GENERAL.SHOW_MENU"]})))},e.prototype.ngAfterViewInit=function(){var e=this;this.documentClickListener=this.renderer2.listen("body","click",(function(){e.topbarItemClick||(e.activeTopbarItem=null),e.menuClick||!e.isHorizontal()&&!e.isSlim()||e.menuService.reset(),e.menuClick||(e.mobileMenuActive&&(e.mobileMenuActive=!1),e.isOverlay()&&(e.menuActive=!1),e.menuHoverActive=!1,e.unblockBodyScroll()),e.searchClick||(e.search=!1),e.inlineMenuActive&&!e.inlineMenuClick&&(e.inlineMenuActive=!1),e.inlineMenuClick=!1,e.searchClick=!1,e.topbarItemClick=!1,e.menuClick=!1}))},e.prototype.loadMenuItems=function(){var e=this,t=this.configService.getProperty("TKIT_PORTAL_ID"),n="true"===this.configService.getProperty("TKIT_PORTAL_DISABLE_MENU_PERMISSIONS");this.configService.lang$.subscribe((function(t){return e.lang=t})).unsubscribe(),t?this.fullPortalLayout&&this.menuApiService.getMenuItems(t).subscribe((function(t){var i=[],o=t.find((function(e){return"PORTAL_MAIN_MENU"===e.key}));e.portalHomeMenuItem=e.toPrimeNGMenuItem(t.find((function(e){return"PORTAL_MENU_HOME"===e.key}))),e.portalHomeMenuItem||(e.portalHomeMenuItem={url:"/",label:"Home"}),o&&(i=o.children.filter((function(t){return(!n||e.auth.hasPermission(t.permissionObject+"#VIEW"))&&!t.disabled})).sort((function(e,t){return e.position-t.position})).map((function(t){return e.toPrimeNGMenuItem(t)}))),e.portalMenuItems=He(i)})):this.portalMenuItems=[{label:"Failed to load menu",icon:"dashboard",routerLink:["/"]}]},e.prototype.toPrimeNGMenuItem=function(e,t){var n=this;if(void 0===t&&(t=1),e){var i=e.url&&null!==e.url.match(/^(http|https)/g),o=document.getElementsByTagName("base")[0].href,r=void 0,a=e.i18n[this.lang]||e.name;if(this.appName===e.applicationId)if(i&&e.url.includes(o))r=[e.url.substr(o.length-1)],i=!1;else{var s=o.substring(window.location.origin.length);s.length>=1&&e.url.startsWith(s)&&(r=[e.url.substr(s.length-1)],i=!1)}var l=1===t?"menu":"subject";return""!==e.badge&&e.badge&&(l=e.badge),{label:a,icon:l,command:function(t){t.originalEvent.preventDefault(),0===e.children.length&&(e.portalExit?window.open(e.url,"_blank"):r?n.router.navigate(r):window.location.assign(e.url))},url:e.url,routerLinkActiveOptions:[{exact:!1}],items:e.children.length>0?e.children.filter((function(e){return!e.disabled})).sort((function(e,t){return e.position-t.position})).map((function(e){return n.toPrimeNGMenuItem(e,t+1)})):void 0}}},e.prototype.validateRequiredInputs=function(){if(!this.appName)throw new Error("You must specify [appName] attribute on <tk-portal-viewport> component.")},e.prototype.loadHelpArticle=function(){var e=this;this.helpDataService.getHelpDataItem(this.appName,this.helpArticleId).subscribe((function(t){t&&(e.helpDataItem=t)}),(function(e){return console.log("Failed to load help article")}))},e.prototype.onHelpArticleEditorClosed=function(e){var t=this;e?this.helpDataService.saveHelpPage(this.appName,this.helpDataItem).subscribe((function(e){console.log("Help item saved: "+e.status),t.helpPageEditorDisplayed=!1,t.messageService.add({severity:"info",summary:"Help Item definition updated"}),t.loadHelpArticle()}),(function(e){console.log("Could not save help item"),t.messageService.add({severity:"error",summary:"Help Item definition update failed",detail:"Server error: "+e.status})})):this.helpPageEditorDisplayed=!1},e.prototype.onAddToLaunchpadClosed=function(e){this.addToFavouritesDisplayed=!1},e.prototype.openHelpPage=function(e){if(this.helpDataItem.id){var t=this.helpDataItem.baseUrl?this.helpDataItem.baseUrl+"/"+this.helpDataItem.resourceUrl:this.helpDataItem.resourceUrl;console.log("navigate to help page: "+t),window.open(t,"_blank").focus()}else this.dialogService.open(Pe,{header:"No help item defined for this page",width:"400px",data:{pageItem:this.helpArticleId}});e.preventDefault()},e.prototype.openHelpPageEditor=function(e){this.helpPageEditorDisplayed=!0,e.preventDefault()},e.prototype.openFeedback=function(e){this.breakpointObserver.isMatched("(max-width: 1024px)")?this.feedbackVisible=!0:this.feedbackPanel.toggle(e),e.preventDefault()},e.prototype.openAddToLaunchpad=function(e){this.addToFavouritesDisplayed=!0,e.preventDefault()},e.prototype.openSupportTicket=function(e){this.supportTicketDisplayed=!0,e.preventDefault()},e.prototype.onSubmitFeedback=function(e){var t=this;this.feedbackSubmitDisabled=!0;var n={rating:e.rating,comment:e.comment,appId:this.appName,userId:e.anonymous?"anonymous":this.auth.currentUser().userId};this.feedbackApiService.sendFeedback(n).subscribe((function(){t.closeFeedback(),t.messageService.add({severity:"success",summary:"Feedback successfully sent"})}),(function(){t.closeFeedback(),t.messageService.add({severity:"error",summary:"Sending feedback failed",detail:"Please try again later"})}))},e.prototype.closeFeedback=function(){this.feedbackSubmitDisabled=!1,this.feedbackVisible=!1,this.feedbackPanel.hide()},e.prototype.onSubmitTicket=function(e){var t=this;this.supportTicketApiService.createSupportTicket(e,this.appName).subscribe((function(){t.messageService.add({severity:"success",summary:"Success!",detail:"Ticket successfully submitted"})}),(function(){return t.messageService.add({severity:"error",summary:"Error!",detail:"Error occured while submitting a ticket"})}))},e.prototype.clearFeedback=function(){this.feedbackData={comment:"",rating:0,anonymous:!1}},e.prototype.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},e.prototype.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},e.prototype.onMenuButtonClick=function(e){this.menuActive=!this.menuActive,this.menuClick=!0,this.isDesktop()||(this.mobileMenuActive=!this.mobileMenuActive,this.mobileMenuActive?this.blockBodyScroll():this.unblockBodyScroll()),e.preventDefault()},e.prototype.onMenuClick=function(e){this.menuClick=!0,this.inlineMenuActive&&!this.inlineMenuClick&&(this.inlineMenuActive=!1)},e.prototype.onInlineMenuClick=function(e){this.inlineMenuActive=!this.inlineMenuActive,this.inlineMenuClick=!0},e.prototype.onTopbarMobileButtonClick=function(e){this.mobileTopbarActive=!this.mobileTopbarActive,e.preventDefault()},e.prototype.onTopbarItemClick=function(e,t){this.topbarItemClick=!0,this.activeTopbarItem===t?this.activeTopbarItem=null:this.activeTopbarItem=t,"search"===t&&(this.search=!this.search,this.searchClick=!this.searchClick),e.preventDefault()},e.prototype.onSearchClick=function(e,t){this.searchClick=t,this.search=t,e.preventDefault()},e.prototype.isDesktop=function(){return window.innerWidth>991},e.prototype.isMobile=function(){return window.innerWidth<=991},e.prototype.isStatic=function(){return this.layoutMode===$e.STATIC},e.prototype.isOverlay=function(){return this.layoutMode===$e.OVERLAY},e.prototype.isHorizontal=function(){return this.layoutMode===$e.HORIZONTAL},e.prototype.isSlim=function(){return this.layoutMode===$e.SLIM},e.prototype.changeToStaticMenu=function(){this.layoutMode=$e.STATIC},e.prototype.changeToOverlayMenu=function(){this.layoutMode=$e.OVERLAY},e.prototype.changeToHorizontalMenu=function(){this.layoutMode=$e.HORIZONTAL},e.prototype.changeToSlimMenu=function(){this.layoutMode=$e.SLIM},e.prototype.blockBodyScroll=function(){document.body.classList?document.body.classList.add("blocked-scroll"):document.body.className+=" blocked-scroll"},e.prototype.unblockBodyScroll=function(){document.body.classList?document.body.classList.remove("blocked-scroll"):document.body.className=document.body.className.replace(new RegExp("(^|\\b)"+"blocked-scroll".split(" ").join("|")+"(\\b|$)","gi")," ")},e.prototype.setCustomTheme=function(){var e=this;if("true"===this.configService.getProperty(te))return console.log("Portal theme mgmt is disabled. To enable it, remove env var: TKIT_PORTAL_DISABLE_THEME_MANAGEMENT"),void(this.preloader=!1);console.log("Setting theme dynamically");var t=this.configService.getPortalData()&&this.configService.getPortalData().themeName;if(!t){var n=this.configService.getProperty("TKIT_PORTAL_DEFAULT_THEME");n?(console.log("Custom theme not defined, or portal data not available, setting theme from 'TKIT_PORTAL_DEFAULT_THEME' var: "+n+" "),t=n):(console.log("Custom theme not defined, or portal data not available, setting default theme CG"),t="cg")}document.getElementById("theme-css")&&document.getElementById("theme-css").remove();var i=document.createElement("link");i.setAttribute("id","theme-css"),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.onload=function(){console.log("theme load done"),e.preloader=!1},i.onerror=function(){console.log("Failed to load theme assets for '"+t+"'"),i.setAttribute("href","./portal-lib/assets/css/fallback-theme/fallback.css"),e.preloader=!1},i.setAttribute("href",this.themeService.getThemeHref(t)),document.getElementsByTagName("head")[0].appendChild(i)},e}();Ke.decorators=[{type:t.Component,args:[{selector:"tk-portal-viewport",template:'<div class="loading-block" *ngIf="preloader">\n  <div\n    class="p-d-flex p-mb-3 p-p-1"\n    style="position: fixed;\n    z-index: 100;\n    width: 100%;\n    background-color: #fff;\n    height: 75px;\n    box-shadow: 0 2px 5px 0 rgb(0 0 0 / 26%);\n    -webkit-box-shadow: 0 2px 5px 0 rgb(0 0 0 / 26%);"\n  >\n    <p-skeleton width="8rem" height="60px" styleClass="p-mr-2"></p-skeleton>\n    <div style="flex: 1; height: 100%;">\n      <p-skeleton width="100%" height="60px"></p-skeleton>\n    </div>\n  </div>\n  <div\n    style="overflow: auto;\n    position: fixed;\n    margin-left: 0px;\n    width: 250px;\n    z-index: 99;\n    top: 75px;\n    height: 100%;\n    background-color: #fff;\n    box-shadow: 3px 0 6px rgb(0 0 0 / 30%);\n    -webkit-box-shadow: 3px 0 6px rgb(0 0 0 / 30%);\n    -moz-box-shadow: 3px 0 6px rgba(0,0,0,.3);\n    padding: 1rem"\n  >\n    <div class="custom-skeleton p-p-3 p-mt-4">\n      <div class="p-mb-3 p-ml-5">\n        <p-skeleton shape="circle" size="3rem" styleClass="p-mr-2"></p-skeleton>\n      </div>\n      <p-skeleton width="80%" height="1rem" styleClass="p-mb-1 p-ml-2"></p-skeleton>\n    </div>\n    <div class="p-mt-4">\n      <p-skeleton *ngFor="let number of [0,1,2,3,4,5]" width="100%" height="1.5rem" styleClass="p-mb-2"></p-skeleton>\n    </div>\n  </div>\n</div>\n<div class="exception-body error-page" *ngIf="initError">\n  <div class="exception-type">\n    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" stroke="currentColor">\n      <path\n        stroke-linecap="round"\n        stroke-linejoin="round"\n        stroke-width="2"\n        d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"\n      />\n    </svg>\n  </div>\n\n  <div class="card exception-panel">\n    <i class="pi pi-exclamation-circle"></i>\n    <h1>Exception Occured</h1>\n    <div class="exception-detail">Please contact system administrator</div>\n\n    <p-button label="Homepage" [routerLink]="[\'/\']" class="p-button-help"></p-button>\n  </div>\n</div>\n\n<div\n  [hidden]="preloader || initError"\n  class="layout-wrapper"\n  [ngClass]="{ \'layout-menu-static\': isStatic(),\n        \'layout-menu-overlay\': isOverlay(),\n        \'layout-menu-horizontal\': isHorizontal(),\n        \'layout-menu-slim\': isSlim(),\n        \'layout-menu-active\': menuActive,\n        \'layout-menu-mobile-active\': mobileMenuActive,\n        \'layout-topbar-mobile-active\': mobileTopbarActive\n   }"\n>\n    <tk-header\n      [menuButtonTitle]="menuButtonTitle"\n      [activeTopbarItem]="activeTopbarItem"\n      [isHorizontal]="isHorizontal()"\n      [profileMode]="profileMode"\n      [disableBreadcrumbs]="!enableBreadcrumbs"\n      [homeNavTitle]="portalHomeMenuItem.label"\n      [homeNavUrl]="portalHomeMenuItem.url"\n      [fullPortalLayout]="fullPortalLayout"\n      [search]="search"\n      (searchClick)="onSearchClick($event.event, $event.val)"\n      (menuButtonClick)="onMenuButtonClick($event)"\n      (topbarItemClick)="onTopbarItemClick($event.event, $event.arg)"\n      (openHelpPageEditor)="openHelpPageEditor($event)"\n      (openHelpPage)="openHelpPage($event)"\n      (openFeedback)="openFeedback($event)"\n      (openSupportTicket)="openSupportTicket($event)"\n      (openAddToLaunchpad)="openAddToLaunchpad($event)"\n    ></tk-header>\n\n    <p-overlayPanel #feedbackPanel (onHide)="clearFeedback()">\n      <ng-template pTemplate>\n        <tk-feedback\n          [(feedbackData)]="feedbackData"\n          [submitDisabled]="feedbackSubmitDisabled"\n          (feedbackSubmit)="onSubmitFeedback($event)"\n        >\n        </tk-feedback>\n      </ng-template>\n    </p-overlayPanel>\n\n    <p-dialog header="Leave Feedback" [(visible)]="feedbackVisible" (onHide)="clearFeedback()">\n      <tk-feedback\n        [(feedbackData)]="feedbackData"\n        [submitDisabled]="feedbackSubmitDisabled"\n        (feedbackSubmit)="onSubmitFeedback($event)"\n      >\n      </tk-feedback>\n    </p-dialog>\n\n    <p-toast></p-toast>\n\n    <div class="menu-wrapper" (click)="onMenuClick($event)">\n      <div\n        *ngIf="fullPortalLayout"\n        class="layout-menu-container"\n      >\n        <tk-inline-profile\n          *ngIf="showProfileInSidebar && !isHorizontal()"\n          [inlineMenuActive]="inlineMenuActive"\n          (inlineMenuClick)="onInlineMenuClick($event)"\n        ></tk-inline-profile>\n\n        <tk-menu\n          [(menuActive)]="menuActive"\n          [(mobileMenuActive)]="mobileMenuActive"\n          [isStatic]="isStatic()"\n          [isSlim]="isSlim()"\n          [isHorizontal]="isHorizontal()"\n          [isMobile]="isMobile()"\n          [isDesktop]="isDesktop()"\n          [menuHoverActive]="menuHoverActive"\n          [portalMenu]="portalMenuItems"\n        ></tk-menu>\n      </div>\n    </div>\n\n    <div class="layout-main">\n      <tk-breadcrumb\n        *ngIf="enableBreadcrumbs"\n        [fullPortalLayout]="fullPortalLayout"\n        [disableBreadcrumbs]="!enableBreadcrumbs"\n        (openHelpPageEditor)="openHelpPageEditor($event)"\n        (openHelpPage)="openHelpPage($event)"\n      ></tk-breadcrumb>\n\n      <div class="layout-content">\n        <router-outlet (activate)="currentComponent = $event"></router-outlet>\n        <tk-footer [homePortal]="mainPortal"></tk-footer>\n      </div>\n    </div>\n\n    <div class="layout-mask modal-in"></div>\n</div>\n\n<tk-help-editor\n  *ngIf="helpDataItem"\n  [display]="helpPageEditorDisplayed"\n  [helpItem]="helpDataItem"\n  (closed)="onHelpArticleEditorClosed($event)"\n></tk-help-editor>\n\n<tk-add-to-launchpad\n  *ngIf="addToFavouritesDisplayed"\n  [display]="addToFavouritesDisplayed"\n  (closed)="onAddToLaunchpadClosed($event)"\n  [appId]="appName"\n></tk-add-to-launchpad>\n\n<tk-support-ticket [(display)]="supportTicketDisplayed" (submitTicket)="onSubmitTicket($event)"></tk-support-ticket>\n',styles:["\n      .loading-block {\n      }\n    "]}]}],Ke.ctorParameters=function(){return[{type:t.Renderer2},{type:t.NgZone},{type:l.Router},{type:l.ActivatedRoute},{type:je},{type:$.MessageService},{type:b.DialogService},{type:z.BreakpointObserver},{type:c.TranslateService},{type:_e},{type:xe},{type:Be},{type:X},{type:qe},{type:ze},{type:$.PrimeNGConfig},{type:void 0,decorators:[{type:t.Inject,args:[G]}]}]},Ke.propDecorators={showProfileInSidebar:[{type:t.Input}],enableBreadcrumbs:[{type:t.Input}],fullPortalLayout:[{type:t.Input}],appName:[{type:t.Input}],portalName:[{type:t.Input}],layoutContainerViewChild:[{type:t.ViewChild,args:["layoutContainer"]}],layoutMenuScrollerViewChild:[{type:t.ViewChild,args:["scrollPanel"]}],feedbackPanel:[{type:t.ViewChild,args:["feedbackPanel"]}]};var Ve=function(){function e(){}return e.prototype.search=function(){var e=this;this.searchInProgress=!0;var t=this.doSearch();n.isObservable(t)?t.subscribe((function(t){e.results=t,e.searchInProgress=!1})):(this.results=t,this.searchInProgress=!1)},e.prototype.reset=function(){this.results=[],this.criteria=this.getDefaultCriteria()},e.prototype.ngOnInit=function(){this.reset()},e}();Ve.decorators=[{type:t.Injectable}];var Ge=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/,Je=function(e,t){if("string"==typeof t&&Ge.exec(t))return new Date(t);return t},We=function(e){function n(n,i,o,r,a,s){var l=e.call(this,n)||this;return l.messageService=i,l.searchTemplateApi=o,l.auth=r,l.viewPort=a,l.searchPage=s,l.searchCriteriaTemplatesEnabled=!0,l.enableSearchToolbar=!1,l.onSearch=new t.EventEmitter,l.newTemplateDefaultFlag=!1,l}return De(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.validatedInputs(),this.pageName&&this.fetchSearchTemplates()},n.prototype.onSearchTemplateSelection=function(e){var t=this;e.value?(this.activeSearchTemplateId=e.value,this.searchTemplateApi.getTemplateById(this.activeSearchTemplateId).subscribe((function(e){t.activeSearchTemplate=e,t.searchPage.criteria=JSON.parse(e.criteriaAsJson,Je)}))):(this.activeSearchTemplateId=null,this.activeSearchTemplate=null)},n.prototype.fetchSearchTemplates=function(){var e=this;this.searchTemplateApi.getSearchTemplatesLegacy(this.auth.currentUser().userId,this.viewPort.appName,this.pageName).subscribe((function(t){e.searchTemplateOptions=He([{value:null,label:"Pick saved template"}],t.map((function(e){return{label:e.name,value:e.id}})));var n=t.find((function(e){return e.defaultTemplate}));n&&e.onSearchTemplateSelection({value:n.id})}))},n.prototype.validatedInputs=function(){this.searchPage||console.error('<tk-search-page> can only be used in a component that extends "PortalSearchPage". See README.MD chapter #Generic Search Page'),this.pageName||console.warn("You did not specify [pageName] attribute for search page component. Without it, some features will not work.")},n.prototype.triggerSearch=function(){console.log("Click search"),this.onSearch.emit(1)},n.prototype.triggerCriteriaTemplateUpdate=function(){var e=this;console.log("update tempalte"),this.activeSearchTemplate.criteriaAsJson=JSON.stringify(this.searchPage.criteria),this.searchTemplateApi.updateTemplate(this.activeSearchTemplateId,this.activeSearchTemplate).subscribe((function(t){e.activeSearchTemplate=t,e.messageService.add({severity:"success",summary:"Search template updated"})}))},n.prototype.triggerCriteriaTemplateSave=function(e,t){var n=this;this.searchTemplateApi.createNewTemplate({application:this.viewPort.appName,page:this.pageName,user:this.auth.currentUser().userId,name:this.newTemplateName,defaultTemplate:this.newTemplateDefaultFlag,criteriaAsJson:JSON.stringify(this.searchPage.criteria)}).subscribe((function(e){n.activeSearchTemplate=e,n.searchTemplateOptions.push({label:e.name,value:e.id}),n.activeSearchTemplateId=e.id,t.hide(),n.newTemplateDefaultFlag=!1,n.newTemplateName=void 0,n.messageService.add({severity:"success",summary:"Search template saved"})}))},n.prototype.triggerCriteriaTemplateDelete=function(){var e=this;this.searchTemplateApi.deleteTemplate(this.activeSearchTemplateId).subscribe((function(t){e.messageService.add({severity:"info",summary:"Search template deleted"}),e.searchTemplateOptions.splice(e.searchTemplateOptions.findIndex((function(t){return t.value==e.activeSearchTemplateId})),1),e.activeSearchTemplateId=void 0,e.activeSearchTemplate=void 0}))},n}(Oe);We.decorators=[{type:t.Component,args:[{selector:"tk-portal-search-page",template:'<tk-portal-page\n  header="{{ header }}"\n  [leftToolbar]="pageToolbarLeft"\n  [rightToolbar]="pageToolbarRight"\n>\n  <div id="criteria-panel" tkCollapsible>\n    <ng-content select="[criteria]"></ng-content>\n  </div>\n\n  <div id="search-results">\n    <ng-content select="[results]"></ng-content>\n  </div>\n</tk-portal-page>\n\n<ng-template #pageToolbarLeft>\n  <tk-toolbar-item\n    *ngIf="enableSearchToolbar"\n    title="Suchen"\n    icon="search"\n    (click)="triggerSearch()"\n  ></tk-toolbar-item>\n  <ng-container *ngTemplateOutlet="leftToolbar"></ng-container>\n</ng-template>\n\n<ng-template #pageToolbarRight>\n  <ng-container *ngTemplateOutlet="rightToolbar"></ng-container>\n  <p-overlayPanel\n    #op\n    [dismissable]="true"\n    [showCloseIcon]="true"\n    appendTo="body"\n  >\n    <div class="p-fluid" [ngStyle]="{ width: \'400px\' }">\n      <h5>Save a new search template</h5>\n      <div class="p-field p-grid">\n        <label class="p-col-12 p-md-4" for="templateName">Template Name</label>\n        <div class="p-col-12 p-md-8">\n          <input\n            id="templateName"\n            pInputText\n            type="text"\n            [(ngModel)]="newTemplateName"\n          />\n        </div>\n      </div>\n      <div class="p-field p-grid">\n        <label class="p-col-12 p-md-4" for="defaultFlag">Set as default?</label>\n        \x3c!--      </div>--\x3e\n        <div class="p-col-12 p-md-8">\n          <p-inputSwitch\n            id="defaultFlag"\n            [(ngModel)]="newTemplateDefaultFlag"\n          ></p-inputSwitch>\n        </div>\n      </div>\n\n      <div class="p-grid">\n        <div class="p-col-6">\n          <button\n            type="button"\n            pButton\n            label="Cancel"\n            (click)="op.hide()"\n            class="p-button-secondary p-col-12"\n          ></button>\n        </div>\n        <div class="p-col-6">\n          <button\n            type="button"\n            pButton\n            label="Save"\n            class="p-col-12"\n            (click)="triggerCriteriaTemplateSave($event, op)"\n          ></button>\n        </div>\n      </div>\n    </div>\n  </p-overlayPanel>\n  <tk-toolbar-item\n    *ngIf="searchCriteriaTemplatesEnabled"\n    title="Neue Suchvorlage Erstellen"\n    icon="plus"\n    (click)="op.show($event)"\n  ></tk-toolbar-item>\n  <tk-toolbar-item\n    *ngIf="activeSearchTemplate"\n    title="Suchvorlage Speichern"\n    icon="save"\n    (click)="triggerCriteriaTemplateUpdate()"\n  ></tk-toolbar-item>\n  <tk-toolbar-item\n    *ngIf="activeSearchTemplate"\n    title="Suchvorlage Loeschen"\n    icon="trash"\n    (click)="triggerCriteriaTemplateDelete()"\n  ></tk-toolbar-item>\n  <div class="search-template-box" *ngIf="searchTemplateOptions">\n    <p-dropdown\n      [style]="{ width: \'150px\' }"\n      appendTo="body"\n      [ngModel]="activeSearchTemplateId"\n      [options]="searchTemplateOptions"\n      [filter]="true"\n      (onChange)="onSearchTemplateSelection($event)"\n    ></p-dropdown>\n  </div>\n\n  <tk-toolbar-item\n    *ngIf="collapsible2"\n    title="Ausblenden"\n    class="collapse-toggle"\n    icon="angle-up"\n    (click)="collapsed ? expand() : collapse()"\n  ></tk-toolbar-item>\n</ng-template>\n',styles:[".search-template-box{display:inline-block;padding-top:.2em}.search-template-box ::ng-deep .p-dropdown-label{padding:.5em}"]}]}],We.ctorParameters=function(){return[{type:t.Injector},{type:$.MessageService},{type:Ue},{type:void 0,decorators:[{type:t.Inject,args:[G]}]},{type:Ke},{type:Ve,decorators:[{type:t.SkipSelf},{type:t.Optional}]}]},We.propDecorators={searchCriteriaTemplatesEnabled:[{type:t.Input}],enableSearchToolbar:[{type:t.Input}],onSearch:[{type:t.Output}],pageName:[{type:t.Input}]};var Ye=function(){function e(e,t,n){this.templateRef=e,this.viewContainer=t,this.authService=n}return Object.defineProperty(e.prototype,"tkIfPerm",{set:function(e){this.permission=e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.authService.hasPermission(this.permission)?this.viewContainer.createEmbeddedView(this.templateRef):(console.log("Hide element because no perm "+this.permission),this.viewContainer.clear())},e}();Ye.decorators=[{type:t.Directive,args:[{selector:"[tkIfPerm]"}]}],Ye.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef},{type:void 0,decorators:[{type:t.Inject,args:[G]}]}]},Ye.propDecorators={loaderState:[{type:t.Input}],tkIfPerm:[{type:t.Input}]};var Ze=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();Ze.decorators=[{type:t.Component,args:[{selector:"tk-toolbar-item",template:'\n    <a\n      pRipple\n      *ngIf="link"\n      class="toolbar-item"\n      [href]="link"\n      [target]="linkTarget"\n      [rel]="linkRel"\n      title="{{ title }}"\n      role="button"\n      ><i class="pi pi-{{icon}}"></i>\n    </a>\n    <a\n      pRipple\n      *ngIf="!link"\n      href="javascript:void(0)"\n      class="toolbar-item"\n      title="{{ title }}"\n      role="button"\n      ><i class="pi pi-{{icon}}"></i>\n    </a>\n  ',styles:["\n      .toolbar-item {\n        color: #757575;\n        display: inline-block;\n        padding: 3px;\n        text-align: center;\n        font-size: 1.3em;\n        transition: all 0.4s;\n      }\n      .toolbar-item i {\n        transition: all 0.4s;\n        font-size: 1.5rem;\n        padding: 0.2em;\n      }\n      .toolbar-item:hover {\n        background-color: #e8e8e8;\n      }\n      .toolbar-item:focus {\n        background-color: #e8e8e8;\n      }\n\n    "]}]}],Ze.ctorParameters=function(){return[]},Ze.propDecorators={title:[{type:t.Input}],permission:[{type:t.Input}],link:[{type:t.Input}],linkTarget:[{type:t.Input}],linkRel:[{type:t.Input}],action:[{type:t.Input}],icon:[{type:t.Input}]};var Xe=function(){function e(e){this.loaderService=e,this.requests=[]}return e.prototype.removeRequest=function(e){var t=this.requests.indexOf(e);t>=0&&this.requests.splice(t,1),this.loaderService.isLoading.next(this.requests.length>0)},e.prototype.intercept=function(e,t){var n=this,i=Date.now();return this.requests.push(e),this.loaderService.isLoading.next(!0),t.handle(e).pipe(s.tap((function(t){if(t instanceof r.HttpResponse){var o=Date.now()-i;console.log("Request for "+e.urlWithParams+" took "+o+" ms with result "+t.status+". "+n.requests.length),n.removeRequest(e)}}),(function(t){console.log("Http err: status "+t.status+" "+JSON.stringify(t)),n.removeRequest(e)})))},e}();function Qe(e,t,n){var i=(new Date).getTime();return console.log("Start tkit portal module initializer"),function(){return e.init().then((function(){return console.log("Config initialized, next: init auth")})).then((function(){return n.init()})).then((function(o){var r,a;console.log("Auth service init resolved "+o+", next: set default lang");var s=(e.getProperty("SUPPORTED_LANGUAGES")||"en,de").split(",").map((function(e){return e.trim()})),l=(null===(a=null===(r=n.currentUser().accountSettings)||void 0===r?void 0:r.localeAndTimeSettings)||void 0===a?void 0:a.locale)||t.getBrowserLang();l=s.includes(l)?l:"de",t.use(l),e.setLang(l);var p=(new Date).getTime()-i;return console.log("Tkit portal module initializer finished in "+(p/1e3).toFixed(2)+"s"),!0})).catch((function(t){console.log("\n      #####################################\n      Tkit portal lib initialization failed\n      #####################################\n      "),e.error=t}))}}Xe.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new Xe(t.ɵɵinject(Ie))},token:Xe,providedIn:"root"}),Xe.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],Xe.ctorParameters=function(){return[{type:Ie}]};var et,tt=function(){function e(e){this.http=e,this.url="portal-api/v1/portalItems/search"}return e.prototype.searchForServices=function(e,t,n){var i=new r.HttpParams;return e&&(i=i.set("query",e)),t&&(i=i.set("portal-id",t)),n&&(i=i.set("count",n.toString())),this.http.get(this.url,{params:i})},e}();tt.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new tt(t.ɵɵinject(r.HttpClient))},token:tt,providedIn:"root"}),tt.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],tt.ctorParameters=function(){return[{type:r.HttpClient}]},function(e){e.APPLICATION="APPLICATION",e.OPEN_SEARCH="OPEN_SEARCH"}(et||(et={}));var nt=function(){function e(e,n,i,o){this.searchService=e,this.config=n,this.translateService=i,this.messageService=o,this.SearchItemType=et,this.searchClick=new t.EventEmitter}return Object.defineProperty(e.prototype,"openInSearchItem",{get:function(){return{type:et.OPEN_SEARCH,name:"Open in search view",url:""+this.searchUrl+this.query.value,queryString:this.query.value}},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.query=new p.FormControl("");var e=this.config.getProperty(ne)||"/ops/enterprise-search";this.searchUrl=e+"/search?query="},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){return e.searchInputViewChild.focusInput()}),0)},e.prototype.search=function(e){var t=this;this.searchService.searchForServices(e.query,null).subscribe((function(e){(e=e.slice(0,t.maxResults)).push(t.openInSearchItem),t.results=e}))},e.prototype.select=function(e){e.type===et.OPEN_SEARCH?this.query.setValue(e.queryString):this.query.setValue(e.name),window.open(e.url)},e.prototype.goToSearch=function(e){this.query.value?window.open(""+this.searchUrl+this.query.value):!1===e&&this.messageService.add({summary:this.translateService.instant("QUICK_SEARCH_FORM.WRONG_DATA"),severity:"error"})},e.prototype.onSearchClick=function(e,t){this.searchClick.emit({event:e,val:t})},e}();nt.decorators=[{type:t.Component,args:[{selector:"tk-search-bar",template:'<div class="search-bar">\n  <form [spellcheck]="false" (ngSubmit)="goToSearch(false)">\n    <p-autoComplete\n      #searchInput\n      [formControl]="query"\n      [suggestions]="results"\n      (completeMethod)="search($event)"\n      (onSelect)="select($event)"\n      (click)="onSearchClick($event, true)"\n      (keydown.escape)="onSearchClick($event, false)"\n      (keydown.enter)="goToSearch(true)"\n      [style]="{ width: \'100%\', height: \'4rem\' }"\n      placeholder="Search for apps"\n    >\n      <ng-template let-item pTemplate="item">\n        <ng-container [ngSwitch]="item.type">\n          <span\n            *ngSwitchCase="SearchItemType.APPLICATION"\n            class="item-badge item-app"\n            >APP</span\n          >\n        <span>{{ item.name }}</span>\n        </ng-container>\n      </ng-template>\n    </p-autoComplete>\n  </form>\n</div>\n',styles:[":host{flex:1 1 auto}.search-bar ::ng-deep .item-badge{font-size:10px;border-radius:.1rem;margin-right:1em;padding:.25em .5em;text-transform:uppercase;font-weight:700;letter-spacing:.3px}.search-bar ::ng-deep .item-badge.item-app{background-color:green;color:#fff}"]}]}],nt.ctorParameters=function(){return[{type:tt},{type:X},{type:c.TranslateService},{type:$.MessageService}]},nt.propDecorators={searchInputViewChild:[{type:t.ViewChild,args:["searchInput"]}],searchClick:[{type:t.Output}]};var it=function(){};it.decorators=[{type:t.Component,args:[{selector:"tk-result-text",template:"\n    <span *ngIf=\"resultsCount > 0 && state.totalRecords > 0; else noResults\">\n      {{ 'SEARCH.SHOWING' | translate }} {{ state.first + 1 }} -\n      {{\n        state.rows * (state.page + 1) < state.totalRecords\n          ? state.rows * (state.page + 1)\n          : state.totalRecords\n      }}\n      {{ 'SEARCH.OUT_OF_TOTAL' | translate }} {{ state.totalRecords }}\n    </span>\n    <ng-template #noResults>\n      {{ 'SEARCH.NO_RESULTS' | translate }}\n    </ng-template>\n  "}]}],it.ctorParameters=function(){return[]},it.propDecorators={resultsCount:[{type:t.Input}],state:[{type:t.Input}]};var ot=function(){function e(e){var n=this;this.fb=e,this.minLength=5,this.submitDisabled=!1,this.feedbackDataChange=new t.EventEmitter,this.feedbackSubmit=new t.EventEmitter,this.commentRequired=!1,this.requiredCommentValidator=function(e){var t=e.controls.rating.value,i=e.controls.comment.value;return t>0&&t<5?(n.commentRequired=!0,i.length>=n.minLength?null:{missingComment:!0}):(n.commentRequired=!1,null)}}return Object.defineProperty(e.prototype,"feedbackData",{set:function(e){this.form&&this.form.patchValue(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.form=this.fb.group({rating:[0,[p.Validators.required,p.Validators.min(1),p.Validators.max(5)]],comment:["",p.Validators.minLength(this.minLength)],anonymous:!1},{validators:this.requiredCommentValidator}),this.form.valueChanges.subscribe((function(t){e.feedbackDataChange.emit(t)}))},e.prototype.submitFeedback=function(){this.form.valid&&!this.submitDisabled&&(this.submitDisabled=!0,this.feedbackSubmit.emit(this.form.value))},e}();ot.decorators=[{type:t.Component,args:[{selector:"tk-feedback",template:'<form [formGroup]="form">\n  <div class="feedback">\n    <div>Rate app</div>\n    <div class="rating">\n      <p-rating [cancel]="false" formControlName="rating"></p-rating>\n    </div>\n    <div>Comments {{ commentRequired ? "(required)" : "(optional)" }}</div>\n    <div>\n      <textarea\n        class="fill"\n        pInputTextarea\n        rows="5"\n        placeholder="Min. {{ minLength }} characters"\n        formControlName="comment"\n      ></textarea>\n    </div>\n    <div class="anon">\n      <p-checkbox\n        name="anon"\n        value="Anonymous"\n        label="Anonymous"\n        formControlName="anonymous"\n      ></p-checkbox>\n    </div>\n    <div class="submit">\n      <button\n        pButton\n        [disabled]="form.invalid || submitDisabled"\n        label="Submit"\n        (click)="submitFeedback()"\n      ></button>\n    </div>\n  </div>\n</form>\n',styles:[".feedback .fill{width:15rem;background-color:#efefef}.feedback .rating{text-align:center}.feedback .anon{padding:.5rem 0}.feedback .submit{padding:.5em 0}.feedback .submit button{width:100%}"]}]}],ot.ctorParameters=function(){return[{type:p.FormBuilder}]},ot.propDecorators={submitDisabled:[{type:t.Input}],feedbackData:[{type:t.Input}],feedbackDataChange:[{type:t.Output}],feedbackSubmit:[{type:t.Output}]};var rt=function(){function e(e){this.fb=e,this.display=!1,this.displayChange=new t.EventEmitter,this.submitTicket=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.formGroup=this.fb.group({title:["",p.Validators.required],description:["",p.Validators.required]})},e.prototype.close=function(){this.displayChange.emit(!1)},e.prototype.submit=function(){this.submitTicket.emit(this.formGroup.value)},e}();rt.decorators=[{type:t.Component,args:[{selector:"tk-support-ticket",template:'<p-dialog\n  header="Create Support Ticket"\n  [contentStyle]="{ overflow: \'visible\' }"\n  [style]="{ width: \'500px\' }"\n  [(visible)]="display"\n  (onHide)="close()"\n>\n  <form [formGroup]="formGroup">\n    <div class="p-grid">\n      <div class="p-col-12">\n        <span class="p-float-label">\n          <input id="ticket-title" formControlName="title" pInputText />\n          <label for="ticket-title">Title</label>\n        </span>\n      </div>\n      <div class="p-col-12">\n        <span class="p-float-label">\n          <textarea\n            id="ticket-description"\n            formControlName="description"\n            pInputTextarea\n            rows="10"\n          >\n          </textarea>\n          <label for="ticket-description">Description</label>\n        </span>\n      </div>\n      <div class="p-col-12">\n        <button\n          pButton\n          label="Submit"\n          (click)="submit()"\n          [disabled]="formGroup.invalid"\n        ></button>\n      </div>\n    </div>\n  </form>\n</p-dialog>\n',styles:["input,textarea{width:100%;resize:none}"]}]}],rt.ctorParameters=function(){return[{type:p.FormBuilder}]},rt.propDecorators={display:[{type:t.Input}],displayChange:[{type:t.Output}],submitTicket:[{type:t.Output}]};var at=function(){function e(e){this.http=e}return e.prototype.getPrimeicons=function(){return this.http.get("./portal-lib/assets/primeicons.csv",{responseType:"text"}).pipe(s.map((function(e){return e.split("\n")})))},e}();at.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new at(t.ɵɵinject(r.HttpClient))},token:at,providedIn:"root"}),at.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],at.ctorParameters=function(){return[{type:r.HttpClient}]};var st=function(){function e(e){this.httpClient=e,this.url="./launchpad-api/launchpad"}return e.prototype.getLaunchpads=function(e){var t=new r.HttpParams;Object.keys(e).forEach((function(n){return t.set(n,e[n])}));var n={params:t};return this.httpClient.get(this.url,n)},e.prototype.addToLaunchpad=function(e,t){var n={headers:new r.HttpHeaders({"Content-Type":"application/json"})};return this.httpClient.post(this.url+"/"+e+"/tiles",t,n)},e}();st.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new st(t.ɵɵinject(r.HttpClient))},token:st,providedIn:"root"}),st.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],st.ctorParameters=function(){return[{type:r.HttpClient}]};var lt=function(){function e(e,n,i,o,r,a){this.iconsService=e,this.fb=n,this.launchpadService=i,this.auth=o,this.messageService=r,this.confService=a,this.closed=new t.EventEmitter,this.launchpads=[]}return e.prototype.ngOnInit=function(){var e=this;this.iconsService.getPrimeicons().subscribe((function(t){return e.icons=t.filter((function(e){return!!e}))}),(function(e){return console.log(e)})),this.launchpadForm=this.fb.group({icon:["",p.Validators.required],type:[{value:"FAVOURITE",disabled:!0}],name:["",p.Validators.required],appId:[{value:this.appId,disabled:!0}],appUrl:[{value:window.location.href.replace(window.location.origin,""),disabled:!0}],launchpad:["",p.Validators.required]});var t={portalId:this.confService.getProperty("TKIT_PORTAL_ID")};this.launchpadService.getLaunchpads(t).subscribe((function(t){return e.launchpads=t}),(function(e){return console.log(e)}))},e.prototype.addToLaunchpad=function(){var e=this,t={appId:this.launchpadForm.get("appId").value,appUrl:this.launchpadForm.get("appUrl").value,name:this.launchpadForm.get("name").value,type:this.launchpadForm.get("type").value,icon:this.launchpadForm.get("icon").value};this.launchpadService.addToLaunchpad(this.launchpadForm.get("launchpad").value.id,t).subscribe((function(){e.messageService.add({summary:"App added to favourites successfully",severity:"success"}),e.close()}),(function(){e.messageService.add({summary:"Failed to add app to favourites",severity:"error"})}))},e.prototype.filterIcons=function(e){var t=e.query.toLowerCase();this.filteredIcons=this.icons.filter((function(e){return e.toLowerCase().includes(t)}))},e.prototype.close=function(e){this.closed.emit(!1)},e}();lt.decorators=[{type:t.Component,args:[{selector:"tk-add-to-launchpad",template:'<p-dialog\n  header="Add to Favourites"\n  [contentStyle]="{ overflow: \'visible\' }"\n  [style]="{ width: \'700px\', \'max-height\': \'600px\' }"\n  [(visible)]="display"\n  (onHide)="close($event)"\n  [modal]="true"\n>\n  <form [formGroup]="launchpadForm" (ngSubmit)="addToLaunchpad()">\n    <div class="p-fluid modal-content">\n      <div class="p-field p-grid">\n        <label for="name" class="p-col-12 p-md-3">Tile Name: </label>\n        <div class="p-col-12 p-md-9">\n          <input formControlName="name" id="name" type="text" pInputText />\n        </div>\n      </div>\n      <div class="p-field p-grid">\n        <label for="appId" class="p-col-12 p-md-3">AppId: </label>\n        <div class="p-col-12 p-md-9">\n          <input formControlName="appId" id="appId" type="text" pInputText />\n        </div>\n      </div>\n      <div class="p-field p-grid">\n        <label for="appUrl" class="p-col-12 p-md-3">AppUrl: </label>\n        <div class="p-col-12 p-md-9">\n          <input formControlName="appUrl" id="appUrl" type="text" pInputText />\n        </div>\n      </div>\n      <div class="p-field p-grid">\n        <label for="launchpad" class="p-col-12 p-md-3">Launchpad: </label>\n        <div class="p-col-12 p-md-9">\n          <p-dropdown\n            inputId="launchpad"\n            [options]="launchpads"\n            formControlName="launchpad"\n            placeholder="{{ \'LAUNCHPAD.SELECT_LAUNCHPAD\' | translate }}"\n          >\n            <ng-template let-item pTemplate="item">\n              <span class="custom-launchpad-container">\n                <span> {{ item.name }} </span>\n                <span>\n                  {{ item.type }}\n                </span>\n              </span>\n            </ng-template>\n          </p-dropdown>\n        </div>\n      </div>\n      <div class="p-field p-grid">\n        <label for="type" class="p-col-12 p-md-3">{{ "LAUNCHPAD.TILE_TYPE" | translate }}: </label>\n        <div class="p-col-12 p-md-9">\n          <input id="text" type="text" pInputText formControlName="type" value="FAVOURITE" readonly />\n        </div>\n      </div>\n      <div class="p-field p-grid">\n        <label for="icon" class="p-col-12 p-md-3">Icon: </label>\n        <div class="p-col-12 p-md-9">\n          <p-autoComplete\n            [suggestions]="filteredIcons"\n            inputId="icon"\n            formControlName="icon"\n            (completeMethod)="filterIcons($event)"\n            placeholder="{{ \'LAUNCHPAD.SELECT_ICON\' | translate }}"\n            forceSelection="true"\n            completeOnFocus="true"\n          >\n            <ng-template let-icon pTemplate="item">\n              <div class="custom-item-container">\n                <div>{{ icon }}</div>\n                <span class="pi pi-{{icon}}"></span>\n              </div>\n            </ng-template>\n          </p-autoComplete>\n        </div>\n      </div>\n    </div>\n    <p-footer class="submit">\n      <button\n        pButton\n        type="submit"\n        label="{{ \'LAUNCHPAD.SAVE\' | translate }}"\n        [disabled]="!launchpadForm.valid"\n      ></button>\n    </p-footer>\n  </form>\n</p-dialog>\n',styles:[".custom-launchpad-container{display:flex}.custom-launchpad-container span:last-of-type{margin-left:auto}.submit{padding:.5em 0;margin-top:20px}.submit button{margin-top:.5em;width:100%}.custom-item-container div{display:inline-block}.custom-item-container span{float:left;margin-right:5px}"]}]}],lt.ctorParameters=function(){return[{type:at},{type:p.FormBuilder},{type:st},{type:void 0,decorators:[{type:t.Inject,args:[G]}]},{type:$.MessageService},{type:X}]},lt.propDecorators={display:[{type:t.Input}],appId:[{type:t.Input}],closed:[{type:t.Output}]};var pt=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.el=t,i.zone=n,i}return De(t,e),t.prototype.ngAfterViewInit=function(){var e=this;this.zone.runOutsideAngular((function(){switch(e.tooltipEvent){case"hover":e.initHoverForTooltipEvent();break;case"focus":e.initFocusForTooltipEvent();break;case"hover|focus":case"focus|hover":e.initHoverForTooltipEvent(),e.initFocusForTooltipEvent()}}))},t.prototype.initHoverForTooltipEvent=function(){this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener)},t.prototype.initFocusForTooltipEvent=function(){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this),this.el.nativeElement.addEventListener("focus",this.focusListener),this.el.nativeElement.addEventListener("blur",this.blurListener)},Object.defineProperty(t.prototype,"pTooltipText",{set:function(e){this.text=e},enumerable:!1,configurable:!0}),t}(H.Tooltip);pt.decorators=[{type:t.Directive,args:[{selector:"[pTooltip-aria]"}]}],pt.ctorParameters=function(){return[{type:t.ElementRef},{type:t.NgZone}]},pt.propDecorators={pTooltipText:[{type:t.Input,args:["pTooltip-aria"]}]};var ct=Qe,ut=function(){};ut.decorators=[{type:t.NgModule,args:[{declarations:[Ke,Ze,Me,Ee,Ae,be,ke,ve,Te,Se,Oe,we,ye,ge,pt,Pe,We,Ce,Ye,nt,it,ot,lt,rt],imports:[i.CommonModule,p.FormsModule,p.ReactiveFormsModule,U.AutoCompleteModule,_.BreadcrumbModule,d.ButtonModule,m.CalendarModule,h.CardModule,f.CheckboxModule,g.ConfirmDialogModule,v.DialogModule,b.DynamicDialogModule,y.DropdownModule,k.InputSwitchModule,I.InputTextModule,S.InputTextareaModule,T.MenuModule,C.MessageModule,P.MessagesModule,w.OverlayPanelModule,x.PanelModule,M.PanelMenuModule,R.RatingModule,j.RippleModule,E.ScrollPanelModule,F.SkeletonModule,L.TableModule,D.ToastModule,N.ToggleButtonModule,H.TooltipModule,r.HttpClientModule,a.HttpCacheInterceptorModule.forRoot(),c.TranslateModule],exports:[p.FormsModule,U.AutoCompleteModule,_.BreadcrumbModule,d.ButtonModule,m.CalendarModule,h.CardModule,f.CheckboxModule,g.ConfirmDialogModule,v.DialogModule,b.DynamicDialogModule,y.DropdownModule,k.InputSwitchModule,I.InputTextModule,S.InputTextareaModule,T.MenuModule,C.MessageModule,P.MessagesModule,w.OverlayPanelModule,A.PaginatorModule,x.PanelModule,M.PanelMenuModule,R.RatingModule,j.RippleModule,O.SelectButtonModule,F.SkeletonModule,L.TableModule,D.ToastModule,N.ToggleButtonModule,H.TooltipModule,r.HttpClientModule,a.HttpCacheInterceptorModule,Ke,Oe,We,we,Ze,Ce,ye,ge,pt,Ye,it],entryComponents:[Pe],providers:[a.useHttpCacheLocalStorage,b.DialogService,{provide:r.HTTP_INTERCEPTORS,useClass:Xe,multi:!0},{provide:t.APP_INITIALIZER,useFactory:ct,multi:!0,deps:[X,c.TranslateService,G]}]}]}],e.APP_CONFIG=V,e.AUTH_SERVICE=G,e.ActionDirective=ge,e.AuthModule=me,e.BreadcrumbService=he,e.CollapsibleDirective=ye,e.ConfigurationService=X,e.DEFAULT_AVATAR_URL=ee,e.HttpLoaderFactory2=function(e){return new u.TranslateHttpLoader(e,"./portal-lib/assets/i18n/")},e.LoadingComponent=Ce,e.MockAuthModule=Y,e.PanelHeaderComponent=we,e.PortalPageComponent=Oe,e.PortalSearchPage=Ve,e.PortalSearchPageComponent=We,e.PortalViewportComponent=Ke,e.ResultTextComponent=it,e.StandardTranslateHttpLoader=function(e){return new K.MultiTranslateHttpLoader(e,[{prefix:"./assets/i18n/",suffix:".json"},{prefix:"./portal-lib/assets/i18n/",suffix:".json"}])},e.StateService=fe,e.TkIfPermDirective=Ye,e.TkitPortalModule=ut,e.ToolbarItemComponent=Ze,e.TooltipAriaDirective=pt,e.UserProfileService=Q,e.initializer=W,e.isTkitPage=Fe,e.provideParent=function(e,n){return{provide:n||Ve,useExisting:t.forwardRef((function(){return e}))}},e.ɵ0=ct,e.ɵa=J,e.ɵb=ue,e.ɵba=rt,e.ɵbb=Xe,e.ɵbc=Qe,e.ɵc=Z,e.ɵd=je,e.ɵe=_e,e.ɵf=xe,e.ɵg=Be,e.ɵh=qe,e.ɵi=ze,e.ɵj=Me,e.ɵk=Ee,e.ɵl=Ae,e.ɵm=be,e.ɵn=ke,e.ɵo=ve,e.ɵp=Te,e.ɵq=Se,e.ɵr=Ie,e.ɵs=Pe,e.ɵt=Ue,e.ɵu=nt,e.ɵv=tt,e.ɵw=ot,e.ɵx=lt,e.ɵy=at,e.ɵz=st,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=portal-lib.umd.min.js.map