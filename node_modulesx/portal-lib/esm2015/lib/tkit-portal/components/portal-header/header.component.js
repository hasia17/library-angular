import { Component, EventEmitter, Inject, Input, Output, ViewChild } from '@angular/core';
import { AUTH_SERVICE } from '../../../api/injection-tokens';
import { CONFIG_KEY_TKIT_SEARCH_BASE_URL, DEFAULT_AVATAR_URL } from '../../constants';
import { ConfigurationService } from '../../../api/configuration.service';
import { StateService } from '../../../api/state.service';
import { Router } from '@angular/router';
import { animate, style, transition, trigger } from '@angular/animations';
export class HeaderComponent {
    constructor(authService, config, stateService, router) {
        this.authService = authService;
        this.config = config;
        this.stateService = stateService;
        this.router = router;
        this.defaultAvatarUrl = DEFAULT_AVATAR_URL;
        this.menuButtonClick = new EventEmitter();
        this.topbarItemClick = new EventEmitter();
        this.openHelpPage = new EventEmitter();
        this.openHelpPageEditor = new EventEmitter();
        this.openFeedback = new EventEmitter();
        this.openAddToLaunchpad = new EventEmitter();
        this.openSupportTicket = new EventEmitter();
        this.searchClick = new EventEmitter();
        this.homeNavUrl = '/';
        this.homeNavTitle = 'Home';
    }
    ngOnInit() {
        this.userProfile = this.authService.currentUser();
        this.userAvatar = this.authService.getAvatar();
        this.userDisplayName = this.authService.currentUser().person.displayName;
        this.searchUrl = this.config.getProperty(CONFIG_KEY_TKIT_SEARCH_BASE_URL) || '/ops/enterprise-search';
    }
    clickMenu() {
        console.log('Menu click');
        this.menuExpanded = !this.menuExpanded;
    }
    navigateTo(path, event) {
        event.preventDefault();
        path = this.config.getPortalData().baseUrl + path;
        location.assign(path);
    }
    logout(event) {
        event.preventDefault();
        this.authService.logout();
    }
    onMenuButtonClick(e) {
        this.menuButtonClick.emit(e);
    }
    onTopbarItemClick(e, arg) {
        this.topbarItemClick.emit({ event: e, arg });
    }
    onOpenHelpPageEditor(e) {
        this.openHelpPageEditor.emit(e);
    }
    onOpenHelpPage(e) {
        this.openHelpPage.emit(e);
    }
    onOpenFeedback(e) {
        this.openFeedback.emit(e);
    }
    onAddToFavourites(e) {
        this.openAddToLaunchpad.emit(e);
    }
    onOpenSupportTicket(e) {
        this.openSupportTicket.emit(e);
    }
    onTopbarMobileButtonClick($event) {
        this.mobileTopbarActive = !this.mobileTopbarActive;
        $event.preventDefault();
    }
    onSearchClick(e, val) {
        this.searchClick.emit({ event: e, val });
    }
}
HeaderComponent.decorators = [
    { type: Component, args: [{
                selector: 'tk-header',
                template: "<div class=\"layout-topbar p-shadow-4\" id=\"header\" role=\"banner\">\n  <div class=\"layout-topbar-left\">\n    <a class=\"layout-topbar-logo\" [href]=\"homeNavUrl\" [title]=\"homeNavTitle\">\n      <div class=\"logo\"></div>\n    </a>\n\n    <a *ngIf=\"fullPortalLayout\" class=\"layout-menu-button p-shadow-6\" (click)=\"onMenuButtonClick($event)\" pRipple [title]=\"menuButtonTitle\">\n      <i class=\"pi pi-chevron-right\"></i>\n    </a>\n\n    <a class=\"layout-topbar-mobile-button\" (click)=\"onTopbarMobileButtonClick($event)\" pRipple>\n      <i class=\"pi pi-ellipsis-v fs-large\"></i>\n    </a>\n  </div>\n\n  <div class=\"layout-topbar-right\" [ngClass]=\"{'layout-topbar-mobile-active': mobileTopbarActive}\">\n    <div class=\"layout-topbar-actions-left\">\n      <tk-breadcrumb\n        *ngIf=\"disableBreadcrumbs\"\n        [disableBreadcrumbs]=\"disableBreadcrumbs\"\n        [fullPortalLayout]=\"fullPortalLayout\"\n        (openHelpPage)=\"onOpenHelpPage($event)\"\n        (openHelpPageEditor)=\"onOpenHelpPageEditor($event)\"\n      ></tk-breadcrumb>\n    </div>\n    <div class=\"layout-topbar-actions-right\" *ngIf=\"fullPortalLayout\">\n      <ul class=\"layout-topbar-items\">\n        <li class=\"layout-topbar-item\">\n          <a class=\"layout-topbar-action rounded-circle\" href=\"#\" title=\"Feedback\" (click)=\"onOpenFeedback($event)\">\n            <i class=\"pi pi-star-o fs-large\"></i>\n          </a>\n        </li>\n        <li class=\"layout-topbar-item\">\n          <a\n            class=\"layout-topbar-action rounded-circle\"\n            href=\"#\"\n            title=\"Add to Favourites\"\n            (click)=\"onAddToFavourites($event)\"\n          >\n            <i class=\"pi pi-heart fs-large\"></i>\n          </a>\n        </li>\n        <li class=\"layout-topbar-item\">\n          <a\n            class=\"layout-topbar-action rounded-circle\"\n            href=\"#\"\n            title=\"Support Ticket\"\n            (click)=\"onOpenSupportTicket($event)\"\n          >\n            <i class=\"pi pi-ticket fs-large\"></i>\n          </a>\n        </li>\n        <li class=\"layout-topbar-item layout-search-item\">\n          <a class=\"layout-topbar-action rounded-circle\" (click)=\"onTopbarItemClick($event, 'search')\" pRipple>\n            <i class=\"pi pi-search fs-large\"></i>\n          </a>\n\n          <div class=\"layout-search-panel p-inputgroup\" [@topbarActionPanelAnimation]=\"'visible'\" *ngIf=\"search\">\n            <span class=\"p-inputgroup-addon\"><i class=\"pi pi-search\"></i></span>\n            <tk-search-bar (searchClick)=\"onSearchClick($event.event, $event.val)\"></tk-search-bar>\n            <span class=\"p-inputgroup-addon\">\n              <button\n                pButton\n                pRipple\n                type=\"button\"\n                icon=\"pi pi-times\"\n                class=\"p-button-rounded p-button-text p-button-plain\"\n                (click)=\"onSearchClick($event, false)\"\n              ></button>\n            </span>\n          </div>\n        </li>\n        <li *ngIf=\"disableBreadcrumbs\" class=\"layout-topbar-item\">\n          <a\n            class=\"layout-topbar-action rounded-circle\"\n            href=\"#\"\n            title=\"Hilfe f\u00FCr diesen Artikel anzeigen\"\n            (click)=\"onOpenHelpPage($event)\"\n          >\n            <i class=\"pi pi-question-circle fs-large\"></i>\n          </a>\n        </li>\n        <li *ngIf=\"disableBreadcrumbs\" class=\"layout-topbar-item\">\n          <a\n            class=\"layout-topbar-action rounded-circle\"\n            href=\"#\"\n            title=\"Hilfe f\u00FCr diesen Artikel vervalten\"\n            (click)=\"onOpenHelpPageEditor($event)\"\n          >\n            <i class=\"pi pi-pencil fs-large\"></i>\n          </a>\n        </li>\n        <li class=\"layout-topbar-item notifications\">\n          <a class=\"layout-topbar-action rounded-circle\" (click)=\"onTopbarItemClick($event, 'notifications')\" pRipple>\n            <i class=\"pi pi-bell fs-large\"></i>\n          </a>\n\n          <ul\n            class=\"layout-topbar-action-panel p-shadow-6\"\n            [@topbarActionPanelAnimation]=\"'visible'\"\n            *ngIf=\"activeTopbarItem === 'notifications'\"\n          >\n            <li class=\"p-mb-3\">\n              <span class=\"p-px-3 fs-small\">Not implemented.</span>\n            </li>\n            <li class=\"layout-topbar-action-item\">\n              <div class=\"p-d-flex p-flex-row p-ai-center\">\n                <p class=\"avatar-monogram\">MM</p>\n                <div class=\"p-d-flex p-flex-column p-ml-3\" style=\"flex-grow: 1;\">\n                  <div class=\"p-d-flex p-ai-center p-jc-between p-mb-1\">\n                    <span class=\"fs-small p-text-bold\">John Doe</span>\n                    <small>42 mins ago</small>\n                  </div>\n                  <span class=\"fs-small\">Notification example.</span>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </li>\n        <li class=\"layout-topbar-item\">\n          <a\n            class=\"layout-topbar-action p-d-flex p-dir-row p-jc-center p-ai-center p-px-2 rounded-circle\"\n            pRipple\n            (click)=\"onTopbarItemClick($event, 'profile')\"\n          >\n            <img\n              [src]=\"(userAvatar | async)?.avatarSmallImageUrl || defaultAvatarUrl\"\n              alt=\"avatar\"\n              class=\"profile-image\"\n            />\n          </a>\n\n          <ul\n            class=\"layout-topbar-action-panel p-shadow-6\"\n            [@topbarActionPanelAnimation]=\"'visible'\"\n            *ngIf=\"activeTopbarItem === 'profile'\"\n          >\n            <li class=\"layout-topbar-action-item\" *tkIfPerm=\"'PROFILE#VIEW'\">\n              <a\n                class=\"p-d-flex p-flex-row p-ai-center\"\n                pRipple\n                href=\"#\"\n                (click)=\"navigateTo('/account/profile', $event)\"\n                title=\"Manage your personal information and avatar\"\n              >\n                <i class=\"p-mr-2 pi pi-user\"></i>\n                <span>My Personal Info</span>\n              </a>\n            </li>\n\n            <li class=\"layout-topbar-action-item\">\n              <a\n                class=\"p-d-flex p-flex-row p-ai-center\"\n                pRipple\n                href=\"#\"\n                (click)=\"navigateTo('/account/settings', $event)\"\n                title=\"Manage your preferences and settings\"\n              >\n                <i class=\"p-mr-2 pi pi-cog\"></i>\n                <span>My Settings</span>\n              </a>\n            </li>\n\n            <li class=\"layout-topbar-action-item\">\n              <a\n                class=\"p-d-flex p-flex-row p-ai-center\"\n                pRipple\n                href=\"#\"\n                (click)=\"navigateTo('/account/change-password', $event)\"\n                title=\"Change your current password\"\n              >\n                <i class=\"p-mr-2 pi pi-key\"></i>\n                <span>Change Password</span>\n              </a>\n            </li>\n\n            <li class=\"layout-topbar-action-item\">\n              <a\n                class=\"p-d-flex p-flex-row p-ai-center\"\n                pRipple\n                href=\"#\"\n                (click)=\"navigateTo('/account/roles-and-perms', $event)\"\n                title=\"Overview of your application roles and permissions\"\n              >\n                <i class=\"p-mr-2 pi pi-unlock\"></i>\n                <span>My Roles & Permissions</span>\n              </a>\n            </li>\n            <li class=\"layout-topbar-action-item\">\n              <a class=\"p-d-flex p-flex-row p-ai-center\" pRipple href=\"#\" (click)=\"logout($event)\">\n                <i class=\"p-mr-2 pi pi-power-off\"></i>\n                <span>Logout</span>\n              </a>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n",
                animations: [
                    trigger('topbarActionPanelAnimation', [
                        transition(':enter', [
                            style({ opacity: 0, transform: 'scaleY(0.8)' }),
                            animate('.12s cubic-bezier(0, 0, 0.2, 1)', style({ opacity: 1, transform: '*' })),
                        ]),
                        transition(':leave', [animate('.1s linear', style({ opacity: 0 }))]),
                    ]),
                ],
                styles: [".avatar-monogram{margin:0;line-height:32px;background-color:#1e90ff;text-align:center;padding-top:1px;color:#fff}.avatar-monogram,.profile-image{width:32px;height:32px;border-radius:50%}.http-progress-loader{margin-left:8px;padding-top:5px}@media screen and (max-width:1024px){.http-progress-loader{margin-left:0;margin-right:8px}}"]
            },] }
];
HeaderComponent.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [AUTH_SERVICE,] }] },
    { type: ConfigurationService },
    { type: StateService },
    { type: Router }
];
HeaderComponent.propDecorators = {
    searchInputViewChild: [{ type: ViewChild, args: ['searchInput',] }],
    menuButtonTitle: [{ type: Input }],
    menuButtonClick: [{ type: Output }],
    topbarItemClick: [{ type: Output }],
    openHelpPage: [{ type: Output }],
    openHelpPageEditor: [{ type: Output }],
    openFeedback: [{ type: Output }],
    openAddToLaunchpad: [{ type: Output }],
    openSupportTicket: [{ type: Output }],
    searchClick: [{ type: Output }],
    profileMode: [{ type: Input }],
    isHorizontal: [{ type: Input }],
    activeTopbarItem: [{ type: Input }],
    disableBreadcrumbs: [{ type: Input }],
    fullPortalLayout: [{ type: Input }],
    search: [{ type: Input }],
    homeNavUrl: [{ type: Input }],
    homeNavTitle: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3BvcnRhbC1saWIvc3JjL2xpYi90a2l0LXBvcnRhbC9jb21wb25lbnRzL3BvcnRhbC1oZWFkZXIvaGVhZGVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFjLFlBQVksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFHN0csT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLCtCQUErQixDQUFBO0FBRzVELE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlCQUFpQixDQUFBO0FBQ3JGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFBO0FBQ3pFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQTtBQUN6RCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0saUJBQWlCLENBQUE7QUFDeEMsT0FBTyxFQUFFLE9BQU8sRUFBa0IsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQTtBQWdCekYsTUFBTSxPQUFPLGVBQWU7SUFrRDFCLFlBQ2dDLFdBQXlCLEVBQy9DLE1BQTRCLEVBQzVCLFlBQTBCLEVBQzFCLE1BQWM7UUFIUSxnQkFBVyxHQUFYLFdBQVcsQ0FBYztRQUMvQyxXQUFNLEdBQU4sTUFBTSxDQUFzQjtRQUM1QixpQkFBWSxHQUFaLFlBQVksQ0FBYztRQUMxQixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBckR4QixxQkFBZ0IsR0FBRyxrQkFBa0IsQ0FBQTtRQWdCckMsb0JBQWUsR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQTtRQUV2RCxvQkFBZSxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFBO1FBRXZELGlCQUFZLEdB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QUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFBO0lBQzFDLENBQUM7OztZQTNIRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLFdBQVc7Z0JBQ3JCLG81UEFBc0M7Z0JBRXRDLFVBQVUsRUFBRTtvQkFDVixPQUFPLENBQUMsNEJBQTRCLEVBQUU7d0JBQ3BDLFVBQVUsQ0FBQyxRQUFRLEVBQUU7NEJBQ25CLEtBQUssQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxDQUFDOzRCQUMvQyxPQUFPLENBQUMsaUNBQWlDLEVBQUUsS0FBSyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQzt5QkFDbEYsQ0FBQzt3QkFDRixVQUFVLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQ3JFLENBQUM7aUJBQ0g7O2FBQ0Y7Ozs0Q0FvREksTUFBTSxTQUFDLFlBQVk7WUF0RWYsb0JBQW9CO1lBQ3BCLFlBQVk7WUFDWixNQUFNOzs7bUNBMEJaLFNBQVMsU0FBQyxhQUFhOzhCQUt2QixLQUFLOzhCQUVMLE1BQU07OEJBRU4sTUFBTTsyQkFFTixNQUFNO2lDQUVOLE1BQU07MkJBRU4sTUFBTTtpQ0FFTixNQUFNO2dDQUVOLE1BQU07MEJBRU4sTUFBTTswQkFFTixLQUFLOzJCQUVMLEtBQUs7K0JBRUwsS0FBSztpQ0FFTCxLQUFLOytCQUVMLEtBQUs7cUJBRUwsS0FBSzt5QkFHTCxLQUFLOzJCQUVMLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcydcbmltcG9ydCB7IElBdXRoU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2FwaS9pYXV0aC5zZXJ2aWNlJ1xuaW1wb3J0IHsgQVVUSF9TRVJWSUNFIH0gZnJvbSAnLi4vLi4vLi4vYXBpL2luamVjdGlvbi10b2tlbnMnXG5pbXBvcnQgeyBBdmF0YXJJbmZvIH0gZnJvbSAnLi4vLi4vLi4vYXBpL21vZGVsL2F2YXRhci1pbmZvLm1vZGVsJ1xuaW1wb3J0IHsgVXNlclByb2ZpbGUgfSBmcm9tICcuLi8uLi8uLi9hcGkvbW9kZWwvdXNlci1wcm9maWxlLm1vZGVsJ1xuaW1wb3J0IHsgQ09ORklHX0tFWV9US0lUX1NFQVJDSF9CQVNFX1VSTCwgREVGQVVMVF9BVkFUQVJfVVJMIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9hcGkvY29uZmlndXJhdGlvbi5zZXJ2aWNlJ1xuaW1wb3J0IHsgU3RhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vYXBpL3N0YXRlLnNlcnZpY2UnXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInXG5pbXBvcnQgeyBhbmltYXRlLCBBbmltYXRpb25FdmVudCwgc3R5bGUsIHRyYW5zaXRpb24sIHRyaWdnZXIgfSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJ1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0ay1oZWFkZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vaGVhZGVyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vaGVhZGVyLmNvbXBvbmVudC5zY3NzJ10sXG4gIGFuaW1hdGlvbnM6IFtcbiAgICB0cmlnZ2VyKCd0b3BiYXJBY3Rpb25QYW5lbEFuaW1hdGlvbicsIFtcbiAgICAgIHRyYW5zaXRpb24oJzplbnRlcicsIFtcbiAgICAgICAgc3R5bGUoeyBvcGFjaXR5OiAwLCB0cmFuc2Zvcm06ICdzY2FsZVkoMC44KScgfSksXG4gICAgICAgIGFuaW1hdGUoJy4xMnMgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSknLCBzdHlsZSh7IG9wYWNpdHk6IDEsIHRyYW5zZm9ybTogJyonIH0pKSxcbiAgICAgIF0pLFxuICAgICAgdHJhbnNpdGlvbignOmxlYXZlJywgW2FuaW1hdGUoJy4xcyBsaW5lYXInLCBzdHlsZSh7IG9wYWNpdHk6IDAgfSkpXSksXG4gICAgXSksXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIEhlYWRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIGRlZmF1bHRBdmF0YXJVcmwgPSBERUZBVUxUX0FWQVRBUl9VUkxcbiAgbWVudUV4cGFuZGVkOiBib29sZWFuXG4gIG1lbnVJdGVtczogYW55XG4gIHVzZXJQcm9maWxlOiBVc2VyUHJvZmlsZVxuICB1c2VyRGlzcGxheU5hbWU6IHN0cmluZ1xuICB1c2VyQXZhdGFyOiBPYnNlcnZhYmxlPEF2YXRhckluZm8+XG4gIHNlYXJjaFVybDogc3RyaW5nXG5cbiAgQFZpZXdDaGlsZCgnc2VhcmNoSW5wdXQnKSBzZWFyY2hJbnB1dFZpZXdDaGlsZDogRWxlbWVudFJlZlxuXG4gIG1vYmlsZVRvcGJhckFjdGl2ZTogYm9vbGVhblxuXG4gIC8vIFRPRE8gZG9lc24ndCBhbHdheXMgd29yayAoY2QgcmVsYXRlZD8pXG4gIEBJbnB1dCgpXG4gIG1lbnVCdXR0b25UaXRsZTogc3RyaW5nXG4gIEBPdXRwdXQoKVxuICBtZW51QnV0dG9uQ2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG4gIEBPdXRwdXQoKVxuICB0b3BiYXJJdGVtQ2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG4gIEBPdXRwdXQoKVxuICBvcGVuSGVscFBhZ2U6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG4gIEBPdXRwdXQoKVxuICBvcGVuSGVscFBhZ2VFZGl0b3I6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG4gIEBPdXRwdXQoKVxuICBvcGVuRmVlZGJhY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG4gIEBPdXRwdXQoKVxuICBvcGVuQWRkVG9MYXVuY2hwYWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG4gIEBPdXRwdXQoKVxuICBvcGVuU3VwcG9ydFRpY2tldDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKClcbiAgQE91dHB1dCgpXG4gIHNlYXJjaENsaWNrOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKVxuICBASW5wdXQoKVxuICBwcm9maWxlTW9kZTogc3RyaW5nXG4gIEBJbnB1dCgpXG4gIGlzSG9yaXpvbnRhbDogYm9vbGVhblxuICBASW5wdXQoKVxuICBhY3RpdmVUb3BiYXJJdGVtOiBhbnlcbiAgQElucHV0KClcbiAgZGlzYWJsZUJyZWFkY3J1bWJzOiBib29sZWFuXG4gIEBJbnB1dCgpXG4gIGZ1bGxQb3J0YWxMYXlvdXQ6IGJvb2xlYW5cbiAgQElucHV0KClcbiAgc2VhcmNoOiBib29sZWFuXG5cbiAgQElucHV0KClcbiAgaG9tZU5hdlVybCA9ICcvJ1xuICBASW5wdXQoKVxuICBob21lTmF2VGl0bGUgPSAnSG9tZSdcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KEFVVEhfU0VSVklDRSkgcHJpdmF0ZSBhdXRoU2VydmljZTogSUF1dGhTZXJ2aWNlLFxuICAgIHByaXZhdGUgY29uZmlnOiBDb25maWd1cmF0aW9uU2VydmljZSxcbiAgICBwcml2YXRlIHN0YXRlU2VydmljZTogU3RhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXJcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMudXNlclByb2ZpbGUgPSB0aGlzLmF1dGhTZXJ2aWNlLmN1cnJlbnRVc2VyKClcbiAgICB0aGlzLnVzZXJBdmF0YXIgPSB0aGlzLmF1dGhTZXJ2aWNlLmdldEF2YXRhcigpXG4gICAgdGhpcy51c2VyRGlzcGxheU5hbWUgPSB0aGlzLmF1dGhTZXJ2aWNlLmN1cnJlbnRVc2VyKCkucGVyc29uLmRpc3BsYXlOYW1lXG4gICAgdGhpcy5zZWFyY2hVcmwgPSB0aGlzLmNvbmZpZy5nZXRQcm9wZXJ0eShDT05GSUdfS0VZX1RLSVRfU0VBUkNIX0JBU0VfVVJMKSB8fCAnL29wcy9lbnRlcnByaXNlLXNlYXJjaCdcbiAgfVxuXG4gIGNsaWNrTWVudSgpIHtcbiAgICBjb25zb2xlLmxvZygnTWVudSBjbGljaycpXG4gICAgdGhpcy5tZW51RXhwYW5kZWQgPSAhdGhpcy5tZW51RXhwYW5kZWRcbiAgfVxuXG4gIG5hdmlnYXRlVG8ocGF0aDogc3RyaW5nLCBldmVudDogRXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgcGF0aCA9IHRoaXMuY29uZmlnLmdldFBvcnRhbERhdGEoKS5iYXNlVXJsICsgcGF0aFxuICAgIGxvY2F0aW9uLmFzc2lnbihwYXRoKVxuICB9XG5cbiAgbG9nb3V0KGV2ZW50OiBFdmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmF1dGhTZXJ2aWNlLmxvZ291dCgpXG4gIH1cblxuICBvbk1lbnVCdXR0b25DbGljayhlOiBFdmVudCkge1xuICAgIHRoaXMubWVudUJ1dHRvbkNsaWNrLmVtaXQoZSlcbiAgfVxuICBvblRvcGJhckl0ZW1DbGljayhlOiBFdmVudCwgYXJnOiBhbnkpIHtcbiAgICB0aGlzLnRvcGJhckl0ZW1DbGljay5lbWl0KHsgZXZlbnQ6IGUsIGFyZyB9KVxuICB9XG4gIG9uT3BlbkhlbHBQYWdlRWRpdG9yKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5vcGVuSGVscFBhZ2VFZGl0b3IuZW1pdChlKVxuICB9XG4gIG9uT3BlbkhlbHBQYWdlKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5vcGVuSGVscFBhZ2UuZW1pdChlKVxuICB9XG4gIG9uT3BlbkZlZWRiYWNrKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5vcGVuRmVlZGJhY2suZW1pdChlKVxuICB9XG4gIG9uQWRkVG9GYXZvdXJpdGVzKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5vcGVuQWRkVG9MYXVuY2hwYWQuZW1pdChlKVxuICB9XG4gIG9uT3BlblN1cHBvcnRUaWNrZXQoZTogRXZlbnQpIHtcbiAgICB0aGlzLm9wZW5TdXBwb3J0VGlja2V0LmVtaXQoZSlcbiAgfVxuXG4gIG9uVG9wYmFyTW9iaWxlQnV0dG9uQ2xpY2soJGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgdGhpcy5tb2JpbGVUb3BiYXJBY3RpdmUgPSAhdGhpcy5tb2JpbGVUb3BiYXJBY3RpdmVcbiAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9XG5cbiAgb25TZWFyY2hDbGljayhlOiBFdmVudCwgdmFsOiBib29sZWFuKSB7XG4gICAgdGhpcy5zZWFyY2hDbGljay5lbWl0KHsgZXZlbnQ6IGUsIHZhbCB9KVxuICB9XG5cbn1cbiJdfQ==