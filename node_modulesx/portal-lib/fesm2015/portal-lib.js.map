{"version":3,"file":"portal-lib.js","sources":["../../../projects/portal-lib/src/lib/api/injection-tokens.ts","../../../projects/portal-lib/src/lib/mock-auth/mock-auth.service.ts","../../../projects/portal-lib/src/lib/mock-auth/mock-auth.module.ts","../../../projects/portal-lib/src/lib/api/services/portal-api.service.ts","../../../projects/portal-lib/src/lib/api/configuration.service.ts","../../../projects/portal-lib/src/lib/api/services/user-profile.service.ts","../../../projects/portal-lib/src/lib/tkit-portal/constants.ts","../../../projects/portal-lib/src/lib/auth/keycloak-auth.service.ts","../../../projects/portal-lib/src/lib/auth/auth.module.ts","../../../projects/portal-lib/src/lib/api/model/person.model.ts","../../../projects/portal-lib/src/lib/api/services/breadcrumb.service.ts","../../../projects/portal-lib/src/lib/api/state.service.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/action.directive.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/breadcrumbs/breadcrumb.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/collapsible.directive.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/footer.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/help-edit-dialog.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/http-progress-loader.service.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/http-progress-loader.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/inline-profile.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/loading/loading.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/no-help-info/no-help-info.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/panel-header.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/portal-header/header.component.ts","../../../projects/portal-lib/src/lib/api/services/menu.service.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/portal-menu/portal-menu.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/portal-page/portal-page.component.ts","../../../projects/portal-lib/src/lib/api/services/search-template-api.service.ts","../../../projects/portal-lib/src/lib/api/services/help-page-api.service.ts","../../../projects/portal-lib/src/lib/tkit-portal/pages/PortalPage.ts","../../../projects/portal-lib/src/lib/api/services/theme.service.ts","../../../projects/portal-lib/src/lib/api/services/menu-api.service.ts","../../../projects/portal-lib/src/lib/api/services/feedback-api.service.ts","../../../projects/portal-lib/src/lib/api/services/support-ticket-api.service.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/portal-viewport/portal-viewport.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/pages/PortalSearchPage.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/portal-search-page/portal-search-page.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/tkifperm.directive.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/toolbar-item.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/http-progress-interceptor.ts","../../../projects/portal-lib/src/lib/tkit-portal/tkitPortalInitilizer.ts","../../../projects/portal-lib/src/lib/api/services/portal-item.service.ts","../../../projects/portal-lib/src/lib/api/model/search-item-type.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/search-bar/search-bar.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/result-text.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/feedback/feedback.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/support-ticket/support-ticket.component.ts","../../../projects/portal-lib/src/lib/api/services/icons.service.ts","../../../projects/portal-lib/src/lib/api/services/launchpad.service.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/add-to-launchpad/add-to-launchpad.component.ts","../../../projects/portal-lib/src/lib/tkit-portal/components/aria/tooltip.directive.ts","../../../projects/portal-lib/src/lib/tkit-portal/tkit-portal.module.ts","../../../projects/portal-lib/src/lib/tkit-portal/functions.ts","../../../projects/portal-lib/src/public-api.ts","../../../projects/portal-lib/src/portal-lib.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\nimport { IAuthService } from './iauth.service';\r\n\r\nexport interface LibConfig {\r\n  appId: string;\r\n  portalId: string;\r\n  /**\r\n   * If true, the tkit-module will not try to load remote env values from server(GET /assets/env.json)\r\n   */\r\n  skipRemoteConfigLoad: boolean;\r\n  /**\r\n   * URL from which the remote config will be loaded, default: '/assets/env.json'\r\n   */\r\n  remoteConfigURL: string;\r\n}\r\nexport const APP_CONFIG = new InjectionToken<LibConfig>('APP_CONFIG');\r\n\r\nexport const AUTH_SERVICE = new InjectionToken<IAuthService>('AUTH_SERVICE');\r\n","import { Injectable } from '@angular/core';\nimport { IAuthService } from '../api/iauth.service';\nimport { User } from '../api/model';\nimport { UserProfile } from '../api/model/user-profile.model';\nimport { Observable, of, ReplaySubject } from 'rxjs';\nimport { sampleUser } from './sample';\nimport { AvatarInfo } from '../api/model/avatar-info.model';\n\n@Injectable()\nexport class MockAuthService implements IAuthService {\n  private mockUser: UserProfile = {\n    person: {\n      displayName: 'Max Musterman',\n      firstName: 'Max',\n      lastName: 'Mustermann',\n      email: 'max.mustermann@capgemini.com'\n    },\n    accountSettings: {\n      localeAndTimeSettings: { locale: 'de', timezone: 'GMT' },\n      notificationSettings: {},\n      preferences: [],\n      privacySettings: {}\n    },\n    id: 'ID_MOCK_USER',\n    identityProvider: 'MOCK_TKIT_PORTAL_LIB',\n    identityProviderId: 'MOCK_ID',\n    roles: ['user', 'admin'],\n    memberships: [\n      {\n        application: 'APP1',\n        roleMemberships: [\n          {\n            role: 'user',\n            permissions: [\n              {\n                action: 'EDIT',\n                resource: 'ITEM',\n                name: 'Edit item',\n                key: 'ITEM#EDIT'\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  };\n  constructor() {}\n  currentUser(): UserProfile {\n    return this.mockUser;\n  }\n  getAvatar(): Observable<AvatarInfo> {\n    return of(this.mockUser.avatar);\n  }\n\n  public init(): Promise<boolean> {\n    return new Promise((resolve, reject) => resolve(true));\n  }\n\n  hasPermission(permissionKey: string): boolean {\n    return true;\n  }\n\n  logout() {\n    throw new Error('Method not implemented.');\n  }\n  getAuthProviderName() {\n    return 'MOCK_TKIT_PORTAL_LIB';\n  }\n  hasRole(role: string | string[]): boolean {\n    return true;\n  }\n  getRoles(): string[] {\n    return ['tkit-portal-admin'];\n  }\n}\n","import { NgModule, APP_INITIALIZER } from '@angular/core'\nimport { AUTH_SERVICE } from '../api/injection-tokens'\nimport { MockAuthService } from '../mock-auth/mock-auth.service'\nimport { CommonModule } from '@angular/common'\n\nexport function initializer(authService: MockAuthService): () => Promise<any> {\n  console.log(`Start Mock auth initializer`)\n\n  return (): Promise<any> =>\n    authService.init().then(res => {\n      console.log(`mock auth app_initializer resolved ${res}`)\n      return res\n    })\n}\n\n/**\n * Mock auth module providing mocked user profile and authnetication. For dev use only.\n */\n@NgModule({\n  imports: [CommonModule],\n  exports: [],\n  declarations: [],\n  providers: [\n    {\n      provide: AUTH_SERVICE,\n      useClass: MockAuthService,\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: initializer,\n      multi: true,\n      deps: [AUTH_SERVICE],\n    },\n  ],\n})\nexport class MockAuthModule {}\n","import { Injectable } from \"@angular/core\";\nimport { Observable } from \"rxjs\";\nimport { Portal } from \"../model/portal\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { withCache } from \"@ngneat/cashew\";\n\n@Injectable({ providedIn: \"root\" })\nexport class PortalApiService {\n  constructor(private readonly httpClient: HttpClient) {}\n  baseUrl = \"./portal-api/v1/portals\";\n\n  getPortalData(portal: string): Observable<Portal> {\n    return this.httpClient.get<Portal>(\n      `${this.baseUrl}/${portal}`,\n      withCache()\n    );\n  }\n}\n","import { HttpClient } from '@angular/common/http'\nimport { Injectable, Inject } from '@angular/core'\nimport { APP_CONFIG, LibConfig } from './injection-tokens'\nimport { PortalApiService } from './services/portal-api.service'\nimport { Portal } from './model/portal'\nimport { ReplaySubject } from 'rxjs'\n\nconst TKIT_PORTAL_ID = 'TKIT_PORTAL_ID'\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ConfigurationService {\n  public lang$ = new ReplaySubject<string>(1)\n\n  private customEnv: any\n  private portalData: Portal\n  error: any\n\n  constructor(\n    private http: HttpClient,\n    private portalService: PortalApiService,\n    @Inject(APP_CONFIG) private appConfig: LibConfig\n  ) {}\n\n  public init(): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      if (this.appConfig.skipRemoteConfigLoad) {\n        console.log(\n          'TKA001: Remote config load is disabled. To enable it, remove the \"skipRemoteConfigLoad\" key in your environemnt.json'\n        )\n        this.customEnv = this.appConfig\n        resolve(false)\n      }\n      let loadConfigPromise: Promise<any>\n      // if we have Backend env vars injected in HTML, use it\n      console.log(`ENV resolved ${window['APP_CONFIG']}`)\n      if (window['APP_CONFIG']) {\n        loadConfigPromise = new Promise((resolve, reject) => {\n          resolve(window['APP_CONFIG'])\n        })\n      } else {\n        console.log('noooo moar http')\n        //otherwise fetch them from env.json\n        loadConfigPromise = this.http.get(this.appConfig.remoteConfigURL || 'assets/env.json').toPromise()\n      }\n\n      loadConfigPromise\n        .then(config => {\n          if (config) {\n            const sanitizedEnvValues = this.sanitizeConfig(config)\n            this.customEnv = { ...this.appConfig, ...sanitizedEnvValues }\n          }\n        })\n        .then(() => {\n          const portalId = this.customEnv[TKIT_PORTAL_ID] || 'PORTAL'\n\n          this.portalService\n            .getPortalData(portalId)\n            .toPromise()\n            .then(data => {\n              if (data) {\n                this.portalData = data\n              }\n              resolve(true)\n            })\n            .catch(err => {\n              console.log(`Failed to load portal data! ${JSON.stringify(err)}`)\n              this.portalData = { portalId: 'PORTAL' }\n              resolve(true)\n            })\n        })\n        .catch(e => {\n          console.log(`Failed to load env configuration`)\n          reject(e)\n        })\n    })\n  }\n\n  private sanitizeConfig(config: Object) {\n    return (\n      Object.keys(config)\n        // only take values that are interpolated/set\n        .filter(key => !(config[key] as string).startsWith('${'))\n        .reduce((obj, key) => {\n          obj[key] = config[key]\n          return obj\n        }, {})\n    )\n  }\n\n  public getProperty(key: string): string {\n    return this.customEnv[key]\n  }\n\n  public getPortalData(): Portal {\n    return this.portalData\n  }\n  public setLang(lang: string) {\n    console.log('[CONFIG SERVICE] SETTING LANG: ', lang)\n    this.lang$.next(lang)\n  }\n}\n","import { Injectable } from '@angular/core'\nimport { HttpClient } from '@angular/common/http'\nimport { Observable, ReplaySubject } from 'rxjs'\nimport { UserProfile, UserProfileAccountSettings } from '../model/user-profile.model'\nimport { UserPerson } from '../model/person.model'\nimport { shareReplay, switchMapTo, tap } from 'rxjs/operators'\nimport { AvatarInfo } from '../model/avatar-info.model'\nimport { ResetPasswordDTO } from '../model/resetPasswordDTO'\nimport { withCache } from '@ngneat/cashew'\n\n@Injectable({ providedIn: 'root' })\nexport class UserProfileService {\n  private url = './portal-api/v1/userProfile/me'\n  private personUrl = './portal-api/v1/userProfile/me/userPerson'\n  private avatarUrl = './portal-api/v1/userProfile/me/avatar'\n  private settingsUrl = './portal-api/v1/userProfile/me/settings'\n  private changePasswordUrl = './portal-api/v1/userProfile/me/change-password'\n\n  private refreshProfile$ = new ReplaySubject<void>(1)\n  private currentAvatar$ = new ReplaySubject<AvatarInfo>(1)\n\n  private currentUser$: Observable<UserProfile> = this.refreshProfile$.pipe(\n    switchMapTo(this.http.get<UserProfile>(this.url)),\n    shareReplay(1)\n  )\n\n  constructor(private http: HttpClient) {}\n\n  getCurrentUser(): Observable<UserProfile> {\n    return this.currentUser$\n  }\n\n  getUpdatedAvatar(): Observable<AvatarInfo> {\n    return this.currentAvatar$\n  }\n\n  updatePersonalInfo(person: UserPerson): Observable<UserPerson> {\n    return this.http.put(this.personUrl, person)\n    // .pipe(tap(() => this.refreshProfile()));\n  }\n\n  setUserAvatar(file: File): Observable<AvatarInfo> {\n    const formData = new FormData()\n    formData.append('file', file)\n    return this.http.put<AvatarInfo>(this.avatarUrl, formData).pipe(tap(avatar => this.currentAvatar$.next(avatar)))\n  }\n\n  removeAvatar() {\n    return this.http.delete(this.avatarUrl).pipe(tap(() => this.currentAvatar$.next(null)))\n  }\n\n  updateUserSettings(settings: UserProfileAccountSettings): Observable<UserPerson> {\n    return this.http.patch(this.settingsUrl, settings)\n  }\n\n  refreshProfile() {\n    this.refreshProfile$.next()\n  }\n\n  getUserSettings(): Observable<UserProfileAccountSettings> {\n    return this.http.get<UserProfileAccountSettings>(this.settingsUrl)\n  }\n\n  getCurrentUserFromBE(): Observable<UserProfile> {\n    return this.http.get<UserProfile>(this.url)\n  }\n\n  changeUserPassword(resetPasswordDTO: ResetPasswordDTO): Observable<any> {\n    return this.http.put<any>(this.changePasswordUrl, resetPasswordDTO)\n  }\n}\n","export const DEFAULT_AVATAR_URL = 'portal-lib/assets/images/default_avatar.png';\nexport const CONFIG_KEY_TKIT_PORTAL_DEFAULT_THEME = \"TKIT_PORTAL_DEFAULT_THEME\";\nexport const CONFIG_KEY_TKIT_PORTAL_DISABLE_THEME_MANAGEMENT = \"TKIT_PORTAL_DISABLE_THEME_MANAGEMENT\";\nexport const CONFIG_KEY_TKIT_PORTAL_THEME_SERVER_URL = \"TKIT_PORTAL_THEME_SERVER_URL\";\nexport const CONFIG_KEY_TKIT_TOKEN_ROLE_CLAIM_NAME = \"TKIT_TOKEN_ROLE_CLAIM_NAME\";\nexport const CONFIG_KEY_TKIT_PORTAL_ID= \"TKIT_PORTAL_ID\";\nexport const CONFIG_KEY_TKIT_SUPPORTED_LANGUAGES= \"TKIT_SUPPORTED_LANGUAGES\";\nexport const CONFIG_KEY_TKIT_SEARCH_BASE_URL = \"TKIT_SEARCH_BASE_URL\";\nexport const CONFIG_KEY_APP_BASE_HREF = \"APP_BASE_HREF\";\nexport const CONFIG_KEY_KEYCLOAK_REALM = \"KEYCLOAK_REALM\";\nexport const CONFIG_KEY_KEYCLOAK_ENABLE_SILENT_SSO = \"KEYCLOAK_ENABLE_SILENT_SSO\";\nexport const CONFIG_KEY_KEYCLOAK_URL = \"KEYCLOAK_URL\";\nexport const CONFIG_KEY_KEYCLOAK_CLIENT_ID = \"KEYCLOAK_CLIENT_ID\"\n","import { Injectable, NgZone } from '@angular/core'\nimport { KeycloakService, KeycloakEventType, KeycloakOptions } from 'keycloak-angular'\nimport { Observable, of, ReplaySubject } from 'rxjs'\nimport { ConfigurationService } from '../api/configuration.service'\nimport { IAuthService } from '../api/iauth.service'\nimport { User } from '../api/model'\nimport { AvatarInfo } from '../api/model/avatar-info.model'\nimport { UserProfile } from '../api/model/user-profile.model'\nimport { UserProfileService } from '../api/services/user-profile.service'\nimport { Router } from '@angular/router'\nimport {\n  CONFIG_KEY_KEYCLOAK_URL,\n  CONFIG_KEY_KEYCLOAK_CLIENT_ID,\n  CONFIG_KEY_KEYCLOAK_REALM,\n  CONFIG_KEY_KEYCLOAK_ENABLE_SILENT_SSO,\n} from '../tkit-portal/constants'\nimport { KeycloakConfig } from 'keycloak-js'\n\nconst KC_REFRESH_TOKEN_LS = 'kc_refreshToken'\nconst KC_ID_TOKEN_LS = 'kc_idToken'\nconst KC_TOKEN_LS = 'kc_token'\nconst TKIT_USER_PROFILE_LS = 'tkit_user_profile'\n\n@Injectable()\nexport class KeycloakAuthService implements IAuthService {\n  userProfile: UserProfile\n  avatarSubject: ReplaySubject<AvatarInfo>\n  private user: User = {\n    userId: 'anonymous',\n    userPerson: { firstName: 'Guest' },\n    functions: [],\n    roles: [],\n  }\n\n  constructor(\n    private keycloakService: KeycloakService,\n    private configService: ConfigurationService,\n    private userProfileService: UserProfileService,\n    private router: Router\n  ) {}\n\n  hasPermission(permissionKey: string): boolean {\n    return this.user.functions ? this.user.functions.includes(permissionKey) : false\n  }\n  currentUser(): UserProfile {\n    return this.userProfile\n  }\n  logout() {\n    this.clearKCStateFromLocalstorage()\n    this.keycloakService.logout()\n  }\n  getAuthProviderName() {\n    return 'Keycloak based Security'\n  }\n\n  public init(): Promise<boolean> {\n    console.log('Keycloak Auth initialization')\n    // load previous tokens, saved after successful login of keycloak success callback\n    let token = localStorage.getItem(KC_TOKEN_LS)\n    let idToken = localStorage.getItem(KC_ID_TOKEN_LS)\n    let refreshToken = localStorage.getItem(KC_REFRESH_TOKEN_LS)\n    if (token) {\n      const parsedToken = JSON.parse(atob(refreshToken.split('.')[1]))\n      console.log(`Got tokens in LC ${parsedToken.exp} ${parsedToken.sub}`)\n      if (parsedToken.exp * 1000 < new Date().getTime()) {\n        //refresh expired, drop everything\n        console.log(`Refresh token expired`)\n        token = undefined\n        refreshToken = undefined\n        idToken = undefined\n        this.clearKCStateFromLocalstorage()\n      }\n    }\n\n    this.setupEventListener()\n\n    // try constructing the KC config from values in env\n    let kcConfig: KeycloakConfig | string = {\n      url: this.configService.getProperty(CONFIG_KEY_KEYCLOAK_URL),\n      clientId:\n        this.configService.getProperty(CONFIG_KEY_KEYCLOAK_CLIENT_ID) || this.configService.getProperty('appId'),\n      realm: this.configService.getProperty(CONFIG_KEY_KEYCLOAK_REALM),\n    }\n    // If any of the required props is missing, fallback to loading KC conf from file\n    if (!kcConfig.clientId || !kcConfig.realm || !kcConfig.url) {\n      kcConfig = './assets/keycloak.json'\n    }\n\n    const enableSilentSSOCheck = this.configService.getProperty(CONFIG_KEY_KEYCLOAK_ENABLE_SILENT_SSO) === 'true'\n\n    const kcOptions: KeycloakOptions = {\n      loadUserProfileAtStartUp: false,\n      config: kcConfig,\n      initOptions: {\n        // onLoad: \"login-required\",\n        onLoad: 'check-sso',\n        checkLoginIframe: false,\n        silentCheckSsoRedirectUri: enableSilentSSOCheck ? this.getSilentSSOUrl() : undefined,\n        idToken,\n        refreshToken,\n        token,\n      },\n      enableBearerInterceptor: true,\n      bearerExcludedUrls: ['/assets'],\n    }\n\n    // console.log(`INit KC with ${JSON.stringify(kcOptions, null, 2)}`)\n    return this.keycloakService\n      .init(kcOptions)\n      .catch(err => {\n        console.log(`kc err ${err}, try force login`)\n        return this.keycloakService.login()\n      })\n      .then(loginOk => {\n        // this will be false if our silent login did not work\n        console.log(`Keycloak init done, loginOk?: ${loginOk}`)\n        if (loginOk) {\n          return this.keycloakService.getToken()\n        } else {\n          // we want to block bootstrap process now\n          return this.keycloakService.login().then(() => 'login')\n        }\n      })\n      .then(tokenString => {\n        const parsedToken = JSON.parse(atob(tokenString.split('.')[1]))\n        console.log(`fetching profile ${JSON.stringify(parsedToken)}`)\n        let profileFromCache =\n          localStorage.getItem(TKIT_USER_PROFILE_LS) &&\n          (JSON.parse(localStorage.getItem(TKIT_USER_PROFILE_LS)) as UserProfile)\n        if (profileFromCache) {\n          //if we have already a profile in LS, check if it is the smae user\n          if (profileFromCache.person.email === parsedToken['email']) {\n            //same user, take from LS and load async to refresh\n            this.refreshProfile()\n            console.log(`load user profile from cache(and reloading asynchronously)`)\n            return profileFromCache\n          } else {\n            console.log(`User profile in LS does not match Keycloak token`)\n            localStorage.removeItem(TKIT_USER_PROFILE_LS)\n          }\n        }\n        console.log(`load user profile from API`)\n        return this.userProfileService.getCurrentUserFromBE().toPromise()\n      })\n      .then(userProfile => {\n        // const parsedToken = JSON.parse(atob(results[1].split(\".\")[1]));\n\n        console.log(`Got user profile, update state`)\n        // this.updateUserFromKeycloak(results[0], parsedToken);\n        this.userProfile = userProfile\n        this.avatarSubject = new ReplaySubject<AvatarInfo>(1)\n        this.handleAvatarUpdate(this.userProfile.avatar)\n        this.userProfileService.getUpdatedAvatar().subscribe(avatar => this.handleAvatarUpdate(avatar))\n        this.updateUserFromUserProfile(this.userProfile)\n        localStorage.setItem(TKIT_USER_PROFILE_LS, JSON.stringify(userProfile))\n        console.log(`Keycloak auth init complete`)\n        return true\n      })\n      .catch(err => {\n        console.log(`KC ERROR ${err} as json ${JSON.stringify(err)}`)\n        throw err\n      })\n  }\n\n  public init2(): Promise<boolean> {\n    console.log('kc init 4')\n    // load previous tokens, saved after successful login of keycloak success callback\n    let token = localStorage.getItem(KC_TOKEN_LS)\n    let idToken = localStorage.getItem(KC_ID_TOKEN_LS)\n    let refreshToken = localStorage.getItem(KC_REFRESH_TOKEN_LS)\n    if (token) {\n      const parsedToken = JSON.parse(atob(refreshToken.split('.')[1]))\n      if (parsedToken.exp * 1000 < new Date().getTime()) {\n        //refresh expired, drop everything\n        console.log(`Refresh token expired`)\n        token = undefined\n        refreshToken = undefined\n        idToken = undefined\n        this.clearKCStateFromLocalstorage()\n      }\n    }\n\n    this.setupEventListener()\n\n    // try constructing the KC config from values in env\n    let kcConfig: KeycloakConfig | string = {\n      url: this.configService.getProperty(CONFIG_KEY_KEYCLOAK_URL),\n      clientId:\n        this.configService.getProperty(CONFIG_KEY_KEYCLOAK_CLIENT_ID) || this.configService.getProperty('appId'),\n      realm: this.configService.getProperty(CONFIG_KEY_KEYCLOAK_REALM),\n    }\n    // If any of the required props is missing, fallback to loading KC conf from file\n    if (!kcConfig.clientId || !kcConfig.realm || !kcConfig.url) {\n      kcConfig = './assets/keycloak.json'\n    }\n\n    const enableSilentSSOCheck = this.configService.getProperty(CONFIG_KEY_KEYCLOAK_ENABLE_SILENT_SSO) === 'true'\n\n    const kcOptions: KeycloakOptions = {\n      loadUserProfileAtStartUp: false,\n      config: kcConfig,\n      initOptions: {\n        // onLoad: \"login-required\",\n        onLoad: 'check-sso',\n        checkLoginIframe: false,\n        silentCheckSsoRedirectUri: enableSilentSSOCheck ? this.getSilentSSOUrl() : undefined,\n        idToken,\n        refreshToken,\n        token,\n      },\n      enableBearerInterceptor: true,\n      bearerExcludedUrls: ['/assets'],\n    }\n\n    console.log(`INit KC with ${JSON.stringify(kcOptions, null, 2)}`)\n\n    return (\n      this.keycloakService\n        .init(kcOptions)\n        .catch(err => {\n          console.log(`kc err ${err}, try force login`)\n          return this.keycloakService.login()\n        })\n        .then(ok => {\n          console.log(`After KC init ${ok}`)\n          return this.keycloakService.getToken()\n        })\n        .then(tokenString => {\n          if (tokenString) {\n            const parsedToken = JSON.parse(atob(tokenString.split('.')[1]))\n            console.log('fetching profile')\n            let profileFromCache\n            if ((profileFromCache = localStorage.getItem(TKIT_USER_PROFILE_LS))) {\n              console.log(`load user profile from cache`)\n              //if we have already a profile in LS, check if it is the smae user\n              if (profileFromCache['email'] === parsedToken['email']) {\n                //same user, take from LS and load async to refresh\n                this.refreshProfile()\n                return JSON.parse(profileFromCache) as UserProfile\n              } else {\n                console.log(`USer in LS does tno match. clear`)\n                localStorage.removeItem(TKIT_USER_PROFILE_LS)\n              }\n            }\n            console.log(`load user profile from API`)\n            return this.userProfileService.getCurrentUserFromBE().toPromise()\n          } else {\n            console.log(`no TOKEN AAAAA`)\n          }\n        })\n        // .then(ok => {\n        //   // return Promise.all([\n        //   //   this.keycloakService.loadUserProfile(),\n        //   //   this.keycloakService.getToken(),\n        //   //   this.userProfileService.getCurrentUserFromBE().toPromise()\n        //   // ]);\n        // })\n        .catch(err => {\n          console.log(`KC ERROR ${err}`)\n          throw err\n        })\n        .then(userProfile => {\n          // const parsedToken = JSON.parse(atob(results[1].split(\".\")[1]));\n\n          console.log(`Got user profile, update`)\n          // this.updateUserFromKeycloak(results[0], parsedToken);\n          this.userProfile = userProfile\n          this.avatarSubject = new ReplaySubject<AvatarInfo>(1)\n          this.handleAvatarUpdate(this.userProfile.avatar)\n          this.userProfileService.getUpdatedAvatar().subscribe(avatar => this.handleAvatarUpdate(avatar))\n          this.updateUserFromUserProfile(this.userProfile)\n          localStorage.setItem(TKIT_USER_PROFILE_LS, JSON.stringify(userProfile))\n          console.log(`KC init complete returnint`)\n          return true\n        })\n    )\n  }\n\n  private setupEventListener() {\n    this.keycloakService.keycloakEvents$.subscribe(ke => {\n      // console.log(\n      //   `KC Event ${ke.type} token: ${\n      //     this.keycloakService.getKeycloakInstance().token\n      //   }`\n      // );\n      // we are logged in, get tokens and store them in localstorage\n      if (this.keycloakService.getKeycloakInstance().token) {\n        localStorage.setItem(KC_TOKEN_LS, this.keycloakService.getKeycloakInstance().token)\n      } else {\n        localStorage.removeItem(KC_TOKEN_LS)\n      }\n      if (this.keycloakService.getKeycloakInstance().idToken) {\n        localStorage.setItem(KC_ID_TOKEN_LS, this.keycloakService.getKeycloakInstance().idToken)\n      } else {\n        localStorage.removeItem(KC_ID_TOKEN_LS)\n      }\n      if (this.keycloakService.getKeycloakInstance().refreshToken) {\n        localStorage.setItem(KC_REFRESH_TOKEN_LS, this.keycloakService.getKeycloakInstance().refreshToken)\n      } else {\n        localStorage.removeItem(KC_REFRESH_TOKEN_LS)\n      }\n      if (ke.type === KeycloakEventType.OnAuthLogout) {\n        console.log('SSO logout nav to root')\n        this.clearKCStateFromLocalstorage()\n        this.router.navigateByUrl('/')\n      }\n    })\n  }\n\n  private clearKCStateFromLocalstorage() {\n    localStorage.removeItem(KC_ID_TOKEN_LS)\n    localStorage.removeItem(KC_TOKEN_LS)\n    localStorage.removeItem(KC_REFRESH_TOKEN_LS)\n  }\n\n  private getSilentSSOUrl() {\n    let currentBase = document.getElementsByTagName('base')[0].href\n    if (currentBase === '/') {\n      currentBase = ''\n    }\n    return `${currentBase}/assets/silent-check-sso.html`\n  }\n\n  hasRole(role: string | string[]): boolean {\n    if (typeof role === 'string') {\n      const roleString = role as string\n      return this.user.roles.map(e => e.toUpperCase()).includes(roleString.toUpperCase())\n    } else {\n      return (\n        this.user.roles\n          .map(e => e.toUpperCase())\n          .filter(item => role.map(e => e.toUpperCase()).includes(item.toUpperCase())).length > 0\n      )\n    }\n  }\n\n  getRoles(): string[] {\n    return this.user.roles\n  }\n\n  refreshProfile() {\n    this.userProfileService.getCurrentUserFromBE().subscribe(profileData => {\n      this.userProfile = profileData\n      localStorage.setItem(TKIT_USER_PROFILE_LS, JSON.stringify(profileData))\n      this.updateUserFromUserProfile(this.userProfile)\n    })\n  }\n\n  loadFullProfile(): Observable<UserProfile> {\n    return this.userProfileService.getCurrentUser()\n  }\n\n  private handleAvatarUpdate(avatarInfo: AvatarInfo) {\n    if (avatarInfo?.avatarImageUrl && avatarInfo?.avatarSmallImageUrl) {\n      this.avatarSubject.next({\n        avatarImageUrl: 'portal-api' + avatarInfo.avatarImageUrl,\n        avatarSmallImageUrl: 'portal-api' + avatarInfo.avatarSmallImageUrl\n      });\n    } else {\n      this.avatarSubject.next(null)\n    }\n  }\n\n  getAvatar(): Observable<AvatarInfo> {\n    return this.avatarSubject.asObservable()\n  }\n\n  private updateUserFromUserProfile(userProfile: UserProfile) {\n    this.user = {\n      roles: userProfile.roles,\n      userId: userProfile.id,\n      principalId: userProfile.id,\n      commonName: userProfile.person.displayName,\n      userPerson: { ...userProfile.person },\n      functions: [],\n    }\n    if (this.userProfile.memberships) {\n      this.userProfile.memberships.forEach(m => {\n        m.roleMemberships.forEach(r => {\n          r.permissions.forEach(p => {\n            this.user.functions.push(p.key)\n          })\n        })\n      })\n    }\n  }\n}\n","import { NgModule, APP_INITIALIZER } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { AUTH_SERVICE } from \"../api/injection-tokens\";\nimport { KeycloakAuthService } from \"./keycloak-auth.service\";\nimport { KeycloakAngularModule } from \"keycloak-angular\";\nimport {\n  HttpCacheInterceptorModule,\n  useHttpCacheLocalStorage\n} from \"@ngneat/cashew\";\n\n@NgModule({\n  declarations: [],\n  imports: [CommonModule, KeycloakAngularModule],\n  exports: [KeycloakAngularModule],\n  providers: [\n    {\n      provide: AUTH_SERVICE,\n      useClass: KeycloakAuthService\n    }\n  ]\n})\nexport class AuthModule {}\n","/**\r\n * 1000kit internal api\r\n * API for portal\r\n *\r\n * OpenAPI spec version: v1\r\n *\r\n *\r\n * NOTE: This class is auto generated by the swagger code generator program.\r\n * https://github.com/swagger-api/swagger-codegen.git\r\n * Do not edit the class manually.\r\n */\r\n\r\nexport interface UserPerson {\r\n  firstName?: string;\r\n  lastName?: string;\r\n  displayName?: string;\r\n  email?: string;\r\n  address?: UserPersonAddress;\r\n  phone?: UserPersonPhone;\r\n}\r\n\r\nexport interface UserPersonAddress {\r\n  street?: string;\r\n  streetNo?: string;\r\n  city?: string;\r\n  postalCode?: string;\r\n  country?: string;\r\n}\r\n\r\nexport interface UserPersonPhone {\r\n  type?: PhoneType;\r\n  number?: string;\r\n}\r\n\r\nexport enum PhoneType {\r\n  MOBILE = 'MOBILE',\r\n  LANDLINE = 'LANDLINE'\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject, Observable } from 'rxjs';\r\nimport { MenuItem } from 'primeng/api';\r\n\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class BreadcrumbService {\r\n  private itemsSource = new Subject<MenuItem[]>();\r\n\r\n  itemsHandler = this.itemsSource.asObservable();\r\n\r\n  constructor() {}\r\n\r\n  setItems(items: MenuItem[]) {\r\n    this.itemsSource.next(items);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class StateService {\n  private userSettingsActivatedTab: number;\n\n  public getUserSettingsActivatedTab(): number {\n    return this.userSettingsActivatedTab;\n  }\n  public setUserSettingsActivatedTab(tab: number): void {\n    this.userSettingsActivatedTab = tab;\n  }\n}\n","import {\r\n  Directive,\r\n  Input,\r\n  Renderer2,\r\n  ElementRef,\r\n  Inject,\r\n  ViewContainerRef,\r\n  TemplateRef,\r\n  OnInit\r\n} from '@angular/core';\r\nimport { IAuthService } from '../../api/iauth.service';\r\nimport { AUTH_SERVICE } from '../../api/injection-tokens';\r\n\r\n@Directive({ selector: '[tkAction]' })\r\nexport class ActionDirective implements OnInit {\r\n  @Input() permission: string;\r\n  @Input() loaderState: boolean;\r\n  constructor(\r\n    private renderer: Renderer2,\r\n    private el: ElementRef,\r\n    // private templateRef: TemplateRef<any>,\r\n    private viewContainer: ViewContainerRef,\r\n    @Inject(AUTH_SERVICE) private authService: IAuthService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    console.log(`Action permission ${this.permission}`);\r\n    if (!this.authService.hasPermission(this.permission)) {\r\n      console.log(`Disable btn because no perm ${this.permission}`);\r\n      this.renderer.setAttribute(this.el.nativeElement, 'disabled', 'disabled');\r\n      this.viewContainer.clear();\r\n    }\r\n  }\r\n}\r\n","import { Component, HostBinding, Input, OnDestroy, OnInit, Output } from '@angular/core'\nimport { Subscription } from 'rxjs'\nimport { BreadcrumbService } from '../../../api/services/breadcrumb.service'\nimport { EventEmitter } from '@angular/core'\nimport { MenuItem } from 'primeng/api'\n\n@Component({\n  selector: 'tk-breadcrumb',\n  templateUrl: './breadcrumb.component.html',\n  styleUrls: ['./breadcrumb.component.scss'],\n})\nexport class BreadcrumbComponent implements OnInit, OnDestroy {\n  subscription: Subscription\n\n  items: any[]\n\n  home: MenuItem\n\n  @Input()\n  disableBreadcrumbs: boolean\n  @Input()\n  fullPortalLayout: boolean\n  @Output()\n  openHelpPage: EventEmitter<any> = new EventEmitter()\n  @Output()\n  openHelpPageEditor: EventEmitter<any> = new EventEmitter()\n\n  constructor(private breadcrumbService: BreadcrumbService) {}\n\n  ngOnInit() {\n    this.subscription = this.breadcrumbService.itemsHandler.subscribe(response => {\n      this.items = response\n    })\n\n    this.home = { icon: 'pi pi-home', routerLink: '/' }\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe()\n    }\n  }\n\n  onOpenHelpPageEditor(evt: any) {\n    this.openHelpPageEditor.emit(evt)\n  }\n\n  onOpenHelpPage(evt: any) {\n    this.openHelpPage.emit(evt)\n  }\n}\n","import {\n  Directive,\n  ElementRef,\n  Input,\n  Output,\n  EventEmitter\n} from \"@angular/core\";\n\n@Directive({\n  selector: \"[tkCollapsible]\"\n})\nexport class CollapsibleDirective {\n  constructor(private el: ElementRef) {\n    console.log(\n      `collapsible directive constructor ${el.nativeElement.classList}`\n    );\n    el.nativeElement.classList.add(\"collapsible\");\n  }\n\n  @Input() isCollapsed = true;\n\n  @Output() collapsed: EventEmitter<any> = new EventEmitter();\n  @Output() expanded: EventEmitter<any> = new EventEmitter();\n\n  toggle() {\n    this.isCollapsed ? this.show() : this.hide();\n  }\n\n  show() {\n    this.isCollapsed = false;\n  }\n\n  hide() {\n    this.isCollapsed = true;\n  }\n}\n","import { Component, Input } from \"@angular/core\";\nimport { Portal } from \"../../api/model/portal\";\n\n@Component({\n  selector: \"tk-footer\",\n  styles: [\n    `\n      .footer span {\n        vertical-align: middle;\n      }\n      .footer-right-segment a {\n        margin-left: 5px;\n        margin-right: 5px;\n      }\n      .footer-right-segment {\n        margin-right: 10px;\n        float: right;\n      }\n      .footer-left-segment {\n        margin-left: 15px;\n        float: left;\n      }\n      .footer-left-segment a {\n        color: #000000;\n      }\n    `\n  ],\n  template: `\n    <div \n      class=\"footer\"\n      id=\"footer\"\n      role=\"contentinfo\"\n    >\n      <span class=\"footer-left-segment\">\n        <a\n          *ngIf=\"homePortal.homePage; else withoutHref\"\n          [href]=\"homePortal.homePage\"\n        >\n          {{ homePortal.footerLabel }}\n        </a>\n        <ng-template #withoutHref>\n          <a>\n            {{ homePortal.footerLabel }}\n          </a>\n        </ng-template>\n        -\n        <span>&copy; All Rights Reserved</span>\n      </span>\n      <div class=\"footer-right-segment\">\n        <span class=\"links\" *ngFor=\"let link of homePortal.subjectLinks\">\n          <a [href]=\"link.url\">{{ link.label }}</a>\n        </span>\n      </div>\n    </div>\n  `\n})\nexport class AppFooterComponent {\n  @Input() homePortal: Portal;\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { HelpData } from '../../api/model';\n\n\n@Component({\n  selector: 'tk-help-editor',\n  template: `\n    <p-dialog\n      header=\"Edit help item for this page\"\n      [contentStyle]=\"{ overflow: 'visible' }\"\n      [style]=\"{ width: '500px', 'max-height': '400px' }\"\n      [(visible)]=\"display\"\n      (onHide)=\"close($event)\"\n    >\n      <div class=\"modal-content\">\n        <form class=\"p-grid p-fluid\">\n          <div class=\"p-col-12\">\n            <span class=\"p-float-label\">\n              <input\n                id=\"page\"\n                type=\"text\"\n                pInputText\n                name=\"page\"\n                disabled=\"true\"\n                [(ngModel)]=\"helpItem.helpItemId\"\n              />\n              <label for=\"page\">Page Item</label>\n            </span>\n          </div>\n          <div class=\"p-col-12\">\n            <span class=\"p-float-label\">\n              <input\n                id=\"baseUrl\"\n                type=\"text\"\n                pInputText\n                name=\"baseUrl\"\n                [(ngModel)]=\"helpItem.baseUrl\"\n              />\n              <label for=\"baseUrl\">Base Url</label>\n            </span>\n          </div>\n          <div class=\"p-col-12\">\n            <span class=\"p-float-label\">\n              <input\n                id=\"relUrl\"\n                type=\"text\"\n                pInputText\n                name=\"relUrl\"\n                [(ngModel)]=\"helpItem.resourceUrl\"\n              />\n              <label for=\"relUrl\">Relative Url</label>\n            </span>\n          </div>\n        </form>\n      </div>\n      <p-footer>\n        <button\n          pButton\n          class=\"primary\"\n          value=\"Save\"\n          label=\"Save\"\n          icon=\"pi pi-check\"\n          (click)=\"save()\"\n        ></button>\n        <button\n          pButton\n          icon=\"pi pi-times\"\n          class=\"flat\"\n          value=\"Cancel\"\n          label=\"Cancel\"\n          (click)=\"display = false\"\n        ></button>\n      </p-footer>\n    </p-dialog>\n  `\n})\nexport class HelpEditDialogComponent implements OnInit {\n  @Input() display = false;\n  @Input() helpItem: HelpData;\n  @Output() closed = new EventEmitter<boolean>();\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  public save() {\n    this.closed.emit(true);\n  }\n  public close(event: any) {\n    this.closed.emit(false);\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HttpProgressLoaderService {\r\n  public isLoading = new BehaviorSubject(false);\r\n  constructor() {}\r\n}\r\n","import { Component, OnInit } from '@angular/core';\nimport { HttpProgressLoaderService } from '../http-progress-loader.service';\n\n@Component({\n  selector: 'tk-http-progress-loader',\n  template: `\n    <div class=\"wrapper\" [ngClass]=\"{ noshow: !loading }\">\n      <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"50\" cy=\"50\" r=\"45\" />\n      </svg>\n    </div>\n  `,\n  styles: [\n    `\n      :host {\n        display: block;\n        height: 36px;\n      }\n      .wrapper {\n        position: absolute;\n        opacity: 1;\n      }\n      .wrapper.noshow {\n        -webkit-transition: opacity 1s linear;\n        -moz-transition: opacity 1s linear;\n        -o-transition: opacity 1s linear;\n        transition: opacity 1s linear;\n        opacity: 0;\n      }\n      svg {\n        animation: 2s linear infinite svg-animation;\n        width: 36px;\n      }\n\n      .noshow svg {\n        animation: none;\n      }\n\n      @keyframes svg-animation {\n        0% {\n          transform: rotateZ(0deg);\n        }\n        100% {\n          transform: rotateZ(360deg);\n        }\n      }\n\n      circle {\n        animation: 1.4s ease-in-out infinite both circle-animation;\n        display: block;\n        fill: transparent;\n        stroke: #ffffff;\n        stroke-linecap: round;\n        stroke-dasharray: 283;\n        stroke-dashoffset: 280;\n        stroke-width: 10px;\n        transform-origin: 50% 50%;\n      }\n\n      @keyframes circle-animation {\n        0%,\n        25% {\n          stroke-dashoffset: 280;\n          transform: rotate(0);\n        }\n\n        50%,\n        75% {\n          stroke-dashoffset: 75;\n          transform: rotate(45deg);\n        }\n\n        100% {\n          stroke-dashoffset: 280;\n          transform: rotate(360deg);\n        }\n      }\n    `\n  ]\n})\nexport class HttpProgressLoaderComponent implements OnInit {\n  loading: boolean;\n  constructor(private loaderService: HttpProgressLoaderService) {\n    this.loaderService.isLoading.subscribe(v => {\n      this.loading = v;\n    });\n  }\n\n  ngOnInit() {}\n}\n","import {Component, EventEmitter, Inject, Input, OnInit, Output} from '@angular/core';\nimport {\n  animate,\n  state,\n  style,\n  transition,\n  trigger\n} from '@angular/animations';\nimport { AUTH_SERVICE } from '../../api/injection-tokens';\nimport { IAuthService } from '../../api/iauth.service';\nimport { UserProfile } from '../../api/model/user-profile.model';\nimport { DEFAULT_AVATAR_URL } from '../constants';\nimport { AvatarInfo } from '../../api/model/avatar-info.model';\nimport { Router } from '@angular/router';\nimport { ConfigurationService } from '../../api/configuration.service';\n\n@Component({\n  selector: 'tk-inline-profile',\n  templateUrl: 'inline-profile.component.html',\n  styleUrls: ['./inline-profile.component.scss'],\n  animations: [\n    trigger('menu', [\n      state('hiddenAnimated', style({\n        height: '0px',\n        paddingBottom: '0px',\n        overflow: 'hidden'\n      })),\n      state('visibleAnimated', style({\n        height: '*',\n        overflow: 'visible'\n      })),\n      state('visible', style({\n        opacity: 1,\n        'z-index': 100\n      })),\n      state('hidden', style({\n        opacity: 0,\n        'z-index': '*'\n      })),\n      transition('visibleAnimated => hiddenAnimated', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)')),\n      transition('hiddenAnimated => visibleAnimated', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)')),\n      transition('visible => hidden', animate('.1s linear')),\n      transition('hidden => visible', [style({transform: 'scaleY(0.8)'}), animate('.12s cubic-bezier(0, 0, 0.2, 1)')])\n    ])\n  ]\n})\nexport class AppInlineProfileComponent implements OnInit {\n  defaultAvatarUrl = DEFAULT_AVATAR_URL;\n  userProfile: UserProfile;\n  userAvatar: AvatarInfo;\n\n  @Input()\n  inlineMenuActive: boolean\n\n  @Output()\n  inlineMenuClick: EventEmitter<null> = new EventEmitter();\n\n  get displayName() {\n    const person = this.userProfile?.person;\n    if (person?.displayName) {\n      return person.displayName;\n    } else if (person?.firstName && person.lastName) {\n      return person.firstName + ' ' + person.lastName;\n    } else {\n      return this.authService.currentUser().userId;\n    }\n  }\n\n  get baseUrl() {\n    return this.configService.getPortalData().baseUrl;\n  }\n\n  get tabIndex() {\n    return !this.inlineMenuActive ? '-1' : null;\n  }\n\n  constructor(\n    @Inject(AUTH_SERVICE) private authService: IAuthService,\n    private router: Router,\n    private configService: ConfigurationService\n  ) {}\n\n  ngOnInit() {\n    this.userProfile = this.authService.currentUser();\n    this.authService\n      .getAvatar()\n      .subscribe(avatar => (this.userAvatar = avatar));\n  }\n\n  onClick(event) {\n    this.inlineMenuClick.emit(null);\n    event.preventDefault();\n  }\n\n  logout(event: Event) {\n    event.preventDefault();\n    this.authService.logout();\n  }\n}\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'tk-loading',\r\n  templateUrl: './loading.component.html',\r\n  styleUrls: ['./loading.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class LoadingComponent implements OnInit {\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n}\r\n","import { Component, OnInit } from '@angular/core';\nimport { DynamicDialogConfig, DynamicDialogRef } from 'primeng/dynamicdialog/';\n\n@Component({\n  template: `\n    <div>\n      <div class=\"dialog-content\">\n        <span\n          >No help was found for this item. Please ask your system administrator\n          to add it. The context ID for this page is below:</span\n        >\n        <span class=\"code p-my-2\">{{ pageId }}</span>\n      </div>\n      <div class=\"dialog-footer\">\n        <div class=\"p-col p-fluid\">\n          <button\n            type=\"button\"\n            pButton\n            label=\"Close\"\n            (click)=\"close()\"\n          ></button>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [\n    `\n      .code {\n        display: block;\n        clear: both;\n        padding: 0.5em;\n        font-family: monospace;\n        background-color: #ececec;\n        border-radius: 4px;\n      }\n    `\n  ]\n})\nexport class NoHelpInfoComponent implements OnInit {\n  pageId: string;\n\n  constructor(\n    public config: DynamicDialogConfig,\n    public ref: DynamicDialogRef\n  ) {\n    this.pageId = config.data.pageItem;\n  }\n\n  ngOnInit() {}\n\n  close() {\n    this.ref.close();\n  }\n}\n","import { Component, OnInit, Input, TemplateRef } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'tk-panel-header',\r\n  template: `\r\n    <div class=\"panel-header\">\r\n      <div class=\"panel-toolbar-left\">\r\n        <ng-container\r\n          *ngTemplateOutlet=\"leftToolbar ? leftToolbar : defaultLeftToolbar\"\r\n        ></ng-container>\r\n      </div>\r\n      <h1 class=\"panel-heading\">{{ header }}</h1>\r\n      <div class=\"panel-toolbar-right\">\r\n        <ng-container\r\n          *ngTemplateOutlet=\"rightToolbar ? rightToolbar : defaultRightToolbar\"\r\n        ></ng-container>\r\n      </div>\r\n    </div>\r\n\r\n    <ng-template #defaultLeftToolbar> </ng-template>\r\n    <ng-template #defaultRightToolbar> </ng-template>\r\n  `,\r\n  styles: [\r\n    `\r\n      .panel-header {\r\n        display: flex;\r\n      }\r\n      .panel-heading {\r\n        margin: 0px;\r\n        line-height: 30px;\r\n        font-weight: 100;\r\n      }\r\n      .panel-toolbar-right {\r\n        margin-left: auto;\r\n      }\r\n      .panel-toolbar-left,\r\n      .panel-toolbar-right {\r\n        display: flex;\r\n      }\r\n    `\r\n  ]\r\n})\r\nexport class PanelHeaderComponent implements OnInit {\r\n  @Input() header: string;\r\n  @Input() leftToolbar: TemplateRef<any>;\r\n  @Input() rightToolbar: TemplateRef<any>;\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n}\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnInit, Output, ViewChild } from '@angular/core'\nimport { Observable } from 'rxjs'\nimport { IAuthService } from '../../../api/iauth.service'\nimport { AUTH_SERVICE } from '../../../api/injection-tokens'\nimport { AvatarInfo } from '../../../api/model/avatar-info.model'\nimport { UserProfile } from '../../../api/model/user-profile.model'\nimport { CONFIG_KEY_TKIT_SEARCH_BASE_URL, DEFAULT_AVATAR_URL } from '../../constants'\nimport { ConfigurationService } from '../../../api/configuration.service'\nimport { StateService } from '../../../api/state.service'\nimport { Router } from '@angular/router'\nimport { animate, AnimationEvent, style, transition, trigger } from '@angular/animations'\n\n@Component({\n  selector: 'tk-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n  animations: [\n    trigger('topbarActionPanelAnimation', [\n      transition(':enter', [\n        style({ opacity: 0, transform: 'scaleY(0.8)' }),\n        animate('.12s cubic-bezier(0, 0, 0.2, 1)', style({ opacity: 1, transform: '*' })),\n      ]),\n      transition(':leave', [animate('.1s linear', style({ opacity: 0 }))]),\n    ]),\n  ],\n})\nexport class HeaderComponent implements OnInit {\n  defaultAvatarUrl = DEFAULT_AVATAR_URL\n  menuExpanded: boolean\n  menuItems: any\n  userProfile: UserProfile\n  userDisplayName: string\n  userAvatar: Observable<AvatarInfo>\n  searchUrl: string\n\n  @ViewChild('searchInput') searchInputViewChild: ElementRef\n\n  mobileTopbarActive: boolean\n\n  // TODO doesn't always work (cd related?)\n  @Input()\n  menuButtonTitle: string\n  @Output()\n  menuButtonClick: EventEmitter<any> = new EventEmitter()\n  @Output()\n  topbarItemClick: EventEmitter<any> = new EventEmitter()\n  @Output()\n  openHelpPage: EventEmitter<any> = new EventEmitter()\n  @Output()\n  openHelpPageEditor: EventEmitter<any> = new EventEmitter()\n  @Output()\n  openFeedback: EventEmitter<any> = new EventEmitter()\n  @Output()\n  openAddToLaunchpad: EventEmitter<any> = new EventEmitter()\n  @Output()\n  openSupportTicket: EventEmitter<any> = new EventEmitter()\n  @Output()\n  searchClick: EventEmitter<any> = new EventEmitter()\n  @Input()\n  profileMode: string\n  @Input()\n  isHorizontal: boolean\n  @Input()\n  activeTopbarItem: any\n  @Input()\n  disableBreadcrumbs: boolean\n  @Input()\n  fullPortalLayout: boolean\n  @Input()\n  search: boolean\n\n  @Input()\n  homeNavUrl = '/'\n  @Input()\n  homeNavTitle = 'Home'\n\n  constructor(\n    @Inject(AUTH_SERVICE) private authService: IAuthService,\n    private config: ConfigurationService,\n    private stateService: StateService,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.userProfile = this.authService.currentUser()\n    this.userAvatar = this.authService.getAvatar()\n    this.userDisplayName = this.authService.currentUser().person.displayName\n    this.searchUrl = this.config.getProperty(CONFIG_KEY_TKIT_SEARCH_BASE_URL) || '/ops/enterprise-search'\n  }\n\n  clickMenu() {\n    console.log('Menu click')\n    this.menuExpanded = !this.menuExpanded\n  }\n\n  navigateTo(path: string, event: Event) {\n    event.preventDefault()\n    path = this.config.getPortalData().baseUrl + path\n    location.assign(path)\n  }\n\n  logout(event: Event) {\n    event.preventDefault()\n    this.authService.logout()\n  }\n\n  onMenuButtonClick(e: Event) {\n    this.menuButtonClick.emit(e)\n  }\n  onTopbarItemClick(e: Event, arg: any) {\n    this.topbarItemClick.emit({ event: e, arg })\n  }\n  onOpenHelpPageEditor(e: Event) {\n    this.openHelpPageEditor.emit(e)\n  }\n  onOpenHelpPage(e: Event) {\n    this.openHelpPage.emit(e)\n  }\n  onOpenFeedback(e: Event) {\n    this.openFeedback.emit(e)\n  }\n  onAddToFavourites(e: Event) {\n    this.openAddToLaunchpad.emit(e)\n  }\n  onOpenSupportTicket(e: Event) {\n    this.openSupportTicket.emit(e)\n  }\n\n  onTopbarMobileButtonClick($event: MouseEvent) {\n    this.mobileTopbarActive = !this.mobileTopbarActive\n    $event.preventDefault()\n  }\n\n  onSearchClick(e: Event, val: boolean) {\n    this.searchClick.emit({ event: e, val })\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class MenuService {\n\n    private menuSource = new Subject<string>();\n    private resetSource = new Subject();\n\n    menuSource$ = this.menuSource.asObservable();\n    resetSource$ = this.resetSource.asObservable();\n\n    onMenuStateChange(key: string) {\n        this.menuSource.next(key);\n    }\n\n    reset() {\n        this.resetSource.next();\n    }\n}\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from '@angular/core';\nimport {animate, state, style, transition, trigger} from '@angular/animations';\nimport {MenuItem} from 'primeng/api';\nimport {MenuService} from '../../../api/services/menu.service'\nimport {Subscription} from \"rxjs\";\nimport {NavigationEnd, Router} from \"@angular/router\";\nimport {filter} from \"rxjs/operators\";\n\n@Component({\n  selector: 'tk-menu',\n  templateUrl: 'portal-menu.component.html',\n})\nexport class AppMenuComponent {\n  @Input()\n  menuActive: boolean;\n  @Input()\n  isStatic: boolean;\n  @Input()\n  isHorizontal: boolean;\n  @Input()\n  isMobile: boolean;\n  @Input()\n  isDesktop: boolean;\n  @Input()\n  isSlim: boolean;\n  @Input()\n  menuHoverActive: boolean;\n  @Input()\n  mobileMenuActive: boolean;\n\n  @Input()\n  set portalMenu(items: MenuItem[]) {\n    this.menuWithRoot = {\n      label: 'Menu',\n      icon: 'list',\n      items: items\n    }\n  }\n\n  @Output()\n  menuActiveChange: EventEmitter<boolean> = new EventEmitter();\n  @Output()\n  mobileMenuActiveChange: EventEmitter<boolean> = new EventEmitter();\n\n  menuWithRoot: MenuItem;\n\n  constructor() {}\n}\n\n@Component({\n  /* eslint-disable @angular-eslint/component-selector */\n  selector: '[tk-submenu]',\n  /* eslint-enable @angular-eslint/component-selector */\n  template: `\n    <ng-container>\n        <div *ngIf=\"root\">\n          <span class=\"layout-menuitem-text\">{{item.label}}</span>\n        </div>\n        <a [attr.href]=\"item.url\" (click)=\"itemClick($event)\" *ngIf=\"!item.routerLink || item.items\" (keydown.enter)=\"itemClick($event)\"\n           [attr.target]=\"item.target\" [attr.tabindex]=\"0\" (mouseenter)=\"onMouseEnter()\" pRipple>\n          <i [ngClass]=\"'pi-' + item.icon\" class=\"layout-menuitem-icon pi pi-fw\"></i>\n          <span class=\"layout-menuitem-text\">{{item.label}}</span>\n          <span class=\"p-badge p-component p-badge-no-gutter\" *ngIf=\"item.badge && !root\">{{item.badge}}</span>\n          <i class=\"pi pi-fw pi-angle-down layout-submenu-toggler\" *ngIf=\"item.items\"></i>\n        </a>\n        <a (click)=\"itemClick($event)\" *ngIf=\"item.routerLink && !item.items\"\n           [routerLink]=\"item.routerLink\" routerLinkActive=\"active-menuitem-routerlink\" [routerLinkActiveOptions]=\"{exact: true}\"\n           [attr.target]=\"item.target\" [attr.tabindex]=\"0\" (mouseenter)=\"onMouseEnter()\" pRipple>\n          <i [ngClass]=\"'pi-' + item.icon\" class=\"layout-menuitem-icon pi pi-fw\"></i>\n          <span class=\"layout-menuitem-text\">{{item.label}}</span>\n          <span class=\"p-badge p-component p-badge-no-gutter\" *ngIf=\"item.badge && !root\">{{item.badge}}</span>\n          <i class=\"pi pi-fw pi-angle-down layout-submenu-toggler\" *ngIf=\"item.items\"></i>\n        </a>\n        <ul *ngIf=\"(item.items && root) || (item.items && active)\" [@children]=\"root ? 'visible' : active ? 'visibleAnimated' : 'hiddenAnimated'\">\n          <ng-template ngFor let-child let-i=\"index\" [ngForOf]=\"item.items\">\n            <li tk-submenu [item]=\"child\" [index]=\"i\" [parentKey]=\"key\"></li>\n          </ng-template>\n        </ul>\n    </ng-container>\n  `,\n  host: {\n    '[class.layout-root-menuitem]': 'root || active',\n    '[class.active-menuitem]': '(active)'\n  },\n  animations: [\n    trigger('children', [\n      state('void', style({\n        height: '0px',\n        padding: '0px'\n      })),\n      state('hiddenAnimated', style({\n        height: '0px',\n        padding: '0px'\n      })),\n      state('visibleAnimated', style({\n        height: '*'\n      })),\n      state('visible', style({\n        height: '*'\n      })),\n      state('hidden', style({\n        height: '0px',\n        padding: '0px'\n      })),\n      transition('visibleAnimated => hiddenAnimated', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)')),\n      transition('hiddenAnimated => visibleAnimated', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)')),\n      transition('void => visibleAnimated, visibleAnimated => void',\n          animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))\n    ])\n  ]\n})\nexport class AppSubMenuComponent implements OnInit, OnDestroy {\n  @Input() item: MenuItem;\n\n  @Input() root: boolean;\n\n  @Input() visible: boolean;\n\n  @Input() index: number;\n\n  @Input() parentKey: string;\n\n  @Input()\n  menuActive: boolean;\n  @Input()\n  isStatic: boolean;\n  @Input()\n  isHorizontal: boolean;\n  @Input()\n  isMobile: boolean;\n  @Input()\n  isDesktop: boolean;\n  @Input()\n  isSlim: boolean;\n  @Input()\n  menuHoverActive: boolean;\n  @Input()\n  mobileMenuActive: boolean;\n\n  @Output()\n  menuActiveChange: EventEmitter<boolean> = new EventEmitter();\n  @Output()\n  mobileMenuActiveChange: EventEmitter<boolean> = new EventEmitter();\n\n  active = false;\n\n  menuSourceSubscription: Subscription;\n\n  menuResetSubscription: Subscription;\n\n  key: string;\n\n  constructor(private menuService: MenuService, private router: Router) {}\n\n  ngOnInit() {\n    this.menuSourceSubscription = this.menuService.menuSource$.subscribe(key => {\n      // deactivate current active menu\n      if (this.active && this.key !== key && key.indexOf(this.key) !== 0) {\n        this.active = false;\n      }\n    });\n\n    this.menuResetSubscription = this.menuService.resetSource$.subscribe(() => {\n      this.active = false;\n    })\n\n    // TODO Ultima11: Verify if this logic works with our setup\n    this.router.events.pipe(filter(event => event instanceof NavigationEnd))\n        .subscribe(params => {\n          if (this.isSlim) {\n            this.active = false;\n          } else {\n            if (this.item.routerLink) {\n              this.updateActiveStateFromRoute();\n            } else {\n              this.active = false;\n            }\n          }\n        });\n\n    if ((this.isHorizontal || this.isSlim) && this.item.routerLink) {\n      this.updateActiveStateFromRoute()\n    }\n\n    this.key = this.parentKey ? this.parentKey + '-' + this.index : String(this.index);\n  }\n\n  ngOnDestroy() {\n    if (this.menuSourceSubscription) {\n      this.menuSourceSubscription.unsubscribe();\n    }\n\n    if (this.menuResetSubscription) {\n      this.menuResetSubscription.unsubscribe();\n    }\n  }\n\n  updateActiveStateFromRoute() {\n    this.active = this.router.isActive(this.item.routerLink[0], !this.item.items);\n  }\n\n\n  itemClick(event: Event) {\n    // avoid processing disabled items\n    if (this.item.disabled) {\n      event.preventDefault();\n      return true;\n    }\n\n    this.menuService.onMenuStateChange(this.key)\n\n    // execute command\n    if (this.item.command) {\n      this.item.command({ originalEvent: event, item: this.item });\n    }\n\n    if (this.item.items) {\n      this.active = !this.active;\n    } else {\n      this.active = true;\n\n      if (this.isHorizontal || this.isSlim) {\n        this.menuService.reset();\n        this.menuHoverActive = false;\n      }\n\n      if (!this.isStatic) {\n        this.menuActiveChange.emit(false);\n      }\n\n      this.mobileMenuActiveChange.emit(false);\n    }\n\n    // prevent hash change\n    if (this.item.items || (!this.item.url && !this.item.routerLink)) {\n      // TODO https://github.com/primefaces/primeng/issues/8751\n      // setTimeout(() => {\n      //   this.app.layoutMenuScrollerViewChild.moveBar();\n      // }, 450);\n      event.preventDefault();\n    }\n  }\n\n  onMouseEnter() {\n    if (\n      this.root &&\n      this.menuHoverActive &&\n      (this.isHorizontal || this.isSlim) &&\n      this.isDesktop\n    ) {\n      this.menuService.onMenuStateChange(this.key);\n      this.active = true;\n    }\n  }\n\n}\n","import {\r\n  Component,\r\n  OnInit,\r\n  Input,\r\n  TemplateRef,\r\n  ViewChild,\r\n  ElementRef,\r\n  ContentChild,\r\n  Inject,\r\n  Injector\r\n} from '@angular/core';\r\nimport { CollapsibleDirective } from '../collapsible.directive';\r\nimport { IAuthService } from '../../../api/iauth.service';\r\nimport { AUTH_SERVICE } from '../../../api/injection-tokens';\r\n\r\n@Component({\r\n  selector: 'tk-portal-page',\r\n  templateUrl: './portal-page.component.html',\r\n  styleUrls: ['./portal-page.component.css']\r\n})\r\nexport class PortalPageComponent implements OnInit {\r\n  @Input() header: string;\r\n  @Input() permission: string;\r\n  @Input() helpArticleId: string;\r\n  @Input() leftToolbar: TemplateRef<any>;\r\n  @Input() rightToolbar: TemplateRef<any>;\r\n\r\n  @ContentChild(CollapsibleDirective, { read: ElementRef })\r\n  collapsible2: ElementRef;\r\n\r\n  collapsed = false;\r\n\r\n  authService: IAuthService;\r\n\r\n  constructor(private injectorObj: Injector) {\r\n    this.authService = this.injectorObj.get(AUTH_SERVICE);\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  doSomething() {\r\n    alert('Hey it worked!');\r\n  }\r\n\r\n  hasAccess() {\r\n    return this.permission\r\n      ? this.authService.hasPermission(this.permission)\r\n      : true;\r\n  }\r\n\r\n  collapse() {\r\n    this.collapsible2.nativeElement.classList.add('hidden');\r\n    this.collapsed = true;\r\n  }\r\n  expand() {\r\n    this.collapsible2.nativeElement.classList.remove('hidden');\r\n    this.collapsed = false;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { SearchTemplate } from '../model/search-template.model';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class SearchTemplateAPIService {\r\n  private readonly baseUrl: string = './portal-api/v1/searchTemplates';\r\n\r\n  private readonly httpOptions: { [key: string]: any } = {\r\n    headers: new HttpHeaders({\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json'\r\n    })\r\n  };\r\n\r\n  constructor(private httpClient: HttpClient) {}\r\n\r\n  getSearchTemplatesLegacy(\r\n    user: string,\r\n    application: string,\r\n    page: string,\r\n    includeGlobal = true\r\n  ): Observable<SearchTemplate[]> {\r\n    return this.httpClient.post<SearchTemplate[]>(\r\n      `${this.baseUrl}/search/criteria`,\r\n      {\r\n        application,\r\n        page,\r\n        user,\r\n        includeGlobal\r\n      },\r\n      this.httpOptions\r\n    );\r\n  }\r\n\r\n  getTemplateById(id: string): Observable<SearchTemplate> {\r\n    return this.httpClient.get<SearchTemplate>(\r\n      `${this.baseUrl}/${id}`,\r\n      this.httpOptions\r\n    );\r\n  }\r\n\r\n  createNewTemplate(template: SearchTemplate): Observable<SearchTemplate> {\r\n    return this.httpClient.post<SearchTemplate>(\r\n      `${this.baseUrl}`,\r\n      template,\r\n      this.httpOptions\r\n    );\r\n  }\r\n\r\n  updateTemplate(\r\n    id: string,\r\n    template: SearchTemplate\r\n  ): Observable<SearchTemplate> {\r\n    return this.httpClient.put<SearchTemplate>(\r\n      `${this.baseUrl}/${id}`,\r\n      template,\r\n      this.httpOptions\r\n    );\r\n  }\r\n\r\n  deleteTemplate(id: string): Observable<boolean> {\r\n    return this.httpClient.delete<boolean>(`${this.baseUrl}/${id}`);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpResponse } from '@angular/common/http';\nimport { stringify } from 'querystring';\nimport { HelpData } from '../model/help-data.model';\nimport { Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\nconst baseUrl = './ahm-api/internal/applications';\n\n@Injectable({ providedIn: 'root' })\nexport class HelpPageAPIService {\n  httpOptions = {\n    headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n  };\n  constructor(private httpClient: HttpClient) {}\n\n  getHelpDataItem(\n    appId: string,\n    helpItemId: string,\n    type = 'PAGE'\n  ): Observable<HelpData> {\n    return this.httpClient\n      .get<HelpData[]>(`${baseUrl}/${appId}/helpItems`, {\n        params: {\n          helpItemId\n        }\n      })\n      .pipe(map(helpItems => helpItems[0]));\n  }\n\n  getHelpDataItemLegacy(\n    appId: string,\n    context: string,\n    type = 'PAGE'\n  ): Observable<HelpData> {\n    console.log(\n      `About to go to ${baseUrl}/helpdata/${appId}/${encodeURIComponent(\n        context\n      )}`\n    );\n    return this.httpClient.post<HelpData>(\n      `${baseUrl}/helpdata/${appId}/${encodeURIComponent(context)}`,\n      `\"${type}\"`,\n      {\n        headers: {\n          'Content-Type': 'application/v1+json',\n          Accept: 'application/v1+json'\n        }\n      }\n    );\n  }\n\n  saveHelpPage(\n    appId: string,\n    helpItem: HelpData\n  ): Observable<HttpResponse<any>> {\n    if (helpItem.id) {\n      return this.httpClient.patch(\n        `${baseUrl}/${appId}/helpItems/${helpItem.id}`,\n        helpItem,\n        {\n          observe: 'response'\n        }\n      );\n    } else {\n      return this.httpClient.post(`${baseUrl}/${appId}/helpItems`, helpItem, {\n        observe: 'response'\n      });\n    }\n  }\n\n  saveHelpPageLegacy(helpItem: HelpData): Observable<HttpResponse<any>> {\n    return this.httpClient.post(`${baseUrl}/helpdata`, helpItem, {\n      headers: {\n        'Content-Type': 'application/v1+json',\n        Accept: 'application/v1+json'\n      },\n      observe: 'response'\n    });\n  }\n}\n","export interface PortalPage {\r\n  helpArticleId: string;\r\n}\r\n\r\nexport function isTkitPage(object: any): object is PortalPage {\r\n  return 'helpArticleId' in object;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ConfigurationService } from '../configuration.service';\r\n\r\nconst defaultThemeServerUrl = 'http://portal-theme-management:8080';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ThemeService {\r\n  themeServerUrl: string;\r\n\r\n  constructor(private configservice: ConfigurationService) {\r\n    this.themeServerUrl =\r\n      this.configservice.getProperty('TKIT_PORTAL_THEME_SERVER_URL') ||\r\n      defaultThemeServerUrl;\r\n  }\r\n\r\n  getThemeHref(theme: string): string {\r\n    return `${this.themeServerUrl}/themes/${theme}/${theme}.min.css`;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core'\nimport { HttpClient, HttpHeaders } from '@angular/common/http'\nimport { Observable, of } from 'rxjs'\nimport { catchError, tap } from 'rxjs/operators'\nimport { PortalMenuItem } from '../model/menu-item.model'\nimport { MessageService } from 'primeng/api'\nimport { withCache } from '@ngneat/cashew'\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MenuApiService {\n  private menuUrl = './portal-api/legacy/menustructure' // URL to web api\n\n  httpOptions = {\n    headers: new HttpHeaders({ 'Content-Type': 'application/json' }),\n  }\n\n  constructor(private http: HttpClient, private messageService: MessageService) {}\n\n  getMenuItems(portalId: String): Observable<PortalMenuItem[]> {\n    return this.http\n      .get<PortalMenuItem[]>(`${this.menuUrl}/${portalId}`, withCache())\n      .pipe(catchError(this.handleError<PortalMenuItem[]>('getMenuItems', [])))\n  }\n\n  /**\n   * Handle Http operation that failed.\n   * Let the app continue.\n   * @param operation - name of the operation that failed\n   * @param result - optional value to return as the observable result\n   */\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n      // TODO: send the error to remote logging infrastructure\n      console.error(error) // log to console instead\n\n      // TODO: better job of transforming error for user consumption\n      this.log(`${operation} failed: ${error.message}, will return ${JSON.stringify(result)}`)\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T)\n    }\n  }\n\n  /** Log a HeroService message with the MessageService */\n  private log(message: string) {\n    console.log(message)\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { FeedbackDTO } from '../model/feedback.model';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({ providedIn: 'root' })\nexport class FeedbackApiService {\n  url = './portal-api/v1/feedback/send';\n\n  constructor(private http: HttpClient) {}\n\n  public sendFeedback(feedback: FeedbackDTO) {\n    return this.http.post(this.url, feedback);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { SupportTicket } from '../model/support-ticket.model';\nimport {\n  CreateIssueRequest,\n  IssueType\n} from '../model/create-issue-request.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SupportTicketApiService {\n  private baseUrl = './portal-api/v1/supportTicket/send';\n\n  constructor(private http: HttpClient) {}\n\n  createSupportTicket(ticket: SupportTicket, appId: string) {\n    const request: CreateIssueRequest = {\n      processId: ticket.title,\n      processStep: ticket.description,\n      source: appId,\n      sourceDeepLink: window.location.href\n    };\n\n    return this.http.post(this.baseUrl, request);\n  }\n}\n","import {\n  Component,\n  AfterViewInit,\n  OnInit,\n  ViewChild,\n  ElementRef,\n  Renderer2,\n  NgZone,\n  Input,\n  Inject,\n} from '@angular/core'\nimport { ScrollPanel } from 'primeng/scrollpanel'\nimport {\n  NavigationStart,\n  NavigationEnd,\n  NavigationError,\n  Router,\n  Event,\n  ActivatedRoute,\n  ActivationEnd,\n} from '@angular/router'\nimport { HelpPageAPIService } from '../../../api/services/help-page-api.service'\nimport { MessageService, MenuItem, PrimeNGConfig } from 'primeng/api'\nimport { DialogService } from 'primeng/dynamicdialog'\nimport { HelpData, PortalMenuItem } from '../../../api/model'\nimport { NoHelpInfoComponent } from '../no-help-info/no-help-info.component'\nimport { isTkitPage } from '../../pages/PortalPage'\nimport { TranslateService } from '@ngx-translate/core'\nimport { ConfigurationService } from '../../../api/configuration.service'\nimport { ThemeService } from '../../../api/services/theme.service'\nimport { MenuApiService } from '../../../api/services/menu-api.service'\nimport { AUTH_SERVICE } from '../../../api/injection-tokens'\nimport { IAuthService } from '../../../api/iauth.service'\nimport { CONFIG_KEY_TKIT_PORTAL_DISABLE_THEME_MANAGEMENT } from '../../constants'\nimport { Portal } from '../../../api/model/portal'\nimport { OverlayPanel } from 'primeng/overlaypanel'\nimport { BreakpointObserver } from '@angular/cdk/layout'\nimport { FeedbackBasic, FeedbackDTO } from '../../../api/model/feedback.model'\nimport { FeedbackApiService } from '../../../api/services/feedback-api.service'\nimport { SupportTicket } from '../../../api/model/support-ticket.model'\nimport { SupportTicketApiService } from '../../../api/services/support-ticket-api.service'\nimport { MenuService } from \"../../../api/services/menu.service\";\n\nenum MenuOrientation {\n  STATIC,\n  OVERLAY,\n  SLIM,\n  HORIZONTAL,\n}\nconst FALLBACK_THEME_URL = './portal-lib/assets/css/fallback-theme/fallback.css'\nconst DEFAULT_BASE_URL = 'https://1000kit.atlassian.net/wiki/spaces/1000KIT/overview'\n\n@Component({\n  selector: 'tk-portal-viewport',\n  templateUrl: './portal-viewport.component.html',\n  styles: [\n    `\n      .loading-block {\n      }\n    `,\n  ],\n})\nexport class PortalViewportComponent implements AfterViewInit, OnInit {\n\n  @Input()\n  showProfileInSidebar = true\n\n  @Input()\n  enableBreadcrumbs = false\n\n  @Input()\n  fullPortalLayout = true\n\n  // TKIT\n  helpPageEditorDisplayed = false\n  addToFavouritesDisplayed = false\n  supportTicketDisplayed = false\n  currentComponent: any\n  feedbackData: FeedbackBasic = { comment: '', rating: 0, anonymous: false }\n  feedbackVisible = false\n  feedbackSubmitDisabled = false\n\n  @Input()\n  appName: string\n\n  @Input()\n  portalName = 'PORTAL'\n\n  appVersion: string\n\n  isBodyCompact: boolean\n  helpDataItem: HelpData\n  helpArticleId: string\n  sideBarColorTheme: string\n\n  // PRIMENG STUFF\n  layoutMode: MenuOrientation = MenuOrientation.STATIC\n\n  // TODO Ultima11: dark menu\n  darkMenu = false\n\n  profileMode = 'top'\n\n  menuActive: boolean\n\n  mobileMenuActive: boolean\n\n  inlineMenuActive: boolean\n\n  menuClick: boolean\n\n  inlineMenuClick: boolean\n\n  staticMenuDesktopInactive: boolean\n\n  mobileTopbarActive: boolean\n\n  showMenuButtonTitle: string\n\n  hideMenuButtonTitle: string\n\n  topbarItemClick: boolean\n\n  activeTopbarItem: any\n\n  resetMenu: boolean\n\n  menuHoverActive: boolean\n\n  searchClick = false;\n\n  search = false;\n\n  documentClickListener: () => void\n\n  @ViewChild('layoutContainer')\n  layoutContainerViewChild: ElementRef\n\n  @ViewChild('scrollPanel')\n  layoutMenuScrollerViewChild: ScrollPanel\n\n  @ViewChild('feedbackPanel')\n  feedbackPanel: OverlayPanel\n\n  preloader = true\n  portalMenuItems: MenuItem[]\n  lang: string\n  portalHomeMenuItem: MenuItem = { url: '/', label: 'Home' }\n  initError: any\n\n  mainPortal: Portal\n\n  get menuButtonTitle(): string {\n    return (\n        this.isDesktop() && this.menuActive || this.isMobile() && this.mobileMenuActive\n    ) ? this.hideMenuButtonTitle : this.showMenuButtonTitle;\n  }\n\n  constructor(\n    public renderer2: Renderer2,\n    public zone: NgZone,\n    private router: Router,\n    private route: ActivatedRoute,\n    private helpDataService: HelpPageAPIService,\n    private messageService: MessageService,\n    private dialogService: DialogService,\n    private breakpointObserver: BreakpointObserver,\n    private translate: TranslateService,\n    private themeService: ThemeService,\n    private menuService: MenuService,\n    private menuApiService: MenuApiService,\n    private configService: ConfigurationService,\n    private feedbackApiService: FeedbackApiService,\n    private supportTicketApiService: SupportTicketApiService,\n    private primeNgConfig: PrimeNGConfig,\n    @Inject(AUTH_SERVICE) private auth: IAuthService\n  ) {}\n\n  applyPadding() {\n    if (this.isBodyCompact) {\n      this.addClass(document.body, 'compact')\n    } else {\n      this.removeClass(document.body, 'compact')\n    }\n  }\n\n  setSidebarColorTheme() {\n    if (this.sideBarColorTheme === 'DARK') {\n      this.darkMenu = true\n    } else if (this.sideBarColorTheme === 'LIGHT') {\n      this.darkMenu = false\n    }\n  }\n\n  ngOnInit() {\n    this.primeNgConfig.ripple = true\n    this.initError = this.configService.error\n    if (this.initError) {\n      this.preloader = false\n      return\n    }\n    this.mainPortal = this.configService.getPortalData()\n    if (this.auth.currentUser().accountSettings.layoutAndThemeSettings) {\n      this.isBodyCompact = this.auth.currentUser().accountSettings.layoutAndThemeSettings.compactView ?? false\n      this.applyPadding()\n      // this.sideBarColorTheme = this.auth.currentUser().accountSettings.layoutAndThemeSettings.menuTheme ?? 'LIGHT'\n      if (this.auth.currentUser().accountSettings.layoutAndThemeSettings.sidebarViewMode) {\n        this.layoutMode =\n          MenuOrientation[this.auth.currentUser().accountSettings.layoutAndThemeSettings.sidebarViewMode]\n      } else {\n        this.layoutMode = MenuOrientation['STATIC']\n      }\n    }\n\n    this.menuActive = this.isStatic() && !this.isMobile() && this.fullPortalLayout;\n\n    this.validateRequiredInputs()\n\n    this.setSidebarColorTheme()\n    this.setCustomTheme()\n\n    if (this.fullPortalLayout) {\n      this.loadMenuItems()\n    }\n\n    this.router.events.subscribe((event: Event) => {\n      // console.log(`nav event ${event.constructor.name}`);\n      if (event instanceof NavigationStart) {\n        // Show loading indicator\n      }\n\n      if (event instanceof ActivationEnd) {\n        // this.helpArticleId = event.snapshot.pathFromRoot\n        //   .map(i => (i.routeConfig ? i.routeConfig.path : ''))\n        //   .join('/');\n        // console.log(`aftger event ${this.helpArticleId}`);\n      }\n\n      if (event instanceof NavigationEnd && this.fullPortalLayout) {\n        // Hide loading indicator\n\n        if (this.currentComponent) {\n          let helpPageIdentifier\n          if (isTkitPage(this.currentComponent)) {\n            helpPageIdentifier = this.currentComponent.helpArticleId\n          } else {\n            helpPageIdentifier = event.url || this.currentComponent.constructor.name\n            console.log(`Page does not have helpItemId, using router path ${helpPageIdentifier}`)\n          }\n          this.helpArticleId = helpPageIdentifier\n          this.helpDataItem = {\n            helpItemId: helpPageIdentifier,\n            appId: this.appName,\n            baseUrl: DEFAULT_BASE_URL,\n            resourceUrl: '',\n          }\n          this.loadHelpArticle()\n        }\n      }\n\n      if (event instanceof NavigationError) {\n        // Hide loading indicator\n\n        // Present error to user\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Navigation error',\n          detail: `Route ${event.url} not recognized`,\n        })\n      }\n      // console.log(`navigate event ${event}`);\n      this.setSidebarColorTheme()\n    })\n\n    this.translate.get(['GENERAL.SHOW_MENU', 'GENERAL.HIDE_MENU']).subscribe(text => {\n        this.hideMenuButtonTitle = text['GENERAL.HIDE_MENU']\n        this.showMenuButtonTitle = text['GENERAL.SHOW_MENU']\n    })\n  }\n\n  ngAfterViewInit() {\n    this.documentClickListener = this.renderer2.listen('body', 'click', () => {\n      if (!this.topbarItemClick) {\n        this.activeTopbarItem = null;\n      }\n\n      if (!this.menuClick && (this.isHorizontal() || this.isSlim())) {\n        this.menuService.reset();\n      }\n\n      if (!this.menuClick) {\n        if (this.mobileMenuActive) {\n          this.mobileMenuActive = false;\n        }\n\n        if (this.isOverlay()) {\n          this.menuActive = false;\n        }\n\n        this.menuHoverActive = false;\n        this.unblockBodyScroll();\n      }\n\n      if (!this.searchClick) {\n        this.search = false;\n      }\n\n      if (this.inlineMenuActive && !this.inlineMenuClick) {\n        this.inlineMenuActive = false;\n      }\n\n      this.inlineMenuClick = false;\n      this.searchClick = false;\n      this.topbarItemClick = false;\n      this.menuClick = false;\n    });\n  }\n\n  loadMenuItems() {\n    const portalId = this.configService.getProperty('TKIT_PORTAL_ID')\n    const stripForbiddenStr = this.configService.getProperty('TKIT_PORTAL_DISABLE_MENU_PERMISSIONS')\n    const stripForbidden = stripForbiddenStr === 'true'\n    this.configService.lang$.subscribe(data => (this.lang = data)).unsubscribe()\n\n    if (!portalId) {\n      this.portalMenuItems = [{ label: 'Failed to load menu', icon: 'dashboard', routerLink: ['/'] }]\n    } else if (this.fullPortalLayout) {\n      this.menuApiService.getMenuItems(portalId).subscribe(data => {\n        let serverMenuItems: MenuItem[] = []\n        const mainMenuItem = data.find(item => item.key === 'PORTAL_MAIN_MENU')\n        this.portalHomeMenuItem = this.toPrimeNGMenuItem(data.find(item => item.key === 'PORTAL_MENU_HOME'))\n        if (!this.portalHomeMenuItem) {\n          this.portalHomeMenuItem = { url: '/', label: 'Home' }\n        }\n        if (mainMenuItem) {\n          serverMenuItems = mainMenuItem.children\n            .filter(\n              item => (!stripForbidden || this.auth.hasPermission(`${item.permissionObject}#VIEW`)) && !item.disabled\n            )\n            .sort((a: PortalMenuItem, b: PortalMenuItem) => a.position - b.position)\n            .map(item => this.toPrimeNGMenuItem(item))\n        }\n        this.portalMenuItems = [\n          // { label: 'Portal Home', icon: 'dashboard', routerLink: ['/'] },\n          ...serverMenuItems,\n        ]\n      })\n    }\n  }\n\n  private toPrimeNGMenuItem(item: PortalMenuItem, level = 1): MenuItem {\n    if (!item) {\n      return undefined\n    }\n    let isAbsoluteLink = item.url && item.url.match(/^(http|https)/g) !== null\n    const currentHost = document.getElementsByTagName('base')[0].href\n    let routerLink = undefined\n    const label = item.i18n[this.lang] || item.name\n    if (this.appName === item.applicationId) {\n      // it is a local link, set routerlink\n      if (isAbsoluteLink && item.url.includes(currentHost)) {\n        routerLink = [item.url.substr(currentHost.length - 1)]\n        isAbsoluteLink = false\n      } else {\n        const path = currentHost.substring(window.location.origin.length)\n        if (path.length >= 1 && item.url.startsWith(path)) {\n          // its a link within same  path\n          routerLink = [item.url.substr(path.length - 1)]\n          isAbsoluteLink = false\n        }\n      }\n    }\n    let badgeIcon = level === 1 ? 'menu' : 'subject'\n    if (item.badge !== '' && item.badge) {\n      badgeIcon = item.badge\n    }\n    return {\n      label,\n      // badge: '',\n      icon: badgeIcon,\n      command: e => {\n        e.originalEvent.preventDefault()\n        if (item.children.length === 0) {\n          item.portalExit\n            ? window.open(item.url, '_blank')\n            : routerLink\n            ? this.router.navigate(routerLink)\n            : window.location.assign(item.url)\n        }\n      },\n      url: item.url,\n      routerLinkActiveOptions: [{ exact: false }],\n      items:\n        item.children.length > 0\n          ? item.children\n              .filter(child => !child.disabled)\n              .sort((a: PortalMenuItem, b: PortalMenuItem) => a.position - b.position)\n              .map(child => this.toPrimeNGMenuItem(child, level + 1))\n          : undefined,\n    }\n  }\n\n  validateRequiredInputs() {\n    if (!this.appName) {\n      throw new Error(`You must specify [appName] attribute on <tk-portal-viewport> component.`)\n    }\n  }\n\n  loadHelpArticle() {\n    this.helpDataService.getHelpDataItem(this.appName, this.helpArticleId).subscribe(\n      data => {\n        if (data) {\n          this.helpDataItem = data\n        }\n      },\n      error => console.log('Failed to load help article')\n    )\n  }\n\n  public onHelpArticleEditorClosed(changed: boolean) {\n    if (changed) {\n      this.helpDataService.saveHelpPage(this.appName, this.helpDataItem).subscribe(\n        res => {\n          console.log(`Help item saved: ${res.status}`)\n          this.helpPageEditorDisplayed = false\n\n          this.messageService.add({\n            severity: 'info',\n            summary: 'Help Item definition updated',\n          })\n          this.loadHelpArticle()\n        },\n        error => {\n          console.log(`Could not save help item`)\n          this.messageService.add({\n            severity: 'error',\n            summary: 'Help Item definition update failed',\n            detail: `Server error: ${error.status}`,\n          })\n        }\n      )\n    } else {\n      this.helpPageEditorDisplayed = false\n    }\n  }\n\n  public onAddToLaunchpadClosed(event) {\n    this.addToFavouritesDisplayed = false\n  }\n\n  public openHelpPage(event) {\n    if (this.helpDataItem.id) {\n      const url = this.helpDataItem.baseUrl\n        ? `${this.helpDataItem.baseUrl}/${this.helpDataItem.resourceUrl}`\n        : this.helpDataItem.resourceUrl\n      console.log(`navigate to help page: ${url}`)\n      const win = window.open(url, '_blank')\n      win.focus()\n    } else {\n      this.dialogService.open(NoHelpInfoComponent, {\n        header: 'No help item defined for this page',\n        width: '400px',\n        data: {\n          pageItem: this.helpArticleId,\n        },\n      })\n    }\n    event.preventDefault()\n  }\n\n  public openHelpPageEditor(event) {\n    this.helpPageEditorDisplayed = true\n    event.preventDefault()\n  }\n\n  public openFeedback(event) {\n    if (this.breakpointObserver.isMatched('(max-width: 1024px)')) {\n      this.feedbackVisible = true\n    } else {\n      this.feedbackPanel.toggle(event)\n    }\n    event.preventDefault()\n  }\n\n  public openAddToLaunchpad(event) {\n    this.addToFavouritesDisplayed = true\n    event.preventDefault()\n  }\n\n  public openSupportTicket(event) {\n    this.supportTicketDisplayed = true\n    event.preventDefault()\n  }\n\n  public onSubmitFeedback(feedback: FeedbackBasic) {\n    this.feedbackSubmitDisabled = true\n    const feedbackDTO: FeedbackDTO = {\n      rating: feedback.rating,\n      comment: feedback.comment,\n      appId: this.appName,\n      userId: feedback.anonymous ? 'anonymous' : this.auth.currentUser().userId,\n    }\n    this.feedbackApiService.sendFeedback(feedbackDTO).subscribe(\n      () => {\n        this.closeFeedback()\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Feedback successfully sent',\n        })\n      },\n      () => {\n        this.closeFeedback()\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Sending feedback failed',\n          detail: 'Please try again later',\n        })\n      }\n    )\n  }\n\n  closeFeedback() {\n    this.feedbackSubmitDisabled = false\n    this.feedbackVisible = false\n    this.feedbackPanel.hide()\n  }\n\n  public onSubmitTicket(ticket: SupportTicket) {\n    this.supportTicketApiService.createSupportTicket(ticket, this.appName).subscribe(\n      () => {\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Success!',\n          detail: 'Ticket successfully submitted',\n        })\n      },\n      () =>\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Error!',\n          detail: 'Error occured while submitting a ticket',\n        })\n    )\n  }\n\n  public clearFeedback() {\n    this.feedbackData = { comment: '', rating: 0, anonymous: false }\n  }\n\n  addClass(element, className) {\n    if (element.classList) {\n      element.classList.add(className)\n    } else {\n      element.className += ' ' + className\n    }\n  }\n\n  removeClass(element, className) {\n    if (element.classList) {\n      element.classList.remove(className)\n    } else {\n      element.className = element.className.replace(\n          new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'),\n          ' '\n      )\n    }\n  }\n\n  onMenuButtonClick(event) {\n    this.menuActive = !this.menuActive;\n    this.menuClick = true;\n\n    if (!this.isDesktop()) {\n      this.mobileMenuActive = !this.mobileMenuActive;\n      if (this.mobileMenuActive) {\n        this.blockBodyScroll();\n      } else {\n        this.unblockBodyScroll();\n      }\n    }\n\n    event.preventDefault()\n  }\n\n  onMenuClick($event) {\n    this.menuClick = true\n\n    if (this.inlineMenuActive && !this.inlineMenuClick) {\n      this.inlineMenuActive = false;\n    }\n  }\n\n  onInlineMenuClick(event) {\n    this.inlineMenuActive = !this.inlineMenuActive;\n    this.inlineMenuClick = true;\n  }\n\n  onTopbarMobileButtonClick(event) {\n    this.mobileTopbarActive = !this.mobileTopbarActive\n    event.preventDefault()\n  }\n\n  onTopbarItemClick(event, item) {\n    this.topbarItemClick = true\n\n    if (this.activeTopbarItem === item) {\n      this.activeTopbarItem = null\n    } else {\n      this.activeTopbarItem = item\n    }\n\n    if (item === 'search') {\n      this.search = !this.search;\n      this.searchClick = !this.searchClick;\n    }\n\n    event.preventDefault()\n  }\n\n  onSearchClick(event, val: boolean) {\n    this.searchClick = val\n    this.search = val\n    event.preventDefault()\n  }\n\n  isDesktop() {\n    return window.innerWidth > 991\n  }\n\n  isMobile() {\n    return window.innerWidth <= 991\n  }\n\n  isStatic() {\n    return this.layoutMode === MenuOrientation.STATIC\n  }\n\n  isOverlay() {\n    return this.layoutMode === MenuOrientation.OVERLAY\n  }\n\n  isHorizontal() {\n    return this.layoutMode === MenuOrientation.HORIZONTAL\n  }\n\n  isSlim() {\n    return this.layoutMode === MenuOrientation.SLIM\n  }\n\n  changeToStaticMenu() {\n    this.layoutMode = MenuOrientation.STATIC\n  }\n\n  changeToOverlayMenu() {\n    this.layoutMode = MenuOrientation.OVERLAY\n  }\n\n  changeToHorizontalMenu() {\n    this.layoutMode = MenuOrientation.HORIZONTAL\n  }\n\n  changeToSlimMenu() {\n    this.layoutMode = MenuOrientation.SLIM\n  }\n\n  blockBodyScroll(): void {\n    if (document.body.classList) {\n      document.body.classList.add('blocked-scroll');\n    } else {\n      document.body.className += ' blocked-scroll';\n    }\n  }\n\n  unblockBodyScroll(): void {\n    if (document.body.classList) {\n      document.body.classList.remove('blocked-scroll');\n    } else {\n      document.body.className = document.body.className.replace(new RegExp('(^|\\\\b)' +\n          'blocked-scroll'.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n    }\n  }\n\n  private setCustomTheme() {\n    const disablePortalThemeMgmt =\n      this.configService.getProperty(CONFIG_KEY_TKIT_PORTAL_DISABLE_THEME_MANAGEMENT) === 'true'\n    if (disablePortalThemeMgmt) {\n      console.log(\n        `Portal theme mgmt is disabled. To enable it, remove env var: ${CONFIG_KEY_TKIT_PORTAL_DISABLE_THEME_MANAGEMENT}`\n      )\n      this.preloader = false\n      return\n    }\n    console.log(`Setting theme dynamically`)\n    let customTheme = this.configService.getPortalData() && this.configService.getPortalData().themeName\n\n    if (!customTheme) {\n      const themeFromEnv = this.configService.getProperty('TKIT_PORTAL_DEFAULT_THEME')\n      if (!themeFromEnv) {\n        console.log(`Custom theme not defined, or portal data not available, setting default theme CG`)\n        customTheme = 'cg'\n      } else {\n        console.log(\n          `Custom theme not defined, or portal data not available, setting theme from 'TKIT_PORTAL_DEFAULT_THEME' var: ${themeFromEnv} `\n        )\n        customTheme = themeFromEnv\n      }\n    }\n\n    if (document.getElementById('theme-css')) {\n      const themeLinkToRemove: HTMLElement = document.getElementById('theme-css')\n      themeLinkToRemove.remove()\n    }\n    const themeLink = document.createElement('link')\n    themeLink.setAttribute('id', 'theme-css')\n    themeLink.setAttribute('rel', 'stylesheet')\n    themeLink.setAttribute('type', 'text/css')\n    themeLink.onload = () => {\n      console.log('theme load done')\n      this.preloader = false\n    }\n    themeLink.onerror = () => {\n      console.log(`Failed to load theme assets for '${customTheme}'`)\n      themeLink.setAttribute('href', FALLBACK_THEME_URL)\n      this.preloader = false\n    }\n    themeLink.setAttribute('href', this.themeService.getThemeHref(customTheme))\n    document.getElementsByTagName('head')[0].appendChild(themeLink)\n  }\n}\n","import { Injectable, OnInit } from '@angular/core';\nimport { Observable, isObservable } from 'rxjs';\n\n@Injectable()\nexport abstract class PortalSearchPage<T, C> implements OnInit {\n  searchInProgress: boolean;\n  public results: T[];\n\n  public criteria: C;\n  abstract doSearch(): T[] | Observable<T[]>;\n  abstract getDefaultCriteria(): C;\n\n  search() {\n    this.searchInProgress = true;\n    const resultIntermediate = this.doSearch();\n    if (isObservable(resultIntermediate)) {\n      resultIntermediate.subscribe(data => {\n        this.results = data;\n        this.searchInProgress = false;\n      });\n    } else {\n      this.results = resultIntermediate;\n      this.searchInProgress = false;\n    }\n  }\n\n  reset() {\n    this.results = [];\n    this.criteria = this.getDefaultCriteria();\n  }\n\n  ngOnInit() {\n    this.reset();\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Injector,\n  Input,\n  Output,\n  Inject,\n  Optional,\n  SkipSelf\n} from '@angular/core';\nimport { SelectItem } from 'primeng/api';\nimport { MessageService } from 'primeng/api';\nimport { SearchTemplate } from '../../../api/model/search-template.model';\nimport { PortalPageComponent } from '../portal-page/portal-page.component';\nimport { SearchTemplateAPIService } from '../../../api/services/search-template-api.service';\nimport { AUTH_SERVICE } from '../../../api/injection-tokens';\nimport { IAuthService } from '../../../api/iauth.service';\nimport { PortalViewportComponent } from '../portal-viewport/portal-viewport.component';\nimport { PortalSearchPage } from '../../pages/PortalSearchPage';\n\nconst reISO = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*))(?:Z|(\\+|-)([\\d|:]*))?$/;\nconst dateReviver = function(key, value) {\n  if (typeof value === 'string') {\n    const a = reISO.exec(value);\n    if (a) {\n      return new Date(value);\n    }\n  }\n  return value;\n};\n@Component({\n  selector: 'tk-portal-search-page',\n  templateUrl: './portal-search-page.component.html',\n  styleUrls: ['./portal-search-page.component.scss']\n})\nexport class PortalSearchPageComponent extends PortalPageComponent {\n  @Input() searchCriteriaTemplatesEnabled = true;\n  @Input() enableSearchToolbar = false;\n  @Output() onSearch: EventEmitter<any> = new EventEmitter();\n  activeSearchTemplate: SearchTemplate;\n  activeSearchTemplateId: string;\n\n  @Input()\n  private pageName: string;\n\n  searchTemplateOptions: SelectItem[];\n\n  newTemplateName: string;\n  newTemplateDefaultFlag = false;\n\n  constructor(\n    injectorChild: Injector,\n    private messageService: MessageService,\n    private searchTemplateApi: SearchTemplateAPIService,\n    @Inject(AUTH_SERVICE) private auth: IAuthService,\n    private viewPort: PortalViewportComponent,\n    @SkipSelf() @Optional() public searchPage: PortalSearchPage<any, any>\n  ) {\n    super(injectorChild);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.validatedInputs();\n    if (this.pageName) {\n      this.fetchSearchTemplates();\n    }\n  }\n\n  onSearchTemplateSelection(event: any) {\n    if (event.value) {\n      this.activeSearchTemplateId = event.value;\n      this.searchTemplateApi\n        .getTemplateById(this.activeSearchTemplateId)\n        .subscribe(template => {\n          this.activeSearchTemplate = template;\n          // TODO allow override\n          this.searchPage.criteria = JSON.parse(\n            template.criteriaAsJson,\n            dateReviver\n          );\n        });\n    } else {\n      this.activeSearchTemplateId = null;\n      this.activeSearchTemplate = null;\n    }\n  }\n\n  private fetchSearchTemplates() {\n    this.searchTemplateApi\n      .getSearchTemplatesLegacy(\n        this.auth.currentUser().userId,\n        this.viewPort.appName,\n        this.pageName\n      )\n      .subscribe(templates => {\n        this.searchTemplateOptions = [\n          { value: null, label: 'Pick saved template' },\n          ...templates.map(t => ({ label: t.name, value: t.id }))\n        ];\n\n        // if a default template exists preselect it\n        const defaultTemplate = templates.find(t => t.defaultTemplate);\n        if (defaultTemplate) {\n          this.onSearchTemplateSelection({ value: defaultTemplate.id });\n        }\n      });\n  }\n\n  validatedInputs() {\n    if (!this.searchPage) {\n      console.error(\n        `<tk-search-page> can only be used in a component that extends \"PortalSearchPage\". See README.MD chapter #Generic Search Page`\n      );\n    }\n    if (!this.pageName) {\n      console.warn(\n        `You did not specify [pageName] attribute for search page component. Without it, some features will not work.`\n      );\n    }\n  }\n\n  triggerSearch() {\n    console.log(`Click search`);\n    this.onSearch.emit(1);\n  }\n\n  triggerCriteriaTemplateUpdate() {\n    console.log('update tempalte');\n    this.activeSearchTemplate.criteriaAsJson = JSON.stringify(\n      this.searchPage.criteria\n    );\n    this.searchTemplateApi\n      .updateTemplate(this.activeSearchTemplateId, this.activeSearchTemplate)\n      .subscribe(savedTemplate => {\n        this.activeSearchTemplate = savedTemplate;\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Search template updated'\n        });\n      });\n  }\n\n  triggerCriteriaTemplateSave(event: Event, op: any) {\n    this.searchTemplateApi\n      .createNewTemplate({\n        application: this.viewPort.appName,\n        page: this.pageName,\n        user: this.auth.currentUser().userId,\n        name: this.newTemplateName,\n        defaultTemplate: this.newTemplateDefaultFlag,\n        criteriaAsJson: JSON.stringify(this.searchPage.criteria)\n      })\n      .subscribe(savedTemplate => {\n        this.activeSearchTemplate = savedTemplate;\n        this.searchTemplateOptions.push({\n          label: savedTemplate.name,\n          value: savedTemplate.id\n        });\n        this.activeSearchTemplateId = savedTemplate.id;\n        op.hide();\n        this.newTemplateDefaultFlag = false;\n        this.newTemplateName = undefined;\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Search template saved'\n        });\n      });\n  }\n  triggerCriteriaTemplateDelete() {\n    this.searchTemplateApi\n      .deleteTemplate(this.activeSearchTemplateId)\n      .subscribe(ok => {\n        this.messageService.add({\n          severity: 'info',\n          summary: 'Search template deleted'\n        });\n\n        this.searchTemplateOptions.splice(\n          this.searchTemplateOptions.findIndex(\n            i => i.value == this.activeSearchTemplateId\n          ),\n          1\n        );\n        this.activeSearchTemplateId = undefined;\n        this.activeSearchTemplate = undefined;\n      });\n  }\n}\n","import { Directive, Input, Renderer2, ElementRef, Inject, ViewContainerRef, TemplateRef, OnInit } from '@angular/core';\r\nimport { IAuthService } from '../../api/iauth.service';\r\nimport { AUTH_SERVICE } from '../../api/injection-tokens';\r\n\r\n@Directive({ selector: '[tkIfPerm]' })\r\nexport class TkIfPermDirective implements OnInit {\r\n  permission: string;\r\n  @Input() loaderState: boolean;\r\n  constructor(\r\n    private templateRef: TemplateRef<any>,\r\n    private viewContainer: ViewContainerRef,\r\n    @Inject(AUTH_SERVICE) private authService: IAuthService\r\n  ) {}\r\n\r\n  @Input()\r\n  set tkIfPerm(permission: string) {\r\n    this.permission = permission;\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (!this.authService.hasPermission(this.permission)) {\r\n      console.log(`Hide element because no perm ${this.permission}`);\r\n      this.viewContainer.clear();\r\n    } else {\r\n      this.viewContainer.createEmbeddedView(this.templateRef);\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core';\n// TODO is <a> without click actually OK? How about a11y?\n@Component({\n  selector: 'tk-toolbar-item',\n  template: `\n    <a\n      pRipple\n      *ngIf=\"link\"\n      class=\"toolbar-item\"\n      [href]=\"link\"\n      [target]=\"linkTarget\"\n      [rel]=\"linkRel\"\n      title=\"{{ title }}\"\n      role=\"button\"\n      ><i class=\"pi pi-{{icon}}\"></i>\n    </a>\n    <a\n      pRipple\n      *ngIf=\"!link\"\n      href=\"javascript:void(0)\"\n      class=\"toolbar-item\"\n      title=\"{{ title }}\"\n      role=\"button\"\n      ><i class=\"pi pi-{{icon}}\"></i>\n    </a>\n  `,\n  styles: [\n    `\n      .toolbar-item {\n        color: #757575;\n        display: inline-block;\n        padding: 3px;\n        text-align: center;\n        font-size: 1.3em;\n        transition: all 0.4s;\n      }\n      .toolbar-item i {\n        transition: all 0.4s;\n        font-size: 1.5rem;\n        padding: 0.2em;\n      }\n      .toolbar-item:hover {\n        background-color: #e8e8e8;\n      }\n      .toolbar-item:focus {\n        background-color: #e8e8e8;\n      }\n\n    `\n  ]\n})\nexport class ToolbarItemComponent implements OnInit {\n  @Input()\n  title: string;\n\n  @Input()\n  permission: string;\n\n  @Input() link: string;\n  @Input() linkTarget: string;\n  @Input() linkRel: string;\n  @Input()\n  action: Function;\n\n  @Input()\n  icon: string;\n\n  constructor() {}\n\n  ngOnInit() {}\n}\n","import { HttpInterceptor, HttpHandler, HttpRequest, HttpEvent, HttpResponse } from '@angular/common/http'\nimport { Observable } from 'rxjs'\nimport { tap } from 'rxjs/operators'\nimport { HttpProgressLoaderService } from './http-progress-loader.service'\nimport { Injectable } from '@angular/core'\n\n@Injectable({ providedIn: 'root' })\nexport class HttpProgressInterceptor implements HttpInterceptor {\n  private requests: HttpRequest<any>[] = []\n  constructor(private loaderService: HttpProgressLoaderService) {}\n\n  removeRequest(req: HttpRequest<any>) {\n    const i = this.requests.indexOf(req)\n    if (i >= 0) {\n      this.requests.splice(i, 1)\n    }\n    this.loaderService.isLoading.next(this.requests.length > 0)\n  }\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const started = Date.now()\n    this.requests.push(req)\n    this.loaderService.isLoading.next(true)\n    return next.handle(req).pipe(\n      tap(\n        event => {\n          if (event instanceof HttpResponse) {\n            const elapsed = Date.now() - started\n            console.log(\n              `Request for ${req.urlWithParams} took ${elapsed} ms with result ${event.status}. ${this.requests.length}`\n            )\n            this.removeRequest(req)\n          }\n        },\n        error => {\n          console.log(`Http err: status ${error.status} ${JSON.stringify(error)}`)\n          this.removeRequest(req)\n        }\n      )\n    )\n  }\n}\n","import { ConfigurationService } from '../api/configuration.service'\nimport { TranslateService } from '@ngx-translate/core'\nimport { IAuthService } from '../api/iauth.service'\n\nexport function tkitPortalInitializer(\n  configService: ConfigurationService,\n  translateService: TranslateService,\n  authService: IAuthService\n): () => Promise<any> {\n  const startTime = new Date().getTime()\n  console.log(`Start tkit portal module initializer`)\n  return (): Promise<any> =>\n    configService\n      .init()\n      .then(() => console.log('Config initialized, next: init auth'))\n      .then(() => authService.init())\n      .then(res => {\n        console.log(`Auth service init resolved ${res}, next: set default lang`)\n        const availLangsCSV = configService.getProperty('SUPPORTED_LANGUAGES') || 'en,de'\n        const availableLangs = availLangsCSV.split(',').map(l => l.trim())\n        let lang =\n          authService.currentUser().accountSettings?.localeAndTimeSettings?.locale || translateService.getBrowserLang()\n        lang = availableLangs.includes(lang) ? lang : 'de'\n        translateService.use(lang)\n        configService.setLang(lang)\n        const duration = new Date().getTime() - startTime\n        console.log(`Tkit portal module initializer finished in ${(duration / 1000).toFixed(2)}s`)\n\n        return true\n      })\n      .catch(err => {\n        console.log(`\n      #####################################\n      Tkit portal lib initialization failed\n      #####################################\n      `)\n        configService.error = err\n        //throw err;\n      })\n}\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { SearchItemDTO } from '../model/search-item.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class PortalItemService {\r\n  private readonly url = 'portal-api/v1/portalItems/search';\r\n  constructor(private readonly http: HttpClient) {}\r\n\r\n  searchForServices(query: string, portalId: string, count?: number): Observable<SearchItemDTO[]> {\r\n    let params = new HttpParams();\r\n    if (query) {\r\n      params = params.set('query', query);\r\n    }\r\n    if (portalId) {\r\n      params = params.set('portal-id', portalId);\r\n    }\r\n    if (count) {\r\n      params = params.set('count', count.toString());\r\n    }\r\n    return this.http.get<SearchItemDTO[]>(this.url, {\r\n      params\r\n    });\r\n  }\r\n}\r\n","export enum SearchItemType {\r\n  APPLICATION = 'APPLICATION',\r\n  OPEN_SEARCH = 'OPEN_SEARCH'\r\n}\r\n","import { AfterViewInit, Component, ElementRef, EventEmitter, OnInit, Output, ViewChild } from '@angular/core'\nimport { PortalItemService } from '../../../api/services/portal-item.service'\nimport { SearchItemDTO } from '../../../api/model/search-item.model'\nimport { FormControl } from '@angular/forms'\nimport { SearchItemType } from '../../../api/model/search-item-type'\nimport { ConfigurationService } from '../../../api/configuration.service'\nimport { CONFIG_KEY_TKIT_SEARCH_BASE_URL } from '../../constants'\nimport { TranslateService } from '@ngx-translate/core'\nimport { MessageService } from 'primeng/api'\nimport { AutoComplete } from 'primeng/autocomplete'\n\n@Component({\n  selector: 'tk-search-bar',\n  templateUrl: './search-bar.component.html',\n  styleUrls: ['./search-bar.component.scss'],\n})\nexport class SearchBarComponent implements OnInit, AfterViewInit {\n  results: SearchItemDTO[]\n  query: FormControl\n  SearchItemType = SearchItemType\n  searchUrl: string\n  maxResults: 10\n\n  @ViewChild('searchInput') searchInputViewChild: AutoComplete\n\n  @Output()\n  searchClick: EventEmitter<any> = new EventEmitter()\n\n  get openInSearchItem(): SearchItemDTO {\n    return {\n      type: SearchItemType.OPEN_SEARCH,\n      name: 'Open in search view',\n      url: `${this.searchUrl}${this.query.value}`,\n      queryString: this.query.value,\n    }\n  }\n\n  constructor(\n    private searchService: PortalItemService,\n    private config: ConfigurationService,\n    private readonly translateService: TranslateService,\n    private readonly messageService: MessageService\n  ) {}\n\n  ngOnInit(): void {\n    this.query = new FormControl('')\n    const searchUrl = this.config.getProperty(CONFIG_KEY_TKIT_SEARCH_BASE_URL) || '/ops/enterprise-search'\n    this.searchUrl = `${searchUrl}/search?query=`\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => this.searchInputViewChild.focusInput(), 0)\n  }\n\n  search(event: { query: string }) {\n    this.searchService.searchForServices(event.query, null).subscribe(data => {\n      data = data.slice(0, this.maxResults)\n      data.push(this.openInSearchItem)\n      this.results = data\n    })\n  }\n\n  select(event: SearchItemDTO) {\n    if (event.type === SearchItemType.OPEN_SEARCH) {\n      this.query.setValue(event.queryString)\n    } else {\n      this.query.setValue(event.name)\n    }\n    window.open(event.url)\n  }\n\n  goToSearch(clickEnter: boolean) {\n    if (this.query.value) {\n      window.open(`${this.searchUrl}${this.query.value}`)\n    } else {\n      if (clickEnter === false) {\n        this.messageService.add({\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          summary: this.translateService.instant('QUICK_SEARCH_FORM.WRONG_DATA'),\n          severity: 'error',\n        })\n      }\n    }\n  }\n\n  onSearchClick(event, val: boolean) {\n    this.searchClick.emit({ event, val })\n  }\n}\n","import { Component, Input } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"tk-result-text\",\r\n  template: `\r\n    <span *ngIf=\"resultsCount > 0 && state.totalRecords > 0; else noResults\">\r\n      {{ 'SEARCH.SHOWING' | translate }} {{ state.first + 1 }} -\r\n      {{\r\n        state.rows * (state.page + 1) < state.totalRecords\r\n          ? state.rows * (state.page + 1)\r\n          : state.totalRecords\r\n      }}\r\n      {{ 'SEARCH.OUT_OF_TOTAL' | translate }} {{ state.totalRecords }}\r\n    </span>\r\n    <ng-template #noResults>\r\n      {{ 'SEARCH.NO_RESULTS' | translate }}\r\n    </ng-template>\r\n  `\r\n})\r\nexport class ResultTextComponent {\r\n  @Input() resultsCount: number;\r\n  @Input() state: CustomTableState;\r\n\r\n  constructor() {};\r\n}\r\n\r\nclass CustomTableState {\r\n  page: number;\r\n  pageCount: number;\r\n  rows: number;\r\n  first: number;\r\n  totalRecords: number;\r\n}\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport {\n  FormBuilder,\n  FormGroup,\n  ValidatorFn,\n  Validators\n} from '@angular/forms';\nimport { FeedbackBasic } from '../../../api/model/feedback.model';\n\n@Component({\n  selector: 'tk-feedback',\n  templateUrl: './feedback.component.html',\n  styleUrls: ['./feedback.component.scss']\n})\nexport class FeedbackComponent implements OnInit {\n  form: FormGroup;\n  minLength = 5;\n\n  @Input()\n  submitDisabled = false;\n  @Input()\n  set feedbackData(feedback: FeedbackBasic) {\n    if (this.form) {\n      this.form.patchValue(feedback);\n    }\n  }\n\n  @Output()\n  feedbackDataChange: EventEmitter<FeedbackBasic> = new EventEmitter();\n  @Output()\n  feedbackSubmit: EventEmitter<FeedbackBasic> = new EventEmitter();\n  commentRequired = false;\n\n  requiredCommentValidator: ValidatorFn = (fg: FormGroup) => {\n    const rating = fg.controls.rating.value;\n    const comment = fg.controls.comment.value;\n    if (rating > 0 && rating < 5) {\n      this.commentRequired = true;\n      return comment.length >= this.minLength ? null : { missingComment: true };\n    } else {\n      this.commentRequired = false;\n      return null;\n    }\n  };\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnInit(): void {\n    this.form = this.fb.group({\n      rating: [0, [Validators.required, Validators.min(1), Validators.max(5)]],\n      comment: ['', Validators.minLength(this.minLength)],\n      anonymous: false\n    }, { validators: this.requiredCommentValidator });\n    this.form.valueChanges.subscribe(values => {\n      this.feedbackDataChange.emit(values);\n    });\n  }\n\n  submitFeedback() {\n    if (this.form.valid && !this.submitDisabled) {\n      this.submitDisabled = true;\n      this.feedbackSubmit.emit(this.form.value);\n    }\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { SupportTicket } from '../../../api/model/support-ticket.model';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'tk-support-ticket',\n  templateUrl: './support-ticket.component.html',\n  styleUrls: ['./support-ticket.component.scss']\n})\nexport class SupportTicketComponent implements OnInit {\n  formGroup: FormGroup;\n\n  @Input()\n  display = false;\n  @Output()\n  displayChange: EventEmitter<boolean> = new EventEmitter();\n\n  @Output()\n  submitTicket: EventEmitter<SupportTicket> = new EventEmitter();\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnInit(): void {\n    this.formGroup = this.fb.group({\n      title: ['', Validators.required],\n      description: ['', Validators.required]\n    });\n  }\n\n  close(): void {\n    this.displayChange.emit(false);\n  }\n\n  submit(): void {\n    this.submitTicket.emit(this.formGroup.value);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable({ providedIn: 'root' })\nexport class IconsService {\n  constructor(private http: HttpClient) {}\n\n  public getPrimeicons(): Observable<string[]> {\n    return this.http\n      .get('./portal-lib/assets/primeicons.csv', { responseType: 'text' })\n      .pipe(map(data => data.split('\\n')));\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { FeedbackDTO } from \"../model/feedback.model\";\nimport { HttpClient, HttpParams, HttpHeaders } from \"@angular/common/http\";\nimport { Observable } from \"rxjs\";\nimport { LaunchpadDTO } from \"../model/launchpadDTO\";\nimport { LaunchpadType } from \"../model/launchpadType\";\nimport { LaunchpadTileCreateDTO } from \"../model/launchpadTileCreateDTO\";\n\nexport interface GetAllLaunchpadsFilteredRequestParams {\n  name?: string;\n  portalId?: string;\n  type?: LaunchpadType;\n  userGroupId?: string;\n  userId?: string;\n  userOrganizationId?: string;\n}\n\n@Injectable({ providedIn: \"root\" })\nexport class LaunchpadService {\n  url = \"./launchpad-api/launchpad\";\n\n  constructor(private httpClient: HttpClient) {}\n\n  public getLaunchpads(\n    criteria: GetAllLaunchpadsFilteredRequestParams\n  ): Observable<LaunchpadDTO[]> {\n    const parameters = new HttpParams();\n    Object.keys(criteria).forEach(key => parameters.set(key, criteria[key]));\n    const options = { params: parameters };\n    return this.httpClient.get<LaunchpadDTO[]>(this.url, options);\n  }\n\n  public addToLaunchpad(\n    id: number,\n    createTileDTO: LaunchpadTileCreateDTO\n  ): Observable<LaunchpadDTO> {\n    const httpOptions = {\n      headers: new HttpHeaders({\n        \"Content-Type\": \"application/json\"\n      })\n    };\n\n    return this.httpClient.post<LaunchpadDTO>(\n      `${this.url}/${id}/tiles`,\n      createTileDTO,\n      httpOptions\n    );\n  }\n}\n","import { Component, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core'\nimport { IconsService } from '../../../api/services/icons.service'\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms'\nimport { GetAllLaunchpadsFilteredRequestParams, LaunchpadService } from '../../../api/services/launchpad.service'\nimport { AUTH_SERVICE } from '../../../api/injection-tokens'\nimport { IAuthService } from '../../../api/iauth.service'\nimport { LaunchpadDTO } from '../../../api/model/launchpadDTO'\nimport { LaunchpadTileCreateDTO } from '../../../api/model/launchpadTileCreateDTO'\nimport { TileType } from '../../../api/model/tileType'\nimport { MessageService } from 'primeng/api'\nimport { ConfigurationService } from '../../../api/configuration.service'\n\n@Component({\n  selector: 'tk-add-to-launchpad',\n  templateUrl: './add-to-launchpad.component.html',\n  styleUrls: ['./add-to-launchpad.component.scss'],\n})\nexport class AddToLaunchpadComponent implements OnInit {\n  @Input()\n  public display: boolean\n  @Input()\n  public appId: string\n  @Output()\n  public closed = new EventEmitter<boolean>()\n\n  public launchpads: LaunchpadDTO[] = []\n  public icons: string[]\n  public filteredIcons: string[]\n  public launchpadForm: FormGroup\n\n  constructor(\n    private iconsService: IconsService,\n    private fb: FormBuilder,\n    private launchpadService: LaunchpadService,\n    @Inject(AUTH_SERVICE) private readonly auth: IAuthService,\n    private readonly messageService: MessageService,\n    private readonly confService: ConfigurationService\n  ) {}\n\n  public ngOnInit(): void {\n    this.iconsService.getPrimeicons().subscribe(\n      icons => (this.icons = icons.filter(i => !!i)),\n      error => console.log(error)\n    )\n    this.launchpadForm = this.fb.group({\n      icon: ['', Validators.required],\n      type: [{ value: 'FAVOURITE', disabled: true }],\n      name: ['', Validators.required],\n      appId: [{ value: this.appId, disabled: true }],\n      appUrl: [\n        {\n          value: window.location.href.replace(window.location.origin, ''),\n          disabled: true,\n        },\n      ],\n      launchpad: ['', Validators.required],\n    })\n\n    const launchpadCriteria: GetAllLaunchpadsFilteredRequestParams = {\n      portalId: this.confService.getProperty('TKIT_PORTAL_ID'),\n    }\n    this.launchpadService.getLaunchpads(launchpadCriteria).subscribe(\n      data => (this.launchpads = data),\n      error => console.log(error)\n    )\n  }\n\n  public addToLaunchpad(): void {\n    const createTileDTO: LaunchpadTileCreateDTO = {\n      appId: this.launchpadForm.get('appId').value as string,\n      appUrl: this.launchpadForm.get('appUrl').value as string,\n      name: this.launchpadForm.get('name').value as string,\n      type: this.launchpadForm.get('type').value as TileType,\n      icon: this.launchpadForm.get('icon').value as string,\n    }\n    this.launchpadService.addToLaunchpad(this.launchpadForm.get('launchpad').value.id, createTileDTO).subscribe(\n      () => {\n        this.messageService.add({\n          summary: 'App added to favourites successfully',\n          severity: 'success',\n        })\n        this.close()\n      },\n      () => {\n        this.messageService.add({\n          summary: 'Failed to add app to favourites',\n          severity: 'error',\n        })\n      }\n    )\n  }\n\n  public filterIcons(event): void {\n    const query = event.query.toLowerCase()\n    this.filteredIcons = this.icons.filter(icon => icon.toLowerCase().includes(query))\n  }\n\n  public close(event?: any) {\n    this.closed.emit(false)\n  }\n}\n","import {\n  Directive,\n  Input,\n  ElementRef,\n  NgZone, \n  AfterViewInit\n} from '@angular/core';\nimport { Tooltip } from 'primeng/tooltip';\n\n@Directive({ selector: '[pTooltip-aria]' })\n// eslint-disable-next-line @angular-eslint/directive-class-suffix\nexport class TooltipAriaDirective extends Tooltip implements AfterViewInit {\n  constructor(public el: ElementRef, public zone: NgZone) {\n    super(el, zone);\n  }\n  \n  public ngAfterViewInit(): void {\n    this.zone.runOutsideAngular(() => {\n      switch (this.tooltipEvent) {\n        case 'hover':\n          this.initHoverForTooltipEvent();\n          break;\n        case 'focus':\n          this.initFocusForTooltipEvent();\n          break;\n        case 'hover|focus':\n          this.initHoverForTooltipEvent();\n          this.initFocusForTooltipEvent();\n          break;\n        case 'focus|hover':\n          this.initHoverForTooltipEvent();\n          this.initFocusForTooltipEvent();\n          break;\n      }\n    });\n  }\n  \n  private initHoverForTooltipEvent(): void {\n    this.mouseEnterListener = this.onMouseEnter.bind(this);\n    this.mouseLeaveListener = this.onMouseLeave.bind(this);\n    this.clickListener = this.onClick.bind(this);\n    this.el.nativeElement.addEventListener('mouseenter', this.mouseEnterListener);\n    this.el.nativeElement.addEventListener('mouseleave', this.mouseLeaveListener);\n    this.el.nativeElement.addEventListener('click', this.clickListener);\n  }\n  \n  private initFocusForTooltipEvent(): void {\n    this.focusListener = this.onFocus.bind(this);\n    this.blurListener = this.onBlur.bind(this);\n    this.el.nativeElement.addEventListener('focus', this.focusListener);\n    this.el.nativeElement.addEventListener('blur', this.blurListener);\n  }\n  \n  @Input('pTooltip-aria') set pTooltipText(text: string) {\n    this.text = text;\n  }\n}\n","import { CommonModule } from '@angular/common'\nimport { HttpClient, HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http'\nimport { APP_INITIALIZER, NgModule } from '@angular/core'\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'\nimport { TranslateModule, TranslateService } from '@ngx-translate/core'\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader'\nimport { ButtonModule } from 'primeng/button'\nimport { CalendarModule } from 'primeng/calendar'\nimport { CardModule } from 'primeng/card'\nimport { CheckboxModule } from 'primeng/checkbox'\nimport { ConfirmDialogModule } from 'primeng/confirmdialog'\nimport { DialogModule } from 'primeng/dialog'\nimport { DropdownModule } from 'primeng/dropdown'\nimport { DialogService, DynamicDialogModule } from 'primeng/dynamicdialog'\nimport { InputSwitchModule } from 'primeng/inputswitch'\nimport { InputTextModule } from 'primeng/inputtext'\nimport { InputTextareaModule } from 'primeng/inputtextarea'\nimport { MenuModule } from 'primeng/menu'\nimport { MessageModule } from 'primeng/message'\nimport { MessagesModule } from 'primeng/messages'\nimport { OverlayPanelModule } from 'primeng/overlaypanel'\nimport { PaginatorModule } from 'primeng/paginator'\nimport { PanelModule } from 'primeng/panel'\nimport { PanelMenuModule } from 'primeng/panelmenu'\nimport { ScrollPanelModule } from 'primeng/scrollpanel'\nimport { SelectButtonModule } from 'primeng/selectbutton'\nimport { TableModule } from 'primeng/table'\nimport { ToastModule } from 'primeng/toast'\nimport { ToggleButtonModule } from 'primeng/togglebutton'\nimport { TooltipModule } from 'primeng/tooltip'\nimport { AutoCompleteModule } from 'primeng/autocomplete'\nimport { RatingModule } from 'primeng/rating'\nimport { RippleModule } from 'primeng/ripple'\nimport { SkeletonModule } from 'primeng/skeleton'\nimport { BreadcrumbModule } from \"primeng/breadcrumb\";\nimport { ConfigurationService } from '../api/configuration.service'\nimport { AUTH_SERVICE } from '../api/injection-tokens'\nimport { ActionDirective } from './components/action.directive'\nimport { BreadcrumbComponent } from './components/breadcrumbs/breadcrumb.component'\n// import { KeycloakAngularModule, KeycloakService } from \"keycloak-angular\";\nimport { CollapsibleDirective } from './components/collapsible.directive'\nimport { AppFooterComponent } from './components/footer.component'\nimport { HelpEditDialogComponent } from './components/help-edit-dialog.component'\nimport { HttpProgressLoaderComponent } from './components/http-progress-loader.component'\nimport { AppInlineProfileComponent } from './components/inline-profile.component'\nimport { LoadingComponent } from './components/loading/loading.component'\nimport { NoHelpInfoComponent } from './components/no-help-info/no-help-info.component'\nimport { PanelHeaderComponent } from './components/panel-header.component'\nimport { HeaderComponent } from './components/portal-header/header.component'\nimport { AppMenuComponent, AppSubMenuComponent } from './components/portal-menu/portal-menu.component'\nimport { PortalPageComponent } from './components/portal-page/portal-page.component'\nimport { PortalSearchPageComponent } from './components/portal-search-page/portal-search-page.component'\nimport { PortalViewportComponent } from './components/portal-viewport/portal-viewport.component'\nimport { TkIfPermDirective } from './components/tkifperm.directive'\nimport { ToolbarItemComponent } from './components/toolbar-item.component'\nimport { HttpProgressInterceptor } from './http-progress-interceptor'\nimport { tkitPortalInitializer } from './tkitPortalInitilizer'\nimport { SearchBarComponent } from './components/search-bar/search-bar.component'\nimport { MultiTranslateHttpLoader } from 'ngx-translate-multi-http-loader'\nimport { ResultTextComponent } from './components/result-text.component'\nimport { FeedbackComponent } from './components/feedback/feedback.component'\nimport { SupportTicketComponent } from './components/support-ticket/support-ticket.component'\nimport { AddToLaunchpadComponent } from './components/add-to-launchpad/add-to-launchpad.component'\nimport { TooltipAriaDirective } from './components/aria/tooltip.directive'\nimport { HttpCacheInterceptorModule, useHttpCacheLocalStorage } from '@ngneat/cashew'\n\nexport function HttpLoaderFactory2(http: HttpClient) {\n  return new TranslateHttpLoader(http, './portal-lib/assets/i18n/')\n}\n\nexport function StandardTranslateHttpLoader(http: HttpClient) {\n  return new MultiTranslateHttpLoader(http, [\n    { prefix: './assets/i18n/', suffix: '.json' },\n    { prefix: './portal-lib/assets/i18n/', suffix: '.json' },\n  ])\n}\n\n@NgModule({\n  declarations: [\n    PortalViewportComponent,\n    ToolbarItemComponent,\n    AppMenuComponent,\n    AppSubMenuComponent,\n    HeaderComponent,\n    AppFooterComponent,\n    HelpEditDialogComponent,\n    BreadcrumbComponent,\n    AppInlineProfileComponent,\n    HttpProgressLoaderComponent,\n    PortalPageComponent,\n    PanelHeaderComponent,\n    CollapsibleDirective,\n    ActionDirective,\n    TooltipAriaDirective,\n    NoHelpInfoComponent,\n    PortalSearchPageComponent,\n    LoadingComponent,\n    TkIfPermDirective,\n    SearchBarComponent,\n    ResultTextComponent,\n    FeedbackComponent,\n    AddToLaunchpadComponent,\n    SupportTicketComponent,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n\n    // KeycloakAngularModule,\n\n    // primeng\n    // TODO do not import all!!!\n    AutoCompleteModule,\n    BreadcrumbModule,\n    ButtonModule,\n    CalendarModule,\n    CardModule,\n    CheckboxModule,\n    ConfirmDialogModule,\n    DialogModule,\n    DynamicDialogModule,\n    DropdownModule,\n    InputSwitchModule,\n    InputTextModule,\n    InputTextareaModule,\n    MenuModule,\n    MessageModule,\n    MessagesModule,\n    OverlayPanelModule,\n    PanelModule,\n    PanelMenuModule,\n    RatingModule,\n    RippleModule,\n    ScrollPanelModule,\n    SkeletonModule,\n    TableModule,\n    ToastModule,\n    ToggleButtonModule,\n    TooltipModule,\n    // end primeng modules\n    HttpClientModule,\n    HttpCacheInterceptorModule.forRoot(),\n\n    TranslateModule,\n  ],\n  exports: [\n    FormsModule,\n\n    // reexport primeng\n    AutoCompleteModule,\n    BreadcrumbModule,\n    ButtonModule,\n    CalendarModule,\n    CardModule,\n    CheckboxModule,\n    ConfirmDialogModule,\n    DialogModule,\n    DynamicDialogModule,\n    DropdownModule,\n    InputSwitchModule,\n    InputTextModule,\n    InputTextareaModule,\n    MenuModule,\n    MessageModule,\n    MessagesModule,\n    OverlayPanelModule,\n    PaginatorModule,\n    PanelModule,\n    PanelMenuModule,\n    RatingModule,\n    RippleModule,\n    SelectButtonModule,\n    SkeletonModule,\n    TableModule,\n    ToastModule,\n    ToggleButtonModule,\n    TooltipModule,\n\n    // angular common\n    HttpClientModule,\n    HttpCacheInterceptorModule,\n\n    // our components\n    PortalViewportComponent,\n    PortalPageComponent,\n    PortalSearchPageComponent,\n    PanelHeaderComponent,\n    ToolbarItemComponent,\n    LoadingComponent,\n    CollapsibleDirective,\n    ActionDirective,\n    TooltipAriaDirective,\n    TkIfPermDirective,\n    ResultTextComponent,\n  ],\n  entryComponents: [NoHelpInfoComponent],\n  providers: [\n    useHttpCacheLocalStorage,\n\n    DialogService,\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: HttpProgressInterceptor,\n      multi: true,\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: tkitPortalInitializer,\n      multi: true,\n      deps: [ConfigurationService, TranslateService, AUTH_SERVICE],\n    },\n  ],\n})\nexport class TkitPortalModule {}\n","import { forwardRef } from '@angular/core';\r\nimport { PortalSearchPage } from './pages/PortalSearchPage';\r\n\r\nexport function provideParent(component: any, parentType?: any) {\r\n  return {\r\n    provide: parentType || PortalSearchPage,\r\n    useExisting: forwardRef(() => component)\r\n  };\r\n}\r\n","/*\n * Public API Surface of portal-lib\n */\n\nexport * from './lib/mock-auth/mock-auth.module';\nexport * from './lib/auth/auth.module';\n\nexport * from './lib/api/model';\nexport * from './lib/api/iauth.service';\nexport * from './lib/api/services/breadcrumb.service';\nexport * from './lib/api/configuration.service';\nexport * from './lib/api/injection-tokens';\nexport * from './lib/api/state.service';\nexport * from './lib/api/services/user-profile.service';\nexport { DEFAULT_AVATAR_URL } from './lib/tkit-portal/constants';\n\nexport * from './lib/tkit-portal/tkit-portal.module';\nexport * from './lib/tkit-portal/components/portal-viewport/portal-viewport.component';\nexport * from './lib/tkit-portal/components/panel-header.component';\nexport * from './lib/tkit-portal/components/loading/loading.component';\nexport * from './lib/tkit-portal/components/collapsible.directive';\n\nexport * from './lib/tkit-portal/pages/PortalSearchPage';\nexport * from './lib/tkit-portal/pages/PortalPage';\n\nexport * from './lib/tkit-portal/functions';\nexport * from './lib/tkit-portal/components/tkifperm.directive';\nexport * from './lib/tkit-portal/components/action.directive';\nexport * from './lib/tkit-portal/components/portal-search-page/portal-search-page.component';\nexport * from './lib/tkit-portal/components/toolbar-item.component';\nexport * from './lib/tkit-portal/components/portal-page/portal-page.component';\nexport * from './lib/tkit-portal/components/result-text.component';\nexport * from './lib/tkit-portal/components/aria/tooltip.directive';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {FeedbackApiService as h} from './lib/api/services/feedback-api.service';\nexport {HelpPageAPIService as d} from './lib/api/services/help-page-api.service';\nexport {IconsService as y} from './lib/api/services/icons.service';\nexport {LaunchpadService as z} from './lib/api/services/launchpad.service';\nexport {MenuApiService as g} from './lib/api/services/menu-api.service';\nexport {MenuService as f} from './lib/api/services/menu.service';\nexport {PortalApiService as c} from './lib/api/services/portal-api.service';\nexport {PortalItemService as v} from './lib/api/services/portal-item.service';\nexport {SearchTemplateAPIService as t} from './lib/api/services/search-template-api.service';\nexport {SupportTicketApiService as i} from './lib/api/services/support-ticket-api.service';\nexport {ThemeService as e} from './lib/api/services/theme.service';\nexport {KeycloakAuthService as b} from './lib/auth/keycloak-auth.service';\nexport {MockAuthService as a} from './lib/mock-auth/mock-auth.service';\nexport {AddToLaunchpadComponent as x} from './lib/tkit-portal/components/add-to-launchpad/add-to-launchpad.component';\nexport {BreadcrumbComponent as o} from './lib/tkit-portal/components/breadcrumbs/breadcrumb.component';\nexport {FeedbackComponent as w} from './lib/tkit-portal/components/feedback/feedback.component';\nexport {AppFooterComponent as m} from './lib/tkit-portal/components/footer.component';\nexport {HelpEditDialogComponent as n} from './lib/tkit-portal/components/help-edit-dialog.component';\nexport {HttpProgressLoaderComponent as q} from './lib/tkit-portal/components/http-progress-loader.component';\nexport {AppInlineProfileComponent as p} from './lib/tkit-portal/components/inline-profile.component';\nexport {NoHelpInfoComponent as s} from './lib/tkit-portal/components/no-help-info/no-help-info.component';\nexport {HeaderComponent as l} from './lib/tkit-portal/components/portal-header/header.component';\nexport {AppMenuComponent as j,AppSubMenuComponent as k} from './lib/tkit-portal/components/portal-menu/portal-menu.component';\nexport {SearchBarComponent as u} from './lib/tkit-portal/components/search-bar/search-bar.component';\nexport {SupportTicketComponent as ba} from './lib/tkit-portal/components/support-ticket/support-ticket.component';\nexport {HttpProgressInterceptor as bb} from './lib/tkit-portal/http-progress-interceptor';\nexport {HttpProgressLoaderService as r} from './lib/tkit-portal/http-progress-loader.service';\nexport {tkitPortalInitializer as bc} from './lib/tkit-portal/tkitPortalInitilizer';"],"names":[],"mappings":"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"}